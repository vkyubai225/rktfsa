import{m as zf,o as je,r as Sw,t as ge,v as Ow,w as fd,x as Xo,y as hd,z as dd,A as fu,B as pd,H as Pw,D as gd,E as xw}from"./index.42498207.js";function hu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function yd(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Wc(i,e){e||(e=i.reduce((o,u)=>o+u.length,0));const r=yd(e);let s=0;for(const o of i)r.set(o,s),s+=o.length;return hu(r)}function md(i,e,r,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:r},decoder:{decode:s}}}const Bf=md("utf8","u",i=>{const e=new TextDecoder("utf8");return"u"+e.decode(i)},i=>new TextEncoder().encode(i.substring(1))),Ac=md("ascii","a",i=>{let e="a";for(let r=0;r<i.length;r++)e+=String.fromCharCode(i[r]);return e},i=>{i=i.substring(1);const e=yd(i.length);for(let r=0;r<i.length;r++)e[r]=i.charCodeAt(r);return e}),vd={utf8:Bf,"utf-8":Bf,hex:zf.base16,latin1:Ac,ascii:Ac,binary:Ac,...zf};function wr(i,e="utf8"){const r=vd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hu(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}function ur(i,e="utf8"){const r=vd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):r.encoder.encode(i).substring(1)}const Rw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var er={exports:{}},$i=typeof Reflect=="object"?Reflect:null,Hf=$i&&typeof $i.apply=="function"?$i.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Ho;$i&&typeof $i.ownKeys=="function"?Ho=$i.ownKeys:Object.getOwnPropertySymbols?Ho=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ho=function(e){return Object.getOwnPropertyNames(e)};function Tw(i){console&&console.warn&&console.warn(i)}var _d=Number.isNaN||function(e){return e!==e};function Ke(){Ke.init.call(this)}er.exports=Ke;er.exports.once=$w;Ke.EventEmitter=Ke;Ke.prototype._events=void 0;Ke.prototype._eventsCount=0;Ke.prototype._maxListeners=void 0;var kf=10;function Zo(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Ke,"defaultMaxListeners",{enumerable:!0,get:function(){return kf},set:function(i){if(typeof i!="number"||i<0||_d(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");kf=i}});Ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_d(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wd(i){return i._maxListeners===void 0?Ke.defaultMaxListeners:i._maxListeners}Ke.prototype.getMaxListeners=function(){return wd(this)};Ke.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var y;if(r.length>0&&(y=r[0]),y instanceof Error)throw y;var w=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw w.context=y,w}var x=u[e];if(x===void 0)return!1;if(typeof x=="function")Hf(x,this,r);else for(var b=x.length,O=Od(x,b),s=0;s<b;++s)Hf(O[s],this,r);return!0};function bd(i,e,r,s){var o,u,y;if(Zo(r),u=i._events,u===void 0?(u=i._events=Object.create(null),i._eventsCount=0):(u.newListener!==void 0&&(i.emit("newListener",e,r.listener?r.listener:r),u=i._events),y=u[e]),y===void 0)y=u[e]=r,++i._eventsCount;else if(typeof y=="function"?y=u[e]=s?[r,y]:[y,r]:s?y.unshift(r):y.push(r),o=wd(i),o>0&&y.length>o&&!y.warned){y.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=i,w.type=e,w.count=y.length,Tw(w)}return i}Ke.prototype.addListener=function(e,r){return bd(this,e,r,!1)};Ke.prototype.on=Ke.prototype.addListener;Ke.prototype.prependListener=function(e,r){return bd(this,e,r,!0)};function Aw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ed(i,e,r){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:r},o=Aw.bind(s);return o.listener=r,s.wrapFn=o,o}Ke.prototype.once=function(e,r){return Zo(r),this.on(e,Ed(this,e,r)),this};Ke.prototype.prependOnceListener=function(e,r){return Zo(r),this.prependListener(e,Ed(this,e,r)),this};Ke.prototype.removeListener=function(e,r){var s,o,u,y,w;if(Zo(r),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(u=-1,y=s.length-1;y>=0;y--)if(s[y]===r||s[y].listener===r){w=s[y].listener,u=y;break}if(u<0)return this;u===0?s.shift():Nw(s,u),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,w||r)}return this};Ke.prototype.off=Ke.prototype.removeListener;Ke.prototype.removeAllListeners=function(e){var r,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var u=Object.keys(s),y;for(o=0;o<u.length;++o)y=u[o],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function Id(i,e,r){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Cw(o):Od(o,o.length)}Ke.prototype.listeners=function(e){return Id(this,e,!0)};Ke.prototype.rawListeners=function(e){return Id(this,e,!1)};Ke.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Sd.call(i,e)};Ke.prototype.listenerCount=Sd;function Sd(i){var e=this._events;if(e!==void 0){var r=e[i];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ke.prototype.eventNames=function(){return this._eventsCount>0?Ho(this._events):[]};function Od(i,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=i[s];return r}function Nw(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Cw(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}function $w(i,e){return new Promise(function(r,s){function o(y){i.removeListener(e,u),s(y)}function u(){typeof i.removeListener=="function"&&i.removeListener("error",o),r([].slice.call(arguments))}Pd(i,e,u,{once:!0}),e!=="error"&&Dw(i,o,{once:!0})})}function Dw(i,e,r){typeof i.on=="function"&&Pd(i,"error",e,r)}function Pd(i,e,r,s){if(typeof i.on=="function")s.once?i.once(e,r):i.on(e,r);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(u){s.once&&i.removeEventListener(e,o),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var du=er.exports;function jw(i,e=[]){const r=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];r.push(...o.accounts)}),r}const Fw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Lw(i,e){const{message:r,code:s}=Fw[i];return{message:e?`${r} ${e}`:r,code:s}}function Gc(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}const Uw=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Mw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,qw=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function zw(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Bw(i);return}return e}function Bw(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Fo(i,e={}){if(typeof i!="string")return i;const r=i.trim();if(i[0]==='"'&&i.at(-1)==='"'&&!i.includes("\\"))return r.slice(1,-1);if(r.length<=9){const s=r.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!qw.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(Uw.test(i)||Mw.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,zw)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function Hw(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function kt(i,...e){try{return Hw(i(...e))}catch(r){return Promise.reject(r)}}function kw(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function Vw(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function ko(i){if(kw(i))return String(i);if(Vw(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return ko(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function xd(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Jc="base64:";function Kw(i){if(typeof i=="string")return i;xd();const e=Buffer.from(i).toString("base64");return Jc+e}function Ww(i){return typeof i!="string"||!i.startsWith(Jc)?i:(xd(),Buffer.from(i.slice(Jc.length),"base64"))}function mr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Gw(...i){return mr(i.join(":"))}function Lo(i){return i=mr(i),i?i+":":""}const Jw="memory",Qw=()=>{const i=new Map;return{name:Jw,options:{},hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,r){i.set(e,r)},setItemRaw(e,r){i.set(e,r)},removeItem(e){i.delete(e)},getKeys(){return Array.from(i.keys())},clear(){i.clear()},dispose(){i.clear()}}};function Yw(i={}){const e={mounts:{"":i.driver||Qw()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=b=>{for(const O of e.mountpoints)if(b.startsWith(O))return{base:O,relativeKey:b.slice(O.length),driver:e.mounts[O]};return{base:"",relativeKey:b,driver:e.mounts[""]}},s=(b,O)=>e.mountpoints.filter(A=>A.startsWith(b)||O&&b.startsWith(A)).map(A=>({relativeBase:b.length>A.length?b.slice(A.length):void 0,mountpoint:A,driver:e.mounts[A]})),o=(b,O)=>{if(!!e.watching){O=mr(O);for(const A of e.watchListeners)A(b,O)}},u=async()=>{if(!e.watching){e.watching=!0;for(const b in e.mounts)e.unwatch[b]=await Vf(e.mounts[b],o,b)}},y=async()=>{if(!!e.watching){for(const b in e.unwatch)await e.unwatch[b]();e.unwatch={},e.watching=!1}},w=(b,O,A)=>{const B=new Map,V=F=>{let oe=B.get(F.base);return oe||(oe={driver:F.driver,base:F.base,items:[]},B.set(F.base,oe)),oe};for(const F of b){const oe=typeof F=="string",re=mr(oe?F:F.key),ae=oe?void 0:F.value,I=oe||!F.options?O:{...O,...F.options},N=r(re);V(N).items.push({key:re,value:ae,relativeKey:N.relativeKey,options:I})}return Promise.all([...B.values()].map(F=>A(F))).then(F=>F.flat())},x={hasItem(b,O={}){b=mr(b);const{relativeKey:A,driver:B}=r(b);return kt(B.hasItem,A,O)},getItem(b,O={}){b=mr(b);const{relativeKey:A,driver:B}=r(b);return kt(B.getItem,A,O).then(V=>Fo(V))},getItems(b,O){return w(b,O,A=>A.driver.getItems?kt(A.driver.getItems,A.items.map(B=>({key:B.relativeKey,options:B.options})),O).then(B=>B.map(V=>({key:Gw(A.base,V.key),value:Fo(V.value)}))):Promise.all(A.items.map(B=>kt(A.driver.getItem,B.relativeKey,B.options).then(V=>({key:B.key,value:Fo(V)})))))},getItemRaw(b,O={}){b=mr(b);const{relativeKey:A,driver:B}=r(b);return B.getItemRaw?kt(B.getItemRaw,A,O):kt(B.getItem,A,O).then(V=>Ww(V))},async setItem(b,O,A={}){if(O===void 0)return x.removeItem(b);b=mr(b);const{relativeKey:B,driver:V}=r(b);!V.setItem||(await kt(V.setItem,B,ko(O),A),V.watch||o("update",b))},async setItems(b,O){await w(b,O,async A=>{A.driver.setItems&&await kt(A.driver.setItems,A.items.map(B=>({key:B.relativeKey,value:ko(B.value),options:B.options})),O),A.driver.setItem&&await Promise.all(A.items.map(B=>kt(A.driver.setItem,B.relativeKey,ko(B.value),B.options)))})},async setItemRaw(b,O,A={}){if(O===void 0)return x.removeItem(b,A);b=mr(b);const{relativeKey:B,driver:V}=r(b);if(V.setItemRaw)await kt(V.setItemRaw,B,O,A);else if(V.setItem)await kt(V.setItem,B,Kw(O),A);else return;V.watch||o("update",b)},async removeItem(b,O={}){typeof O=="boolean"&&(O={removeMeta:O}),b=mr(b);const{relativeKey:A,driver:B}=r(b);!B.removeItem||(await kt(B.removeItem,A,O),(O.removeMeta||O.removeMata)&&await kt(B.removeItem,A+"$",O),B.watch||o("remove",b))},async getMeta(b,O={}){typeof O=="boolean"&&(O={nativeOnly:O}),b=mr(b);const{relativeKey:A,driver:B}=r(b),V=Object.create(null);if(B.getMeta&&Object.assign(V,await kt(B.getMeta,A,O)),!O.nativeOnly){const F=await kt(B.getItem,A+"$",O).then(oe=>Fo(oe));F&&typeof F=="object"&&(typeof F.atime=="string"&&(F.atime=new Date(F.atime)),typeof F.mtime=="string"&&(F.mtime=new Date(F.mtime)),Object.assign(V,F))}return V},setMeta(b,O,A={}){return this.setItem(b+"$",O,A)},removeMeta(b,O={}){return this.removeItem(b+"$",O)},async getKeys(b,O={}){b=Lo(b);const A=s(b,!0);let B=[];const V=[];for(const F of A){const re=(await kt(F.driver.getKeys,F.relativeBase,O)).map(ae=>F.mountpoint+mr(ae)).filter(ae=>!B.some(I=>ae.startsWith(I)));V.push(...re),B=[F.mountpoint,...B.filter(ae=>!ae.startsWith(F.mountpoint))]}return b?V.filter(F=>F.startsWith(b)&&!F.endsWith("$")):V.filter(F=>!F.endsWith("$"))},async clear(b,O={}){b=Lo(b),await Promise.all(s(b,!1).map(async A=>{if(A.driver.clear)return kt(A.driver.clear,A.relativeBase,O);if(A.driver.removeItem){const B=await A.driver.getKeys(A.relativeBase||"",O);return Promise.all(B.map(V=>A.driver.removeItem(V,O)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(b=>Kf(b)))},async watch(b){return await u(),e.watchListeners.push(b),async()=>{e.watchListeners=e.watchListeners.filter(O=>O!==b),e.watchListeners.length===0&&await y()}},async unwatch(){e.watchListeners=[],await y()},mount(b,O){if(b=Lo(b),b&&e.mounts[b])throw new Error(`already mounted at ${b}`);return b&&(e.mountpoints.push(b),e.mountpoints.sort((A,B)=>B.length-A.length)),e.mounts[b]=O,e.watching&&Promise.resolve(Vf(O,o,b)).then(A=>{e.unwatch[b]=A}).catch(console.error),x},async unmount(b,O=!0){b=Lo(b),!(!b||!e.mounts[b])&&(e.watching&&b in e.unwatch&&(e.unwatch[b](),delete e.unwatch[b]),O&&await Kf(e.mounts[b]),e.mountpoints=e.mountpoints.filter(A=>A!==b),delete e.mounts[b])},getMount(b=""){b=mr(b)+":";const O=r(b);return{driver:O.driver,base:O.base}},getMounts(b="",O={}){return b=mr(b),s(b,O.parents).map(B=>({driver:B.driver,base:B.mountpoint}))}};return x}function Vf(i,e,r){return i.watch?i.watch((s,o)=>e(s,r+o)):()=>{}}async function Kf(i){typeof i.dispose=="function"&&await kt(i.dispose)}function ni(i){return new Promise((e,r)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>r(i.error)})}function Rd(i,e){const r=indexedDB.open(i);r.onupgradeneeded=()=>r.result.createObjectStore(e);const s=ni(r);return(o,u)=>s.then(y=>u(y.transaction(e,o).objectStore(e)))}let Nc;function Os(){return Nc||(Nc=Rd("keyval-store","keyval")),Nc}function Wf(i,e=Os()){return e("readonly",r=>ni(r.get(i)))}function Xw(i,e,r=Os()){return r("readwrite",s=>(s.put(e,i),ni(s.transaction)))}function Zw(i,e=Os()){return e("readwrite",r=>(r.delete(i),ni(r.transaction)))}function e1(i=Os()){return i("readwrite",e=>(e.clear(),ni(e.transaction)))}function t1(i,e){return i.openCursor().onsuccess=function(){!this.result||(e(this.result),this.result.continue())},ni(i.transaction)}function r1(i=Os()){return i("readonly",e=>{if(e.getAllKeys)return ni(e.getAllKeys());const r=[];return t1(e,s=>r.push(s.key)).then(()=>r)})}const n1=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),i1=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=i.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Td(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return i1(i)}catch{return i}}function Ad(i){return typeof i=="string"?i:n1(i)||""}const s1="idb-keyval";var o1=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",r=o=>e+o;let s;return i.dbName&&i.storeName&&(s=Rd(i.dbName,i.storeName)),{name:s1,options:i,async hasItem(o){return!(typeof await Wf(r(o),s)>"u")},async getItem(o){return await Wf(r(o),s)??null},setItem(o,u){return Xw(r(o),u,s)},removeItem(o){return Zw(r(o),s)},getKeys(){return r1(s)},clear(){return e1(s)}}};const a1="WALLET_CONNECT_V2_INDEXED_DB",c1="keyvaluestorage";class u1{constructor(){this.indexedDb=Yw({driver:o1({dbName:a1,storeName:c1})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Ad(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},i.prototype.setItem=function(r,s){this[r]=String(s)},i.prototype.removeItem=function(r){delete this[r]},i.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},i.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Cc<"u"&&Cc.localStorage?Vo.exports=Cc.localStorage:typeof window<"u"&&window.localStorage?Vo.exports=window.localStorage:Vo.exports=new e})();function l1(i){var e;return[i[0],Td((e=i[1])!=null?e:"")]}class f1{constructor(){this.localStorage=Vo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(l1)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Td(r)}async setItem(e,r){this.localStorage.setItem(e,Ad(r))}async removeItem(e){this.localStorage.removeItem(e)}}const h1="wc_storage_version",Gf=1,d1=async(i,e,r)=>{const s=h1,o=await e.getItem(s);if(o&&o>=Gf){r(e);return}const u=await i.getKeys();if(!u.length){r(e);return}const y=[];for(;u.length;){const w=u.shift();if(!w)continue;const x=w.toLowerCase();if(x.includes("wc@")||x.includes("walletconnect")||x.includes("wc_")||x.includes("wallet_connect")){const b=await i.getItem(w);await e.setItem(w,b),y.push(w)}}await e.setItem(s,Gf),r(e),p1(i,y)},p1=async(i,e)=>{e.length&&e.forEach(async r=>{await i.removeItem(r)})};class g1{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new f1;this.storage=e;try{const r=new u1;d1(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}var Li={},Ps={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,u,y,w,x,b,O,A,B,V,F,oe,re,ae,I,N,$,D,U,Q;(function(R){var le=typeof je=="object"?je:typeof self=="object"?self:typeof this=="object"?this:{};R(l(le,l(i.exports)));function l(p,g){return p!==le&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(E,d){return p[E]=g?g(E,d):d}}})(function(R){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)p.hasOwnProperty(g)&&(l[g]=p[g])};e=function(l,p){le(l,p);function g(){this.constructor=l}l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},r=Object.assign||function(l){for(var p,g=1,E=arguments.length;g<E;g++){p=arguments[g];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},s=function(l,p){var g={};for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&p.indexOf(E)<0&&(g[E]=l[E]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(l);d<E.length;d++)p.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(l,E[d])&&(g[E[d]]=l[E[d]]);return g},o=function(l,p,g,E){var d=arguments.length,f=d<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,p,g,E);else for(var H=l.length-1;H>=0;H--)(T=l[H])&&(f=(d<3?T(f):d>3?T(p,g,f):T(p,g))||f);return d>3&&f&&Object.defineProperty(p,g,f),f},u=function(l,p){return function(g,E){p(g,E,l)}},y=function(l,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,p)},w=function(l,p,g,E){function d(f){return f instanceof g?f:new g(function(T){T(f)})}return new(g||(g=Promise))(function(f,T){function H(K){try{S(E.next(K))}catch(te){T(te)}}function G(K){try{S(E.throw(K))}catch(te){T(te)}}function S(K){K.done?f(K.value):d(K.value).then(H,G)}S((E=E.apply(l,p||[])).next())})},x=function(l,p){var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,T;return T={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function H(S){return function(K){return G([S,K])}}function G(S){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,d&&(f=S[0]&2?d.return:S[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,S[1])).done)return f;switch(d=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,d=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(f=g.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){g.label=S[1];break}if(S[0]===6&&g.label<f[1]){g.label=f[1],f=S;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(S);break}f[2]&&g.ops.pop(),g.trys.pop();continue}S=p.call(l,g)}catch(K){S=[6,K],d=0}finally{E=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Q=function(l,p,g,E){E===void 0&&(E=g),l[E]=p[g]},b=function(l,p){for(var g in l)g!=="default"&&!p.hasOwnProperty(g)&&(p[g]=l[g])},O=function(l){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&l[p],E=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&E>=l.length&&(l=void 0),{value:l&&l[E++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(l,p){var g=typeof Symbol=="function"&&l[Symbol.iterator];if(!g)return l;var E=g.call(l),d,f=[],T;try{for(;(p===void 0||p-->0)&&!(d=E.next()).done;)f.push(d.value)}catch(H){T={error:H}}finally{try{d&&!d.done&&(g=E.return)&&g.call(E)}finally{if(T)throw T.error}}return f},B=function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(A(arguments[p]));return l},V=function(){for(var l=0,p=0,g=arguments.length;p<g;p++)l+=arguments[p].length;for(var E=Array(l),d=0,p=0;p<g;p++)for(var f=arguments[p],T=0,H=f.length;T<H;T++,d++)E[d]=f[T];return E},F=function(l){return this instanceof F?(this.v=l,this):new F(l)},oe=function(l,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=g.apply(l,p||[]),d,f=[];return d={},T("next"),T("throw"),T("return"),d[Symbol.asyncIterator]=function(){return this},d;function T(ne){E[ne]&&(d[ne]=function(ye){return new Promise(function(We,we){f.push([ne,ye,We,we])>1||H(ne,ye)})})}function H(ne,ye){try{G(E[ne](ye))}catch(We){te(f[0][3],We)}}function G(ne){ne.value instanceof F?Promise.resolve(ne.value.v).then(S,K):te(f[0][2],ne)}function S(ne){H("next",ne)}function K(ne){H("throw",ne)}function te(ne,ye){ne(ye),f.shift(),f.length&&H(f[0][0],f[0][1])}},re=function(l){var p,g;return p={},E("next"),E("throw",function(d){throw d}),E("return"),p[Symbol.iterator]=function(){return this},p;function E(d,f){p[d]=l[d]?function(T){return(g=!g)?{value:F(l[d](T)),done:d==="return"}:f?f(T):T}:f}},ae=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l[Symbol.asyncIterator],g;return p?p.call(l):(l=typeof O=="function"?O(l):l[Symbol.iterator](),g={},E("next"),E("throw"),E("return"),g[Symbol.asyncIterator]=function(){return this},g);function E(f){g[f]=l[f]&&function(T){return new Promise(function(H,G){T=l[f](T),d(H,G,T.done,T.value)})}}function d(f,T,H,G){Promise.resolve(G).then(function(S){f({value:S,done:H})},T)}},I=function(l,p){return Object.defineProperty?Object.defineProperty(l,"raw",{value:p}):l.raw=p,l},N=function(l){if(l&&l.__esModule)return l;var p={};if(l!=null)for(var g in l)Object.hasOwnProperty.call(l,g)&&(p[g]=l[g]);return p.default=l,p},$=function(l){return l&&l.__esModule?l:{default:l}},D=function(l,p){if(!p.has(l))throw new TypeError("attempted to get private field on non-instance");return p.get(l)},U=function(l,p,g){if(!p.has(l))throw new TypeError("attempted to set private field on non-instance");return p.set(l,g),g},R("__extends",e),R("__assign",r),R("__rest",s),R("__decorate",o),R("__param",u),R("__metadata",y),R("__awaiter",w),R("__generator",x),R("__exportStar",b),R("__createBinding",Q),R("__values",O),R("__read",A),R("__spread",B),R("__spreadArrays",V),R("__await",F),R("__asyncGenerator",oe),R("__asyncDelegator",re),R("__asyncValues",ae),R("__makeTemplateObject",I),R("__importStar",N),R("__importDefault",$),R("__classPrivateFieldGet",D),R("__classPrivateFieldSet",U)})})(Ps);var ea={},pu={},ta={};class ii{}var y1=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ii},Symbol.toStringTag,{value:"Module"})),m1=Sw(y1);Object.defineProperty(ta,"__esModule",{value:!0});ta.IHeartBeat=void 0;const v1=m1;class _1 extends v1.IEvents{constructor(e){super()}}ta.IHeartBeat=_1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ps.exports.__exportStar(ta,i)})(pu);var gu={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.HEARTBEAT_EVENTS=Fi.HEARTBEAT_INTERVAL=void 0;const w1=ge;Fi.HEARTBEAT_INTERVAL=w1.FIVE_SECONDS;Fi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ps.exports.__exportStar(Fi,i)})(gu);Object.defineProperty(ea,"__esModule",{value:!0});ea.HeartBeat=void 0;const $c=Ps.exports,b1=er.exports,E1=ge,I1=pu,Dc=gu;class yu extends I1.IHeartBeat{constructor(e){super(e),this.events=new b1.EventEmitter,this.interval=Dc.HEARTBEAT_INTERVAL,this.interval=e?.interval||Dc.HEARTBEAT_INTERVAL}static init(e){return $c.__awaiter(this,void 0,void 0,function*(){const r=new yu(e);return yield r.init(),r})}init(){return $c.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return $c.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),E1.toMiliseconds(this.interval))})}pulse(){this.events.emit(Dc.HEARTBEAT_EVENTS.pulse)}}ea.HeartBeat=yu;(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Ps.exports;e.__exportStar(ea,i),e.__exportStar(pu,i),e.__exportStar(gu,i)})(Li);var De={},Nd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,u,y,w,x,b,O,A,B,V,F,oe,re,ae,I,N,$,D,U,Q;(function(R){var le=typeof je=="object"?je:typeof self=="object"?self:typeof this=="object"?this:{};R(l(le,l(i.exports)));function l(p,g){return p!==le&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(E,d){return p[E]=g?g(E,d):d}}})(function(R){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)p.hasOwnProperty(g)&&(l[g]=p[g])};e=function(l,p){le(l,p);function g(){this.constructor=l}l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},r=Object.assign||function(l){for(var p,g=1,E=arguments.length;g<E;g++){p=arguments[g];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},s=function(l,p){var g={};for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&p.indexOf(E)<0&&(g[E]=l[E]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(l);d<E.length;d++)p.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(l,E[d])&&(g[E[d]]=l[E[d]]);return g},o=function(l,p,g,E){var d=arguments.length,f=d<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,p,g,E);else for(var H=l.length-1;H>=0;H--)(T=l[H])&&(f=(d<3?T(f):d>3?T(p,g,f):T(p,g))||f);return d>3&&f&&Object.defineProperty(p,g,f),f},u=function(l,p){return function(g,E){p(g,E,l)}},y=function(l,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,p)},w=function(l,p,g,E){function d(f){return f instanceof g?f:new g(function(T){T(f)})}return new(g||(g=Promise))(function(f,T){function H(K){try{S(E.next(K))}catch(te){T(te)}}function G(K){try{S(E.throw(K))}catch(te){T(te)}}function S(K){K.done?f(K.value):d(K.value).then(H,G)}S((E=E.apply(l,p||[])).next())})},x=function(l,p){var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,T;return T={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function H(S){return function(K){return G([S,K])}}function G(S){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,d&&(f=S[0]&2?d.return:S[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,S[1])).done)return f;switch(d=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,d=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(f=g.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){g.label=S[1];break}if(S[0]===6&&g.label<f[1]){g.label=f[1],f=S;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(S);break}f[2]&&g.ops.pop(),g.trys.pop();continue}S=p.call(l,g)}catch(K){S=[6,K],d=0}finally{E=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Q=function(l,p,g,E){E===void 0&&(E=g),l[E]=p[g]},b=function(l,p){for(var g in l)g!=="default"&&!p.hasOwnProperty(g)&&(p[g]=l[g])},O=function(l){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&l[p],E=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&E>=l.length&&(l=void 0),{value:l&&l[E++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(l,p){var g=typeof Symbol=="function"&&l[Symbol.iterator];if(!g)return l;var E=g.call(l),d,f=[],T;try{for(;(p===void 0||p-->0)&&!(d=E.next()).done;)f.push(d.value)}catch(H){T={error:H}}finally{try{d&&!d.done&&(g=E.return)&&g.call(E)}finally{if(T)throw T.error}}return f},B=function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(A(arguments[p]));return l},V=function(){for(var l=0,p=0,g=arguments.length;p<g;p++)l+=arguments[p].length;for(var E=Array(l),d=0,p=0;p<g;p++)for(var f=arguments[p],T=0,H=f.length;T<H;T++,d++)E[d]=f[T];return E},F=function(l){return this instanceof F?(this.v=l,this):new F(l)},oe=function(l,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=g.apply(l,p||[]),d,f=[];return d={},T("next"),T("throw"),T("return"),d[Symbol.asyncIterator]=function(){return this},d;function T(ne){E[ne]&&(d[ne]=function(ye){return new Promise(function(We,we){f.push([ne,ye,We,we])>1||H(ne,ye)})})}function H(ne,ye){try{G(E[ne](ye))}catch(We){te(f[0][3],We)}}function G(ne){ne.value instanceof F?Promise.resolve(ne.value.v).then(S,K):te(f[0][2],ne)}function S(ne){H("next",ne)}function K(ne){H("throw",ne)}function te(ne,ye){ne(ye),f.shift(),f.length&&H(f[0][0],f[0][1])}},re=function(l){var p,g;return p={},E("next"),E("throw",function(d){throw d}),E("return"),p[Symbol.iterator]=function(){return this},p;function E(d,f){p[d]=l[d]?function(T){return(g=!g)?{value:F(l[d](T)),done:d==="return"}:f?f(T):T}:f}},ae=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l[Symbol.asyncIterator],g;return p?p.call(l):(l=typeof O=="function"?O(l):l[Symbol.iterator](),g={},E("next"),E("throw"),E("return"),g[Symbol.asyncIterator]=function(){return this},g);function E(f){g[f]=l[f]&&function(T){return new Promise(function(H,G){T=l[f](T),d(H,G,T.done,T.value)})}}function d(f,T,H,G){Promise.resolve(G).then(function(S){f({value:S,done:H})},T)}},I=function(l,p){return Object.defineProperty?Object.defineProperty(l,"raw",{value:p}):l.raw=p,l},N=function(l){if(l&&l.__esModule)return l;var p={};if(l!=null)for(var g in l)Object.hasOwnProperty.call(l,g)&&(p[g]=l[g]);return p.default=l,p},$=function(l){return l&&l.__esModule?l:{default:l}},D=function(l,p){if(!p.has(l))throw new TypeError("attempted to get private field on non-instance");return p.get(l)},U=function(l,p,g){if(!p.has(l))throw new TypeError("attempted to set private field on non-instance");return p.set(l,g),g},R("__extends",e),R("__assign",r),R("__rest",s),R("__decorate",o),R("__param",u),R("__metadata",y),R("__awaiter",w),R("__generator",x),R("__exportStar",b),R("__createBinding",Q),R("__values",O),R("__read",A),R("__spread",B),R("__spreadArrays",V),R("__await",F),R("__asyncGenerator",oe),R("__asyncDelegator",re),R("__asyncValues",ae),R("__makeTemplateObject",I),R("__importStar",N),R("__importDefault",$),R("__classPrivateFieldGet",D),R("__classPrivateFieldSet",U)})})(Nd);function S1(i){try{return JSON.stringify(i)}catch{return'"[Circular]"'}}var O1=P1;function P1(i,e,r){var s=r&&r.stringify||S1,o=1;if(typeof i=="object"&&i!==null){var u=e.length+o;if(u===1)return i;var y=new Array(u);y[0]=s(i);for(var w=1;w<u;w++)y[w]=s(e[w]);return y.join(" ")}if(typeof i!="string")return i;var x=e.length;if(x===0)return i;for(var b="",O=1-o,A=-1,B=i&&i.length||0,V=0;V<B;){if(i.charCodeAt(V)===37&&V+1<B){switch(A=A>-1?A:0,i.charCodeAt(V+1)){case 100:case 102:if(O>=x||e[O]==null)break;A<V&&(b+=i.slice(A,V)),b+=Number(e[O]),A=V+2,V++;break;case 105:if(O>=x||e[O]==null)break;A<V&&(b+=i.slice(A,V)),b+=Math.floor(Number(e[O])),A=V+2,V++;break;case 79:case 111:case 106:if(O>=x||e[O]===void 0)break;A<V&&(b+=i.slice(A,V));var F=typeof e[O];if(F==="string"){b+="'"+e[O]+"'",A=V+2,V++;break}if(F==="function"){b+=e[O].name||"<anonymous>",A=V+2,V++;break}b+=s(e[O]),A=V+2,V++;break;case 115:if(O>=x)break;A<V&&(b+=i.slice(A,V)),b+=String(e[O]),A=V+2,V++;break;case 37:A<V&&(b+=i.slice(A,V)),b+="%",A=V+2,V++,O--;break}++O}++V}return A===-1?i:(A<B&&(b+=i.slice(A)),b)}const Jf=O1;var x1=tn;const bs=L1().console||{},R1={mapHttpRequest:Uo,mapHttpResponse:Uo,wrapRequestSerializer:jc,wrapResponseSerializer:jc,wrapErrorSerializer:jc,req:Uo,res:Uo,err:$1};function T1(i,e){return Array.isArray(i)?i.filter(function(s){return s!=="!stdSerializers.err"}):i===!0?Object.keys(e):!1}function tn(i){i=i||{},i.browser=i.browser||{};const e=i.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=i.browser.write||bs;i.browser.write&&(i.browser.asObject=!0);const s=i.serializers||{},o=T1(i.browser.serialize,s);let u=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);const y=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),i.enabled===!1&&(i.level="silent");const w=i.level||"info",x=Object.create(r);x.log||(x.log=Es),Object.defineProperty(x,"levelVal",{get:O}),Object.defineProperty(x,"level",{get:A,set:B});const b={transmit:e,serialize:o,asObject:i.browser.asObject,levels:y,timestamp:D1(i)};x.levels=tn.levels,x.level=w,x.setMaxListeners=x.getMaxListeners=x.emit=x.addListener=x.on=x.prependListener=x.once=x.prependOnceListener=x.removeListener=x.removeAllListeners=x.listeners=x.listenerCount=x.eventNames=x.write=x.flush=Es,x.serializers=s,x._serialize=o,x._stdErrSerialize=u,x.child=V,e&&(x._logEvent=Qc());function O(){return this.level==="silent"?1/0:this.levels.values[this.level]}function A(){return this._level}function B(F){if(F!=="silent"&&!this.levels.values[F])throw Error("unknown level "+F);this._level=F,Ti(b,x,"error","log"),Ti(b,x,"fatal","error"),Ti(b,x,"warn","error"),Ti(b,x,"info","log"),Ti(b,x,"debug","log"),Ti(b,x,"trace","log")}function V(F,oe){if(!F)throw new Error("missing bindings for child Pino");oe=oe||{},o&&F.serializers&&(oe.serializers=F.serializers);const re=oe.serializers;if(o&&re){var ae=Object.assign({},s,re),I=i.browser.serialize===!0?Object.keys(ae):o;delete F.serializers,ra([F],I,ae,this._stdErrSerialize)}function N($){this._childLevel=($._childLevel|0)+1,this.error=Ai($,F,"error"),this.fatal=Ai($,F,"fatal"),this.warn=Ai($,F,"warn"),this.info=Ai($,F,"info"),this.debug=Ai($,F,"debug"),this.trace=Ai($,F,"trace"),ae&&(this.serializers=ae,this._serialize=I),e&&(this._logEvent=Qc([].concat($._logEvent.bindings,F)))}return N.prototype=this,new N(this)}return x}tn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};tn.stdSerializers=R1;tn.stdTimeFunctions=Object.assign({},{nullTime:Cd,epochTime:$d,unixTime:j1,isoTime:F1});function Ti(i,e,r,s){const o=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Es:o[r]?o[r]:bs[r]||bs[s]||Es,A1(i,e,r)}function A1(i,e,r){!i.transmit&&e[r]===Es||(e[r]=function(s){return function(){const u=i.timestamp(),y=new Array(arguments.length),w=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bs?bs:this;for(var x=0;x<y.length;x++)y[x]=arguments[x];if(i.serialize&&!i.asObject&&ra(y,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?s.call(w,N1(this,r,y,u)):s.apply(w,y),i.transmit){const b=i.transmit.level||e.level,O=tn.levels.values[b],A=tn.levels.values[r];if(A<O)return;C1(this,{ts:u,methodLevel:r,methodValue:A,transmitLevel:b,transmitValue:tn.levels.values[i.transmit.level||e.level],send:i.transmit.send,val:e.levelVal},y)}}}(e[r]))}function N1(i,e,r,s){i._serialize&&ra(r,i._serialize,i.serializers,i._stdErrSerialize);const o=r.slice();let u=o[0];const y={};s&&(y.time=s),y.level=tn.levels.values[e];let w=(i._childLevel|0)+1;if(w<1&&(w=1),u!==null&&typeof u=="object"){for(;w--&&typeof o[0]=="object";)Object.assign(y,o.shift());u=o.length?Jf(o.shift(),o):void 0}else typeof u=="string"&&(u=Jf(o.shift(),o));return u!==void 0&&(y.msg=u),y}function ra(i,e,r,s){for(const o in i)if(s&&i[o]instanceof Error)i[o]=tn.stdSerializers.err(i[o]);else if(typeof i[o]=="object"&&!Array.isArray(i[o]))for(const u in i[o])e&&e.indexOf(u)>-1&&u in r&&(i[o][u]=r[u](i[o][u]))}function Ai(i,e,r){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var o=1;o<s.length;o++)s[o]=arguments[o-1];return i[r].apply(this,s)}}function C1(i,e,r){const s=e.send,o=e.ts,u=e.methodLevel,y=e.methodValue,w=e.val,x=i._logEvent.bindings;ra(r,i._serialize||Object.keys(i.serializers),i.serializers,i._stdErrSerialize===void 0?!0:i._stdErrSerialize),i._logEvent.ts=o,i._logEvent.messages=r.filter(function(b){return x.indexOf(b)===-1}),i._logEvent.level.label=u,i._logEvent.level.value=y,s(u,i._logEvent,w),i._logEvent=Qc(x)}function Qc(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function $1(i){const e={type:i.constructor.name,msg:i.message,stack:i.stack};for(const r in i)e[r]===void 0&&(e[r]=i[r]);return e}function D1(i){return typeof i.timestamp=="function"?i.timestamp:i.timestamp===!1?Cd:$d}function Uo(){return{}}function jc(i){return i}function Es(){}function Cd(){return!1}function $d(){return Date.now()}function j1(){return Math.round(Date.now()/1e3)}function F1(){return new Date(Date.now()).toISOString()}function L1(){function i(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return i(self)||i(window)||i(this)||{}}}var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.PINO_CUSTOM_CONTEXT_KEY=ri.PINO_LOGGER_DEFAULTS=void 0;ri.PINO_LOGGER_DEFAULTS={level:"info"};ri.PINO_CUSTOM_CONTEXT_KEY="custom_context";var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.generateChildLogger=_r.formatChildLoggerContext=_r.getLoggerContext=_r.setBrowserLoggerContext=_r.getBrowserLoggerContext=_r.getDefaultLoggerOptions=void 0;const Ui=ri;function U1(i){return Object.assign(Object.assign({},i),{level:i?.level||Ui.PINO_LOGGER_DEFAULTS.level})}_r.getDefaultLoggerOptions=U1;function Dd(i,e=Ui.PINO_CUSTOM_CONTEXT_KEY){return i[e]||""}_r.getBrowserLoggerContext=Dd;function jd(i,e,r=Ui.PINO_CUSTOM_CONTEXT_KEY){return i[r]=e,i}_r.setBrowserLoggerContext=jd;function Fd(i,e=Ui.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof i.bindings>"u"?r=Dd(i,e):r=i.bindings().context||"",r}_r.getLoggerContext=Fd;function Ld(i,e,r=Ui.PINO_CUSTOM_CONTEXT_KEY){const s=Fd(i,r);return s.trim()?`${s}/${e}`:e}_r.formatChildLoggerContext=Ld;function M1(i,e,r=Ui.PINO_CUSTOM_CONTEXT_KEY){const s=Ld(i,e,r),o=i.child({context:s});return jd(o,s,r)}_r.generateChildLogger=M1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=Nd.exports,r=e.__importDefault(x1);Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(ri,i),e.__exportStar(_r,i)})(De);class q1 extends ii{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class z1 extends ii{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class B1{constructor(e,r){this.logger=e,this.core=r}}class H1 extends ii{constructor(e,r){super(),this.relayer=e,this.logger=r}}class k1 extends ii{constructor(e){super()}}class V1{constructor(e,r,s,o){this.core=e,this.logger=r,this.name=s}}class K1 extends ii{constructor(e,r){super(),this.relayer=e,this.logger=r}}class W1 extends ii{constructor(e,r){super(),this.core=e,this.logger=r}}class G1{constructor(e,r){this.projectId=e,this.logger=r}}class J1{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class Q1{constructor(e){this.client=e}}const Y1=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),X1=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=i.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Z1(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return X1(i)}catch{return i}}function eb(i){return typeof i=="string"?i:Y1(i)||""}var mu={},Ud={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ow,r=fd;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function w(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return w.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},w.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},w.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},w.prototype.update=function(x,b){if(b===void 0&&(b=x.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var O=0;if(this._bytesHashed+=b,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&b>0;)this._buffer[this._bufferLength++]=x[O++],b--;this._bufferLength===this.blockSize&&(u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(b>=this.blockSize&&(O=u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,x,O,b),b%=this.blockSize);b>0;)this._buffer[this._bufferLength++]=x[O++],b--;return this},w.prototype.finish=function(x){if(!this._finished){var b=this._bytesHashed,O=this._bufferLength,A=b/536870912|0,B=b<<3,V=b%128<112?128:256;this._buffer[O]=128;for(var F=O+1;F<V-8;F++)this._buffer[F]=0;e.writeUint32BE(A,this._buffer,V-8),e.writeUint32BE(B,this._buffer,V-4),u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,V),this._finished=!0}for(var F=0;F<this.digestLength/8;F++)e.writeUint32BE(this._stateHi[F],x,F*8),e.writeUint32BE(this._stateLo[F],x,F*8+4);return this},w.prototype.digest=function(){var x=new Uint8Array(this.digestLength);return this.finish(x),x},w.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},w.prototype.restoreState=function(x){return this._stateHi.set(x.stateHi),this._stateLo.set(x.stateLo),this._bufferLength=x.bufferLength,x.buffer&&this._buffer.set(x.buffer),this._bytesHashed=x.bytesHashed,this._finished=!1,this},w.prototype.cleanSavedState=function(x){r.wipe(x.stateHi),r.wipe(x.stateLo),x.buffer&&r.wipe(x.buffer),x.bufferLength=0,x.bytesHashed=0},w}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function u(w,x,b,O,A,B,V){for(var F=b[0],oe=b[1],re=b[2],ae=b[3],I=b[4],N=b[5],$=b[6],D=b[7],U=O[0],Q=O[1],R=O[2],le=O[3],l=O[4],p=O[5],g=O[6],E=O[7],d,f,T,H,G,S,K,te;V>=128;){for(var ne=0;ne<16;ne++){var ye=8*ne+B;w[ne]=e.readUint32BE(A,ye),x[ne]=e.readUint32BE(A,ye+4)}for(var ne=0;ne<80;ne++){var We=F,we=oe,Ur=re,Y=ae,J=I,k=N,h=$,L=D,de=U,be=Q,Pe=R,Fe=le,Ue=l,Ae=p,Rt=g,It=E;if(d=D,f=E,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=(I>>>14|l<<32-14)^(I>>>18|l<<32-18)^(l>>>41-32|I<<32-(41-32)),f=(l>>>14|I<<32-14)^(l>>>18|I<<32-18)^(I>>>41-32|l<<32-(41-32)),G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,d=I&N^~I&$,f=l&p^~l&g,G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,d=o[ne*2],f=o[ne*2+1],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,d=w[ne%16],f=x[ne%16],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,T=K&65535|te<<16,H=G&65535|S<<16,d=T,f=H,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=(F>>>28|U<<32-28)^(U>>>34-32|F<<32-(34-32))^(U>>>39-32|F<<32-(39-32)),f=(U>>>28|F<<32-28)^(F>>>34-32|U<<32-(34-32))^(F>>>39-32|U<<32-(39-32)),G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,d=F&oe^F&re^oe&re,f=U&Q^U&R^Q&R,G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,L=K&65535|te<<16,It=G&65535|S<<16,d=Y,f=Fe,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=T,f=H,G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,Y=K&65535|te<<16,Fe=G&65535|S<<16,oe=We,re=we,ae=Ur,I=Y,N=J,$=k,D=h,F=L,Q=de,R=be,le=Pe,l=Fe,p=Ue,g=Ae,E=Rt,U=It,ne%16===15)for(var ye=0;ye<16;ye++)d=w[ye],f=x[ye],G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=w[(ye+9)%16],f=x[(ye+9)%16],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,T=w[(ye+1)%16],H=x[(ye+1)%16],d=(T>>>1|H<<32-1)^(T>>>8|H<<32-8)^T>>>7,f=(H>>>1|T<<32-1)^(H>>>8|T<<32-8)^(H>>>7|T<<32-7),G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,T=w[(ye+14)%16],H=x[(ye+14)%16],d=(T>>>19|H<<32-19)^(H>>>61-32|T<<32-(61-32))^T>>>6,f=(H>>>19|T<<32-19)^(T>>>61-32|H<<32-(61-32))^(H>>>6|T<<32-6),G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,w[ye]=K&65535|te<<16,x[ye]=G&65535|S<<16}d=F,f=U,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[0],f=O[0],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[0]=F=K&65535|te<<16,O[0]=U=G&65535|S<<16,d=oe,f=Q,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[1],f=O[1],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[1]=oe=K&65535|te<<16,O[1]=Q=G&65535|S<<16,d=re,f=R,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[2],f=O[2],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[2]=re=K&65535|te<<16,O[2]=R=G&65535|S<<16,d=ae,f=le,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[3],f=O[3],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[3]=ae=K&65535|te<<16,O[3]=le=G&65535|S<<16,d=I,f=l,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[4],f=O[4],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[4]=I=K&65535|te<<16,O[4]=l=G&65535|S<<16,d=N,f=p,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[5],f=O[5],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[5]=N=K&65535|te<<16,O[5]=p=G&65535|S<<16,d=$,f=g,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[6],f=O[6],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[6]=$=K&65535|te<<16,O[6]=g=G&65535|S<<16,d=D,f=E,G=f&65535,S=f>>>16,K=d&65535,te=d>>>16,d=b[7],f=O[7],G+=f&65535,S+=f>>>16,K+=d&65535,te+=d>>>16,S+=G>>>16,K+=S>>>16,te+=K>>>16,b[7]=D=K&65535|te<<16,O[7]=E=G&65535|S<<16,B+=128,V-=128}return B}function y(w){var x=new s;x.update(w);var b=x.digest();return x.clean(),b}i.hash=y})(Ud);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=Xo,r=Ud,s=fd;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(Y){const J=new Float64Array(16);if(Y)for(let k=0;k<Y.length;k++)J[k]=Y[k];return J}const u=new Uint8Array(32);u[0]=9;const y=o(),w=o([1]),x=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),O=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),B=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function V(Y,J){for(let k=0;k<16;k++)Y[k]=J[k]|0}function F(Y){let J=1;for(let k=0;k<16;k++){let h=Y[k]+J+65535;J=Math.floor(h/65536),Y[k]=h-J*65536}Y[0]+=J-1+37*(J-1)}function oe(Y,J,k){const h=~(k-1);for(let L=0;L<16;L++){const de=h&(Y[L]^J[L]);Y[L]^=de,J[L]^=de}}function re(Y,J){const k=o(),h=o();for(let L=0;L<16;L++)h[L]=J[L];F(h),F(h),F(h);for(let L=0;L<2;L++){k[0]=h[0]-65517;for(let be=1;be<15;be++)k[be]=h[be]-65535-(k[be-1]>>16&1),k[be-1]&=65535;k[15]=h[15]-32767-(k[14]>>16&1);const de=k[15]>>16&1;k[14]&=65535,oe(h,k,1-de)}for(let L=0;L<16;L++)Y[2*L]=h[L]&255,Y[2*L+1]=h[L]>>8}function ae(Y,J){let k=0;for(let h=0;h<32;h++)k|=Y[h]^J[h];return(1&k-1>>>8)-1}function I(Y,J){const k=new Uint8Array(32),h=new Uint8Array(32);return re(k,Y),re(h,J),ae(k,h)}function N(Y){const J=new Uint8Array(32);return re(J,Y),J[0]&1}function $(Y,J){for(let k=0;k<16;k++)Y[k]=J[2*k]+(J[2*k+1]<<8);Y[15]&=32767}function D(Y,J,k){for(let h=0;h<16;h++)Y[h]=J[h]+k[h]}function U(Y,J,k){for(let h=0;h<16;h++)Y[h]=J[h]-k[h]}function Q(Y,J,k){let h,L,de=0,be=0,Pe=0,Fe=0,Ue=0,Ae=0,Rt=0,It=0,ft=0,qe=0,rt=0,nt=0,ht=0,ke=0,it=0,Le=0,Ge=0,gt=0,Be=0,Tt=0,Ut=0,Wt=0,Gt=0,zt=0,tr=0,lr=0,Gr=0,rr=0,rn=0,_n=0,zn=0,yt=k[0],at=k[1],mt=k[2],vt=k[3],dt=k[4],ct=k[5],At=k[6],Nt=k[7],_t=k[8],Ct=k[9],wt=k[10],St=k[11],bt=k[12],Ze=k[13],$t=k[14],Dt=k[15];h=J[0],de+=h*yt,be+=h*at,Pe+=h*mt,Fe+=h*vt,Ue+=h*dt,Ae+=h*ct,Rt+=h*At,It+=h*Nt,ft+=h*_t,qe+=h*Ct,rt+=h*wt,nt+=h*St,ht+=h*bt,ke+=h*Ze,it+=h*$t,Le+=h*Dt,h=J[1],be+=h*yt,Pe+=h*at,Fe+=h*mt,Ue+=h*vt,Ae+=h*dt,Rt+=h*ct,It+=h*At,ft+=h*Nt,qe+=h*_t,rt+=h*Ct,nt+=h*wt,ht+=h*St,ke+=h*bt,it+=h*Ze,Le+=h*$t,Ge+=h*Dt,h=J[2],Pe+=h*yt,Fe+=h*at,Ue+=h*mt,Ae+=h*vt,Rt+=h*dt,It+=h*ct,ft+=h*At,qe+=h*Nt,rt+=h*_t,nt+=h*Ct,ht+=h*wt,ke+=h*St,it+=h*bt,Le+=h*Ze,Ge+=h*$t,gt+=h*Dt,h=J[3],Fe+=h*yt,Ue+=h*at,Ae+=h*mt,Rt+=h*vt,It+=h*dt,ft+=h*ct,qe+=h*At,rt+=h*Nt,nt+=h*_t,ht+=h*Ct,ke+=h*wt,it+=h*St,Le+=h*bt,Ge+=h*Ze,gt+=h*$t,Be+=h*Dt,h=J[4],Ue+=h*yt,Ae+=h*at,Rt+=h*mt,It+=h*vt,ft+=h*dt,qe+=h*ct,rt+=h*At,nt+=h*Nt,ht+=h*_t,ke+=h*Ct,it+=h*wt,Le+=h*St,Ge+=h*bt,gt+=h*Ze,Be+=h*$t,Tt+=h*Dt,h=J[5],Ae+=h*yt,Rt+=h*at,It+=h*mt,ft+=h*vt,qe+=h*dt,rt+=h*ct,nt+=h*At,ht+=h*Nt,ke+=h*_t,it+=h*Ct,Le+=h*wt,Ge+=h*St,gt+=h*bt,Be+=h*Ze,Tt+=h*$t,Ut+=h*Dt,h=J[6],Rt+=h*yt,It+=h*at,ft+=h*mt,qe+=h*vt,rt+=h*dt,nt+=h*ct,ht+=h*At,ke+=h*Nt,it+=h*_t,Le+=h*Ct,Ge+=h*wt,gt+=h*St,Be+=h*bt,Tt+=h*Ze,Ut+=h*$t,Wt+=h*Dt,h=J[7],It+=h*yt,ft+=h*at,qe+=h*mt,rt+=h*vt,nt+=h*dt,ht+=h*ct,ke+=h*At,it+=h*Nt,Le+=h*_t,Ge+=h*Ct,gt+=h*wt,Be+=h*St,Tt+=h*bt,Ut+=h*Ze,Wt+=h*$t,Gt+=h*Dt,h=J[8],ft+=h*yt,qe+=h*at,rt+=h*mt,nt+=h*vt,ht+=h*dt,ke+=h*ct,it+=h*At,Le+=h*Nt,Ge+=h*_t,gt+=h*Ct,Be+=h*wt,Tt+=h*St,Ut+=h*bt,Wt+=h*Ze,Gt+=h*$t,zt+=h*Dt,h=J[9],qe+=h*yt,rt+=h*at,nt+=h*mt,ht+=h*vt,ke+=h*dt,it+=h*ct,Le+=h*At,Ge+=h*Nt,gt+=h*_t,Be+=h*Ct,Tt+=h*wt,Ut+=h*St,Wt+=h*bt,Gt+=h*Ze,zt+=h*$t,tr+=h*Dt,h=J[10],rt+=h*yt,nt+=h*at,ht+=h*mt,ke+=h*vt,it+=h*dt,Le+=h*ct,Ge+=h*At,gt+=h*Nt,Be+=h*_t,Tt+=h*Ct,Ut+=h*wt,Wt+=h*St,Gt+=h*bt,zt+=h*Ze,tr+=h*$t,lr+=h*Dt,h=J[11],nt+=h*yt,ht+=h*at,ke+=h*mt,it+=h*vt,Le+=h*dt,Ge+=h*ct,gt+=h*At,Be+=h*Nt,Tt+=h*_t,Ut+=h*Ct,Wt+=h*wt,Gt+=h*St,zt+=h*bt,tr+=h*Ze,lr+=h*$t,Gr+=h*Dt,h=J[12],ht+=h*yt,ke+=h*at,it+=h*mt,Le+=h*vt,Ge+=h*dt,gt+=h*ct,Be+=h*At,Tt+=h*Nt,Ut+=h*_t,Wt+=h*Ct,Gt+=h*wt,zt+=h*St,tr+=h*bt,lr+=h*Ze,Gr+=h*$t,rr+=h*Dt,h=J[13],ke+=h*yt,it+=h*at,Le+=h*mt,Ge+=h*vt,gt+=h*dt,Be+=h*ct,Tt+=h*At,Ut+=h*Nt,Wt+=h*_t,Gt+=h*Ct,zt+=h*wt,tr+=h*St,lr+=h*bt,Gr+=h*Ze,rr+=h*$t,rn+=h*Dt,h=J[14],it+=h*yt,Le+=h*at,Ge+=h*mt,gt+=h*vt,Be+=h*dt,Tt+=h*ct,Ut+=h*At,Wt+=h*Nt,Gt+=h*_t,zt+=h*Ct,tr+=h*wt,lr+=h*St,Gr+=h*bt,rr+=h*Ze,rn+=h*$t,_n+=h*Dt,h=J[15],Le+=h*yt,Ge+=h*at,gt+=h*mt,Be+=h*vt,Tt+=h*dt,Ut+=h*ct,Wt+=h*At,Gt+=h*Nt,zt+=h*_t,tr+=h*Ct,lr+=h*wt,Gr+=h*St,rr+=h*bt,rn+=h*Ze,_n+=h*$t,zn+=h*Dt,de+=38*Ge,be+=38*gt,Pe+=38*Be,Fe+=38*Tt,Ue+=38*Ut,Ae+=38*Wt,Rt+=38*Gt,It+=38*zt,ft+=38*tr,qe+=38*lr,rt+=38*Gr,nt+=38*rr,ht+=38*rn,ke+=38*_n,it+=38*zn,L=1,h=de+L+65535,L=Math.floor(h/65536),de=h-L*65536,h=be+L+65535,L=Math.floor(h/65536),be=h-L*65536,h=Pe+L+65535,L=Math.floor(h/65536),Pe=h-L*65536,h=Fe+L+65535,L=Math.floor(h/65536),Fe=h-L*65536,h=Ue+L+65535,L=Math.floor(h/65536),Ue=h-L*65536,h=Ae+L+65535,L=Math.floor(h/65536),Ae=h-L*65536,h=Rt+L+65535,L=Math.floor(h/65536),Rt=h-L*65536,h=It+L+65535,L=Math.floor(h/65536),It=h-L*65536,h=ft+L+65535,L=Math.floor(h/65536),ft=h-L*65536,h=qe+L+65535,L=Math.floor(h/65536),qe=h-L*65536,h=rt+L+65535,L=Math.floor(h/65536),rt=h-L*65536,h=nt+L+65535,L=Math.floor(h/65536),nt=h-L*65536,h=ht+L+65535,L=Math.floor(h/65536),ht=h-L*65536,h=ke+L+65535,L=Math.floor(h/65536),ke=h-L*65536,h=it+L+65535,L=Math.floor(h/65536),it=h-L*65536,h=Le+L+65535,L=Math.floor(h/65536),Le=h-L*65536,de+=L-1+37*(L-1),L=1,h=de+L+65535,L=Math.floor(h/65536),de=h-L*65536,h=be+L+65535,L=Math.floor(h/65536),be=h-L*65536,h=Pe+L+65535,L=Math.floor(h/65536),Pe=h-L*65536,h=Fe+L+65535,L=Math.floor(h/65536),Fe=h-L*65536,h=Ue+L+65535,L=Math.floor(h/65536),Ue=h-L*65536,h=Ae+L+65535,L=Math.floor(h/65536),Ae=h-L*65536,h=Rt+L+65535,L=Math.floor(h/65536),Rt=h-L*65536,h=It+L+65535,L=Math.floor(h/65536),It=h-L*65536,h=ft+L+65535,L=Math.floor(h/65536),ft=h-L*65536,h=qe+L+65535,L=Math.floor(h/65536),qe=h-L*65536,h=rt+L+65535,L=Math.floor(h/65536),rt=h-L*65536,h=nt+L+65535,L=Math.floor(h/65536),nt=h-L*65536,h=ht+L+65535,L=Math.floor(h/65536),ht=h-L*65536,h=ke+L+65535,L=Math.floor(h/65536),ke=h-L*65536,h=it+L+65535,L=Math.floor(h/65536),it=h-L*65536,h=Le+L+65535,L=Math.floor(h/65536),Le=h-L*65536,de+=L-1+37*(L-1),Y[0]=de,Y[1]=be,Y[2]=Pe,Y[3]=Fe,Y[4]=Ue,Y[5]=Ae,Y[6]=Rt,Y[7]=It,Y[8]=ft,Y[9]=qe,Y[10]=rt,Y[11]=nt,Y[12]=ht,Y[13]=ke,Y[14]=it,Y[15]=Le}function R(Y,J){Q(Y,J,J)}function le(Y,J){const k=o();let h;for(h=0;h<16;h++)k[h]=J[h];for(h=253;h>=0;h--)R(k,k),h!==2&&h!==4&&Q(k,k,J);for(h=0;h<16;h++)Y[h]=k[h]}function l(Y,J){const k=o();let h;for(h=0;h<16;h++)k[h]=J[h];for(h=250;h>=0;h--)R(k,k),h!==1&&Q(k,k,J);for(h=0;h<16;h++)Y[h]=k[h]}function p(Y,J){const k=o(),h=o(),L=o(),de=o(),be=o(),Pe=o(),Fe=o(),Ue=o(),Ae=o();U(k,Y[1],Y[0]),U(Ae,J[1],J[0]),Q(k,k,Ae),D(h,Y[0],Y[1]),D(Ae,J[0],J[1]),Q(h,h,Ae),Q(L,Y[3],J[3]),Q(L,L,b),Q(de,Y[2],J[2]),D(de,de,de),U(be,h,k),U(Pe,de,L),D(Fe,de,L),D(Ue,h,k),Q(Y[0],be,Pe),Q(Y[1],Ue,Fe),Q(Y[2],Fe,Pe),Q(Y[3],be,Ue)}function g(Y,J,k){for(let h=0;h<4;h++)oe(Y[h],J[h],k)}function E(Y,J){const k=o(),h=o(),L=o();le(L,J[2]),Q(k,J[0],L),Q(h,J[1],L),re(Y,h),Y[31]^=N(k)<<7}function d(Y,J,k){V(Y[0],y),V(Y[1],w),V(Y[2],w),V(Y[3],y);for(let h=255;h>=0;--h){const L=k[h/8|0]>>(h&7)&1;g(Y,J,L),p(J,Y),p(Y,Y),g(Y,J,L)}}function f(Y,J){const k=[o(),o(),o(),o()];V(k[0],O),V(k[1],A),V(k[2],w),Q(k[3],O,A),d(Y,k,J)}function T(Y){if(Y.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const J=(0,r.hash)(Y);J[0]&=248,J[31]&=127,J[31]|=64;const k=new Uint8Array(32),h=[o(),o(),o(),o()];f(h,J),E(k,h);const L=new Uint8Array(64);return L.set(Y),L.set(k,32),{publicKey:k,secretKey:L}}i.generateKeyPairFromSeed=T;function H(Y){const J=(0,e.randomBytes)(32,Y),k=T(J);return(0,s.wipe)(J),k}i.generateKeyPair=H;function G(Y){if(Y.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Y.subarray(32))}i.extractPublicKeyFromSecretKey=G;const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(Y,J){let k,h,L,de;for(h=63;h>=32;--h){for(k=0,L=h-32,de=h-12;L<de;++L)J[L]+=k-16*J[h]*S[L-(h-32)],k=Math.floor((J[L]+128)/256),J[L]-=k*256;J[L]+=k,J[h]=0}for(k=0,L=0;L<32;L++)J[L]+=k-(J[31]>>4)*S[L],k=J[L]>>8,J[L]&=255;for(L=0;L<32;L++)J[L]-=k*S[L];for(h=0;h<32;h++)J[h+1]+=J[h]>>8,Y[h]=J[h]&255}function te(Y){const J=new Float64Array(64);for(let k=0;k<64;k++)J[k]=Y[k];for(let k=0;k<64;k++)Y[k]=0;K(Y,J)}function ne(Y,J){const k=new Float64Array(64),h=[o(),o(),o(),o()],L=(0,r.hash)(Y.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const de=new Uint8Array(64);de.set(L.subarray(32),32);const be=new r.SHA512;be.update(de.subarray(32)),be.update(J);const Pe=be.digest();be.clean(),te(Pe),f(h,Pe),E(de,h),be.reset(),be.update(de.subarray(0,32)),be.update(Y.subarray(32)),be.update(J);const Fe=be.digest();te(Fe);for(let Ue=0;Ue<32;Ue++)k[Ue]=Pe[Ue];for(let Ue=0;Ue<32;Ue++)for(let Ae=0;Ae<32;Ae++)k[Ue+Ae]+=Fe[Ue]*L[Ae];return K(de.subarray(32),k),de}i.sign=ne;function ye(Y,J){const k=o(),h=o(),L=o(),de=o(),be=o(),Pe=o(),Fe=o();return V(Y[2],w),$(Y[1],J),R(L,Y[1]),Q(de,L,x),U(L,L,Y[2]),D(de,Y[2],de),R(be,de),R(Pe,be),Q(Fe,Pe,be),Q(k,Fe,L),Q(k,k,de),l(k,k),Q(k,k,L),Q(k,k,de),Q(k,k,de),Q(Y[0],k,de),R(h,Y[0]),Q(h,h,de),I(h,L)&&Q(Y[0],Y[0],B),R(h,Y[0]),Q(h,h,de),I(h,L)?-1:(N(Y[0])===J[31]>>7&&U(Y[0],y,Y[0]),Q(Y[3],Y[0],Y[1]),0)}function We(Y,J,k){const h=new Uint8Array(32),L=[o(),o(),o(),o()],de=[o(),o(),o(),o()];if(k.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ye(de,Y))return!1;const be=new r.SHA512;be.update(k.subarray(0,32)),be.update(Y),be.update(J);const Pe=be.digest();return te(Pe),d(L,de,Pe),f(de,k.subarray(32)),p(L,de),E(h,L),!ae(k,h)}i.verify=We;function we(Y){let J=[o(),o(),o(),o()];if(ye(J,Y))throw new Error("Ed25519: invalid public key");let k=o(),h=o(),L=J[1];D(k,w,L),U(h,w,L),le(h,h),Q(k,k,h);let de=new Uint8Array(32);return re(de,k),de}i.convertPublicKeyToX25519=we;function Ur(Y){const J=(0,r.hash)(Y.subarray(0,32));J[0]&=248,J[31]&=127,J[31]|=64;const k=new Uint8Array(J.subarray(0,32));return(0,s.wipe)(J),k}i.convertSecretKeyToX25519=Ur})(mu);const tb="EdDSA",rb="JWT",Md=".",qd="base64url",nb="utf8",ib="utf8",sb=":",ob="did",ab="key",Qf="base58btc",cb="z",ub="K36",lb=32,fb=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r);function hb(i){return typeof i=="string"?i:fb(i)||""}function Go(i){return ur(wr(hb(i),nb),qd)}function zd(i){const e=wr(ub,Qf),r=cb+ur(Wc([e,i]),Qf);return[ob,ab,r].join(sb)}function db(i){return ur(i,qd)}function pb(i){return wr([Go(i.header),Go(i.payload)].join(Md),ib)}function gb(i){return[Go(i.header),Go(i.payload),db(i.signature)].join(Md)}function Yf(i=Xo.randomBytes(lb)){return mu.generateKeyPairFromSeed(i)}async function yb(i,e,r,s,o=ge.fromMiliseconds(Date.now())){const u={alg:tb,typ:rb},y=zd(s.publicKey),w=o+r,x={iss:y,sub:i,aud:e,iat:o,exp:w},b=pb({header:u,payload:x}),O=mu.sign(s.secretKey,b);return gb({header:u,payload:x,signature:O})}var Xf=globalThis&&globalThis.__spreadArray||function(i,e,r){if(r||arguments.length===2)for(var s=0,o=e.length,u;s<o;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return i.concat(u||Array.prototype.slice.call(e))},mb=function(){function i(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return i}(),vb=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),_b=function(){function i(e,r,s,o){this.name=e,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return i}(),wb=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),bb=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Eb=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ib=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Zf=3,Sb=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Eb]],eh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ob(i){return i?th(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bb:typeof navigator<"u"?th(navigator.userAgent):Rb()}function Pb(i){return i!==""&&Sb.reduce(function(e,r){var s=r[0],o=r[1];if(e)return e;var u=o.exec(i);return!!u&&[s,u]},!1)}function th(i){var e=Pb(i);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new wb;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Zf&&(o=Xf(Xf([],o,!0),Tb(Zf-o.length),!0)):o=[];var u=o.join("."),y=xb(i),w=Ib.exec(i);return w&&w[1]?new _b(r,u,y,w[1]):new mb(r,u,y)}function xb(i){for(var e=0,r=eh.length;e<r;e++){var s=eh[e],o=s[0],u=s[1],y=u.exec(i);if(y)return o}return null}function Rb(){var i=typeof process<"u"&&process.version;return i?new vb(process.version.slice(1)):null}function Tb(i){for(var e=[],r=0;r<i;r++)e.push("0");return e}var et={};Object.defineProperty(et,"__esModule",{value:!0});et.getLocalStorage=et.getLocalStorageOrThrow=et.getCrypto=et.getCryptoOrThrow=Hd=et.getLocation=et.getLocationOrThrow=vu=et.getNavigator=et.getNavigatorOrThrow=Bd=et.getDocument=et.getDocumentOrThrow=et.getFromWindowOrThrow=et.getFromWindow=void 0;function si(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}et.getFromWindow=si;function Mi(i){const e=si(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}et.getFromWindowOrThrow=Mi;function Ab(){return Mi("document")}et.getDocumentOrThrow=Ab;function Nb(){return si("document")}var Bd=et.getDocument=Nb;function Cb(){return Mi("navigator")}et.getNavigatorOrThrow=Cb;function $b(){return si("navigator")}var vu=et.getNavigator=$b;function Db(){return Mi("location")}et.getLocationOrThrow=Db;function jb(){return si("location")}var Hd=et.getLocation=jb;function Fb(){return Mi("crypto")}et.getCryptoOrThrow=Fb;function Lb(){return si("crypto")}et.getCrypto=Lb;function Ub(){return Mi("localStorage")}et.getLocalStorageOrThrow=Ub;function Mb(){return si("localStorage")}et.getLocalStorage=Mb;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});var kd=_u.getWindowMetadata=void 0;const rh=et;function qb(){let i,e;try{i=rh.getDocumentOrThrow(),e=rh.getLocationOrThrow()}catch{return null}function r(){const A=i.getElementsByTagName("link"),B=[];for(let V=0;V<A.length;V++){const F=A[V],oe=F.getAttribute("rel");if(oe&&oe.toLowerCase().indexOf("icon")>-1){const re=F.getAttribute("href");if(re)if(re.toLowerCase().indexOf("https:")===-1&&re.toLowerCase().indexOf("http:")===-1&&re.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(re.indexOf("/")===0)ae+=re;else{const I=e.pathname.split("/");I.pop(),ae+=I.join("/")+"/"+re}B.push(ae)}else if(re.indexOf("//")===0){const ae=e.protocol+re;B.push(ae)}else B.push(re)}}return B}function s(...A){const B=i.getElementsByTagName("meta");for(let V=0;V<B.length;V++){const F=B[V],oe=["itemprop","property","name"].map(re=>F.getAttribute(re)).filter(re=>re?A.includes(re):!1);if(oe.length&&oe){const re=F.getAttribute("content");if(re)return re}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=i.title),A}function u(){return s("description","og:description","twitter:description","keywords")}const y=o(),w=u(),x=e.origin,b=r();return{description:w,url:x,icons:b,name:y}}kd=_u.getWindowMetadata=qb;var Is={},zb=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Vd="%[a-f0-9]{2}",nh=new RegExp("("+Vd+")|([^%]+?)","gi"),ih=new RegExp("("+Vd+")+","gi");function Yc(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var r=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],Yc(r),Yc(s))}function Bb(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(nh)||[],r=1;r<e.length;r++)i=Yc(e,r).join(""),e=i.match(nh)||[];return i}}function Hb(i){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=ih.exec(i);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=Bb(r[0]);s!==r[0]&&(e[r[0]]=s)}r=ih.exec(i)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),u=0;u<o.length;u++){var y=o[u];i=i.replace(new RegExp(y,"g"),e[y])}return i}var kb=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return Hb(i)}};(function(i){const e=zb,r=kb,s=hd,o=dd,u=I=>I==null,y=Symbol("encodeFragmentIdentifier");function w(I){switch(I.arrayFormat){case"index":return N=>($,D)=>{const U=$.length;return D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),"[",U,"]"].join("")]:[...$,[O(N,I),"[",O(U,I),"]=",O(D,I)].join("")]};case"bracket":return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),"[]"].join("")]:[...$,[O(N,I),"[]=",O(D,I)].join("")];case"colon-list-separator":return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),":list="].join("")]:[...$,[O(N,I),":list=",O(D,I)].join("")];case"comma":case"separator":case"bracket-separator":{const N=I.arrayFormat==="bracket-separator"?"[]=":"=";return $=>(D,U)=>U===void 0||I.skipNull&&U===null||I.skipEmptyString&&U===""?D:(U=U===null?"":U,D.length===0?[[O($,I),N,O(U,I)].join("")]:[[D,O(U,I)].join(I.arrayFormatSeparator)])}default:return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,O(N,I)]:[...$,[O(N,I),"=",O(D,I)].join("")]}}function x(I){let N;switch(I.arrayFormat){case"index":return($,D,U)=>{if(N=/\[(\d*)\]$/.exec($),$=$.replace(/\[\d*\]$/,""),!N){U[$]=D;return}U[$]===void 0&&(U[$]={}),U[$][N[1]]=D};case"bracket":return($,D,U)=>{if(N=/(\[\])$/.exec($),$=$.replace(/\[\]$/,""),!N){U[$]=D;return}if(U[$]===void 0){U[$]=[D];return}U[$]=[].concat(U[$],D)};case"colon-list-separator":return($,D,U)=>{if(N=/(:list)$/.exec($),$=$.replace(/:list$/,""),!N){U[$]=D;return}if(U[$]===void 0){U[$]=[D];return}U[$]=[].concat(U[$],D)};case"comma":case"separator":return($,D,U)=>{const Q=typeof D=="string"&&D.includes(I.arrayFormatSeparator),R=typeof D=="string"&&!Q&&A(D,I).includes(I.arrayFormatSeparator);D=R?A(D,I):D;const le=Q||R?D.split(I.arrayFormatSeparator).map(l=>A(l,I)):D===null?D:A(D,I);U[$]=le};case"bracket-separator":return($,D,U)=>{const Q=/(\[\])$/.test($);if($=$.replace(/\[\]$/,""),!Q){U[$]=D&&A(D,I);return}const R=D===null?[]:D.split(I.arrayFormatSeparator).map(le=>A(le,I));if(U[$]===void 0){U[$]=R;return}U[$]=[].concat(U[$],R)};default:return($,D,U)=>{if(U[$]===void 0){U[$]=D;return}U[$]=[].concat(U[$],D)}}}function b(I){if(typeof I!="string"||I.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function O(I,N){return N.encode?N.strict?e(I):encodeURIComponent(I):I}function A(I,N){return N.decode?r(I):I}function B(I){return Array.isArray(I)?I.sort():typeof I=="object"?B(Object.keys(I)).sort((N,$)=>Number(N)-Number($)).map(N=>I[N]):I}function V(I){const N=I.indexOf("#");return N!==-1&&(I=I.slice(0,N)),I}function F(I){let N="";const $=I.indexOf("#");return $!==-1&&(N=I.slice($)),N}function oe(I){I=V(I);const N=I.indexOf("?");return N===-1?"":I.slice(N+1)}function re(I,N){return N.parseNumbers&&!Number.isNaN(Number(I))&&typeof I=="string"&&I.trim()!==""?I=Number(I):N.parseBooleans&&I!==null&&(I.toLowerCase()==="true"||I.toLowerCase()==="false")&&(I=I.toLowerCase()==="true"),I}function ae(I,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),b(N.arrayFormatSeparator);const $=x(N),D=Object.create(null);if(typeof I!="string"||(I=I.trim().replace(/^[?#&]/,""),!I))return D;for(const U of I.split("&")){if(U==="")continue;let[Q,R]=s(N.decode?U.replace(/\+/g," "):U,"=");R=R===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?R:A(R,N),$(A(Q,N),R,D)}for(const U of Object.keys(D)){const Q=D[U];if(typeof Q=="object"&&Q!==null)for(const R of Object.keys(Q))Q[R]=re(Q[R],N);else D[U]=re(Q,N)}return N.sort===!1?D:(N.sort===!0?Object.keys(D).sort():Object.keys(D).sort(N.sort)).reduce((U,Q)=>{const R=D[Q];return Boolean(R)&&typeof R=="object"&&!Array.isArray(R)?U[Q]=B(R):U[Q]=R,U},Object.create(null))}i.extract=oe,i.parse=ae,i.stringify=(I,N)=>{if(!I)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),b(N.arrayFormatSeparator);const $=R=>N.skipNull&&u(I[R])||N.skipEmptyString&&I[R]==="",D=w(N),U={};for(const R of Object.keys(I))$(R)||(U[R]=I[R]);const Q=Object.keys(U);return N.sort!==!1&&Q.sort(N.sort),Q.map(R=>{const le=I[R];return le===void 0?"":le===null?O(R,N):Array.isArray(le)?le.length===0&&N.arrayFormat==="bracket-separator"?O(R,N)+"[]":le.reduce(D(R),[]).join("&"):O(R,N)+"="+O(le,N)}).filter(R=>R.length>0).join("&")},i.parseUrl=(I,N)=>{N=Object.assign({decode:!0},N);const[$,D]=s(I,"#");return Object.assign({url:$.split("?")[0]||"",query:ae(oe(I),N)},N&&N.parseFragmentIdentifier&&D?{fragmentIdentifier:A(D,N)}:{})},i.stringifyUrl=(I,N)=>{N=Object.assign({encode:!0,strict:!0,[y]:!0},N);const $=V(I.url).split("?")[0]||"",D=i.extract(I.url),U=i.parse(D,{sort:!1}),Q=Object.assign(U,I.query);let R=i.stringify(Q,N);R&&(R=`?${R}`);let le=F(I.url);return I.fragmentIdentifier&&(le=`#${N[y]?O(I.fragmentIdentifier,N):I.fragmentIdentifier}`),`${$}${R}${le}`},i.pick=(I,N,$)=>{$=Object.assign({parseFragmentIdentifier:!0,[y]:!1},$);const{url:D,query:U,fragmentIdentifier:Q}=i.parseUrl(I,$);return i.stringifyUrl({url:D,query:o(U,N),fragmentIdentifier:Q},$)},i.exclude=(I,N,$)=>{const D=Array.isArray(N)?U=>!N.includes(U):(U,Q)=>!N(U,Q);return i.pick(I,D,$)}})(Is);function Kd(i,e){return i.includes(":")?[i]:e.chains||[]}const Wd="base10",cr="base16",Xc="base64pad",wu="utf8",Gd=0,oi=1,Vb=0,sh=1,Zc=12,bu=32;function Kb(){const i=pd.generateKeyPair();return{privateKey:ur(i.secretKey,cr),publicKey:ur(i.publicKey,cr)}}function eu(){const i=Xo.randomBytes(bu);return ur(i,cr)}function Wb(i,e){const r=pd.sharedKey(wr(i,cr),wr(e,cr),!0),s=new Pw(fu.SHA256,r).expand(bu);return ur(s,cr)}function Gb(i){const e=fu.hash(wr(i,cr));return ur(e,cr)}function Di(i){const e=fu.hash(wr(i,wu));return ur(e,cr)}function Jb(i){return wr(`${i}`,Wd)}function xs(i){return Number(ur(i,Wd))}function Qb(i){const e=Jb(typeof i.type<"u"?i.type:Gd);if(xs(e)===oi&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof i.senderPublicKey<"u"?wr(i.senderPublicKey,cr):void 0,s=typeof i.iv<"u"?wr(i.iv,cr):Xo.randomBytes(Zc),o=new gd.ChaCha20Poly1305(wr(i.symKey,cr)).seal(s,wr(i.message,wu));return Xb({type:e,sealed:o,iv:s,senderPublicKey:r})}function Yb(i){const e=new gd.ChaCha20Poly1305(wr(i.symKey,cr)),{sealed:r,iv:s}=Jo(i.encoded),o=e.open(s,r);if(o===null)throw new Error("Failed to decrypt");return ur(o,wu)}function Xb(i){if(xs(i.type)===oi){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(Wc([i.type,i.senderPublicKey,i.iv,i.sealed]),Xc)}return ur(Wc([i.type,i.iv,i.sealed]),Xc)}function Jo(i){const e=wr(i,Xc),r=e.slice(Vb,sh),s=sh;if(xs(r)===oi){const w=s+bu,x=w+Zc,b=e.slice(s,w),O=e.slice(w,x),A=e.slice(x);return{type:r,sealed:A,iv:O,senderPublicKey:b}}const o=s+Zc,u=e.slice(s,o),y=e.slice(o);return{type:r,sealed:y,iv:u}}function Zb(i,e){const r=Jo(i);return Jd({type:xs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ur(r.senderPublicKey,cr):void 0,receiverPublicKey:e?.receiverPublicKey})}function Jd(i){const e=i?.type||Gd;if(e===oi){if(typeof i?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof i?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i?.senderPublicKey,receiverPublicKey:i?.receiverPublicKey}}function oh(i){return i.type===oi&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var eE=Object.defineProperty,ah=Object.getOwnPropertySymbols,tE=Object.prototype.hasOwnProperty,rE=Object.prototype.propertyIsEnumerable,ch=(i,e,r)=>e in i?eE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,uh=(i,e)=>{for(var r in e||(e={}))tE.call(e,r)&&ch(i,r,e[r]);if(ah)for(var r of ah(e))rE.call(e,r)&&ch(i,r,e[r]);return i};const nE="ReactNative",xr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},iE="js";function Eu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function qi(){return!Bd()&&!!vu()&&navigator.product===nE}function zi(){return!Eu()&&!!vu()}function Rs(){return qi()?xr.reactNative:Eu()?xr.node:zi()?xr.browser:xr.unknown}function sE(){var i;try{return qi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(i=global.Application)==null?void 0:i.applicationId:void 0}catch{return}}function oE(i,e){let r=Is.parse(i);return r=uh(uh({},r),e),i=Is.stringify(r),i}function aE(){return kd()||{name:"",description:"",url:"",icons:[""]}}function cE(){if(Rs()===xr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const i=Ob();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function uE(){var i;const e=Rs();return e===xr.browser?[e,((i=Hd())==null?void 0:i.host)||"unknown"].join(":"):e}function lE(i,e,r){const s=cE(),o=uE();return[[i,e].join("-"),[iE,r].join("-"),s,o].join("/")}function fE({protocol:i,version:e,relayUrl:r,sdkVersion:s,auth:o,projectId:u,useOnCloseEvent:y,bundleId:w}){const x=r.split("?"),b=lE(i,e,s),O={auth:o,ua:b,projectId:u,useOnCloseEvent:y||void 0,origin:w||void 0},A=oE(x[1]||"",O);return x[0]+"?"+A}function ti(i,e){return i.filter(r=>e.includes(r)).length===i.length}function Qd(i){return Object.fromEntries(i.entries())}function Yd(i){return new Map(Object.entries(i))}function Ni(i=ge.FIVE_MINUTES,e){const r=ge.toMiliseconds(i||ge.FIVE_MINUTES);let s,o,u;return{resolve:y=>{u&&s&&(clearTimeout(u),s(y))},reject:y=>{u&&o&&(clearTimeout(u),o(y))},done:()=>new Promise((y,w)=>{u=setTimeout(()=>{w(new Error(e))},r),s=y,o=w})}}function Ss(i,e,r){return new Promise(async(s,o)=>{const u=setTimeout(()=>o(new Error(r)),e);try{const y=await i;s(y)}catch(y){o(y)}clearTimeout(u)})}function Xd(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function hE(i){return Xd("topic",i)}function dE(i){return Xd("id",i)}function Zd(i){const[e,r]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function Kr(i,e){return ge.fromMiliseconds((e||Date.now())+ge.toMiliseconds(i))}function An(i){return Date.now()>=ge.toMiliseconds(i)}function Lt(i,e){return`${i}${e?`:${e}`:""}`}async function pE({id:i,topic:e,wcDeepLink:r}){try{if(!r)return;let o=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const u=`${o}/wc?requestId=${i}&sessionTopic=${e}`,y=Rs();y===xr.browser?u.startsWith("https://")?window.open(u,"_blank","noreferrer noopener"):window.open(u,"_self","noreferrer noopener"):y===xr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(u)}catch(s){console.error(s)}}async function gE(i,e){try{return await i.getItem(e)||(zi()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const yE="irn";function tu(i){return i?.relay||{protocol:yE}}function Ko(i){const e=Rw[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var mE=Object.defineProperty,lh=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,_E=Object.prototype.propertyIsEnumerable,fh=(i,e,r)=>e in i?mE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,wE=(i,e)=>{for(var r in e||(e={}))vE.call(e,r)&&fh(i,r,e[r]);if(lh)for(var r of lh(e))_E.call(e,r)&&fh(i,r,e[r]);return i};function bE(i,e="-"){const r={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const u=o.replace(s,""),y=i[o];r[u]=y}}),r}function hh(i){i=i.includes("wc://")?i.replace("wc://",""):i,i=i.includes("wc:")?i.replace("wc:",""):i;const e=i.indexOf(":"),r=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,r).split("@"),u=typeof r<"u"?i.substring(r):"",y=Is.parse(u);return{protocol:s,topic:EE(o[0]),version:parseInt(o[1],10),symKey:y.symKey,relay:bE(y)}}function EE(i){return i.startsWith("//")?i.substring(2):i}function IE(i,e="-"){const r="relay",s={};return Object.keys(i).forEach(o=>{const u=r+e+o;i[o]&&(s[u]=i[o])}),s}function SE(i){return`${i.protocol}:${i.topic}@${i.version}?`+Is.stringify(wE({symKey:i.symKey},IE(i.relay)))}function Bi(i){const e=[];return i.forEach(r=>{const[s,o]=r.split(":");e.push(`${s}:${o}`)}),e}function OE(i){const e=[];return Object.values(i).forEach(r=>{e.push(...Bi(r.accounts))}),e}function PE(i,e){const r=[];return Object.values(i).forEach(s=>{Bi(s.accounts).includes(e)&&r.push(...s.methods)}),r}function xE(i,e){const r=[];return Object.values(i).forEach(s=>{Bi(s.accounts).includes(e)&&r.push(...s.events)}),r}function RE(i,e){const r=Wo(i,e);if(r)throw new Error(r.message);const s={};for(const[o,u]of Object.entries(i))s[o]={methods:u.methods,events:u.events,chains:u.accounts.map(y=>`${y.split(":")[0]}:${y.split(":")[1]}`)};return s}const TE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},AE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(i,e){const{message:r,code:s}=AE[i];return{message:e?`${r} ${e}`:r,code:s}}function Vt(i,e){const{message:r,code:s}=TE[i];return{message:e?`${r} ${e}`:r,code:s}}function Ts(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function ms(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ar(i){return typeof i>"u"}function Kt(i,e){return e&&ar(i)?!0:typeof i=="string"&&!!i.trim().length}function Iu(i,e){return e&&ar(i)?!0:typeof i=="number"&&!isNaN(i)}function NE(i,e){const{requiredNamespaces:r}=e,s=Object.keys(i.namespaces),o=Object.keys(r);let u=!0;return ti(o,s)?(s.forEach(y=>{const{accounts:w,methods:x,events:b}=i.namespaces[y],O=Bi(w),A=r[y];(!ti(Kd(y,A),O)||!ti(A.methods,x)||!ti(A.events,b))&&(u=!1)}),u):!1}function Qo(i){return Kt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function CE(i){if(Kt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Qo(r)}}return!1}function $E(i){if(Kt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function DE(i){var e;return(e=i?.proposer)==null?void 0:e.publicKey}function jE(i){return i?.topic}function FE(i,e){let r=null;return Kt(i?.publicKey,!1)||(r=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function dh(i){let e=!0;return Ts(i)?i.length&&(e=i.every(r=>Kt(r,!1))):e=!1,e}function LE(i,e,r){let s=null;return Ts(e)&&e.length?e.forEach(o=>{s||Qo(o)||(s=Vt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Qo(i)||(s=Vt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function UE(i,e,r){let s=null;return Object.entries(i).forEach(([o,u])=>{if(s)return;const y=LE(o,Kd(o,u),`${e} ${r}`);y&&(s=y)}),s}function ME(i,e){let r=null;return Ts(i)?i.forEach(s=>{r||CE(s)||(r=Vt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Vt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function qE(i,e){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=ME(s?.accounts,`${e} namespace`);o&&(r=o)}),r}function zE(i,e){let r=null;return dh(i?.methods)?dh(i?.events)||(r=Vt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Vt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function ep(i,e){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=zE(s,`${e}, namespace`);o&&(r=o)}),r}function BE(i,e,r){let s=null;if(i&&ms(i)){const o=ep(i,e);o&&(s=o);const u=UE(i,e,r);u&&(s=u)}else s=ce("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Wo(i,e){let r=null;if(i&&ms(i)){const s=ep(i,e);s&&(r=s);const o=qE(i,e);o&&(r=o)}else r=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function tp(i){return Kt(i.protocol,!0)}function HE(i,e){let r=!1;return e&&!i?r=!0:i&&Ts(i)&&i.length&&i.forEach(s=>{r=tp(s)}),r}function kE(i){return typeof i=="number"}function vr(i){return typeof i<"u"&&typeof i!==null}function VE(i){return!(!i||typeof i!="object"||!i.code||!Iu(i.code,!1)||!i.message||!Kt(i.message,!1))}function KE(i){return!(ar(i)||!Kt(i.method,!1))}function WE(i){return!(ar(i)||ar(i.result)&&ar(i.error)||!Iu(i.id,!1)||!Kt(i.jsonrpc,!1))}function GE(i){return!(ar(i)||!Kt(i.name,!1))}function ph(i,e){return!(!Qo(e)||!OE(i).includes(e))}function JE(i,e,r){return Kt(r,!1)?PE(i,e).includes(r):!1}function QE(i,e,r){return Kt(r,!1)?xE(i,e).includes(r):!1}function gh(i,e,r){let s=null;const o=YE(i),u=XE(e),y=Object.keys(o),w=Object.keys(u),x=yh(Object.keys(i)),b=yh(Object.keys(e)),O=x.filter(A=>!b.includes(A));return O.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${O.toString()}
      Received: ${Object.keys(e).toString()}`)),ti(y,w)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${y.toString()}
      Approved: ${w.toString()}`)),Object.keys(e).forEach(A=>{if(!A.includes(":")||s)return;const B=Bi(e[A].accounts);B.includes(A)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${A}
        Required: ${A}
        Approved: ${B.toString()}`))}),y.forEach(A=>{s||(ti(o[A].methods,u[A].methods)?ti(o[A].events,u[A].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${A}`)):s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${A}`))}),s}function YE(i){const e={};return Object.keys(i).forEach(r=>{var s;r.includes(":")?e[r]=i[r]:(s=i[r].chains)==null||s.forEach(o=>{e[o]={methods:i[r].methods,events:i[r].events}})}),e}function yh(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function XE(i){const e={};return Object.keys(i).forEach(r=>{r.includes(":")?e[r]=i[r]:Bi(i[r].accounts)?.forEach(o=>{e[o]={accounts:i[r].accounts.filter(u=>u.includes(`${o}:`)),methods:i[r].methods,events:i[r].events}})}),e}function ZE(i,e){return Iu(i,!1)&&i<=e.max&&i>=e.min}function mh(){const i=Rs();return new Promise(e=>{switch(i){case xr.browser:e(eI());break;case xr.reactNative:e(tI());break;case xr.node:e(rI());break;default:e(!0)}})}function eI(){return zi()&&navigator?.onLine}async function tI(){return qi()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function rI(){return!0}function nI(i){switch(Rs()){case xr.browser:iI(i);break;case xr.reactNative:sI(i);break}}function iI(i){!qi()&&zi()&&(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)))}function sI(i){qi()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>i(e?.isConnected))}const Fc={};class Mo{static get(e){return Fc[e]}static set(e,r){Fc[e]=r}static delete(e){delete Fc[e]}}const oI="PARSE_ERROR",aI="INVALID_REQUEST",cI="METHOD_NOT_FOUND",uI="INVALID_PARAMS",rp="INTERNAL_ERROR",Su="SERVER_ERROR",lI=[-32700,-32600,-32601,-32602,-32603],vs={[oI]:{code:-32700,message:"Parse error"},[aI]:{code:-32600,message:"Invalid Request"},[cI]:{code:-32601,message:"Method not found"},[uI]:{code:-32602,message:"Invalid params"},[rp]:{code:-32603,message:"Internal error"},[Su]:{code:-32e3,message:"Server error"}},np=Su;function fI(i){return lI.includes(i)}function vh(i){return Object.keys(vs).includes(i)?vs[i]:vs[np]}function hI(i){const e=Object.values(vs).find(r=>r.code===i);return e||vs[np]}var dI={},ip={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,u,y,w,x,b,O,A,B,V,F,oe,re,ae,I,N,$,D,U,Q;(function(R){var le=typeof je=="object"?je:typeof self=="object"?self:typeof this=="object"?this:{};R(l(le,l(i.exports)));function l(p,g){return p!==le&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(E,d){return p[E]=g?g(E,d):d}}})(function(R){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)p.hasOwnProperty(g)&&(l[g]=p[g])};e=function(l,p){le(l,p);function g(){this.constructor=l}l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},r=Object.assign||function(l){for(var p,g=1,E=arguments.length;g<E;g++){p=arguments[g];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},s=function(l,p){var g={};for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&p.indexOf(E)<0&&(g[E]=l[E]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(l);d<E.length;d++)p.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(l,E[d])&&(g[E[d]]=l[E[d]]);return g},o=function(l,p,g,E){var d=arguments.length,f=d<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,p,g,E);else for(var H=l.length-1;H>=0;H--)(T=l[H])&&(f=(d<3?T(f):d>3?T(p,g,f):T(p,g))||f);return d>3&&f&&Object.defineProperty(p,g,f),f},u=function(l,p){return function(g,E){p(g,E,l)}},y=function(l,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,p)},w=function(l,p,g,E){function d(f){return f instanceof g?f:new g(function(T){T(f)})}return new(g||(g=Promise))(function(f,T){function H(K){try{S(E.next(K))}catch(te){T(te)}}function G(K){try{S(E.throw(K))}catch(te){T(te)}}function S(K){K.done?f(K.value):d(K.value).then(H,G)}S((E=E.apply(l,p||[])).next())})},x=function(l,p){var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,T;return T={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function H(S){return function(K){return G([S,K])}}function G(S){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,d&&(f=S[0]&2?d.return:S[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,S[1])).done)return f;switch(d=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,d=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(f=g.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){g.label=S[1];break}if(S[0]===6&&g.label<f[1]){g.label=f[1],f=S;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(S);break}f[2]&&g.ops.pop(),g.trys.pop();continue}S=p.call(l,g)}catch(K){S=[6,K],d=0}finally{E=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Q=function(l,p,g,E){E===void 0&&(E=g),l[E]=p[g]},b=function(l,p){for(var g in l)g!=="default"&&!p.hasOwnProperty(g)&&(p[g]=l[g])},O=function(l){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&l[p],E=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&E>=l.length&&(l=void 0),{value:l&&l[E++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(l,p){var g=typeof Symbol=="function"&&l[Symbol.iterator];if(!g)return l;var E=g.call(l),d,f=[],T;try{for(;(p===void 0||p-->0)&&!(d=E.next()).done;)f.push(d.value)}catch(H){T={error:H}}finally{try{d&&!d.done&&(g=E.return)&&g.call(E)}finally{if(T)throw T.error}}return f},B=function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(A(arguments[p]));return l},V=function(){for(var l=0,p=0,g=arguments.length;p<g;p++)l+=arguments[p].length;for(var E=Array(l),d=0,p=0;p<g;p++)for(var f=arguments[p],T=0,H=f.length;T<H;T++,d++)E[d]=f[T];return E},F=function(l){return this instanceof F?(this.v=l,this):new F(l)},oe=function(l,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=g.apply(l,p||[]),d,f=[];return d={},T("next"),T("throw"),T("return"),d[Symbol.asyncIterator]=function(){return this},d;function T(ne){E[ne]&&(d[ne]=function(ye){return new Promise(function(We,we){f.push([ne,ye,We,we])>1||H(ne,ye)})})}function H(ne,ye){try{G(E[ne](ye))}catch(We){te(f[0][3],We)}}function G(ne){ne.value instanceof F?Promise.resolve(ne.value.v).then(S,K):te(f[0][2],ne)}function S(ne){H("next",ne)}function K(ne){H("throw",ne)}function te(ne,ye){ne(ye),f.shift(),f.length&&H(f[0][0],f[0][1])}},re=function(l){var p,g;return p={},E("next"),E("throw",function(d){throw d}),E("return"),p[Symbol.iterator]=function(){return this},p;function E(d,f){p[d]=l[d]?function(T){return(g=!g)?{value:F(l[d](T)),done:d==="return"}:f?f(T):T}:f}},ae=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l[Symbol.asyncIterator],g;return p?p.call(l):(l=typeof O=="function"?O(l):l[Symbol.iterator](),g={},E("next"),E("throw"),E("return"),g[Symbol.asyncIterator]=function(){return this},g);function E(f){g[f]=l[f]&&function(T){return new Promise(function(H,G){T=l[f](T),d(H,G,T.done,T.value)})}}function d(f,T,H,G){Promise.resolve(G).then(function(S){f({value:S,done:H})},T)}},I=function(l,p){return Object.defineProperty?Object.defineProperty(l,"raw",{value:p}):l.raw=p,l},N=function(l){if(l&&l.__esModule)return l;var p={};if(l!=null)for(var g in l)Object.hasOwnProperty.call(l,g)&&(p[g]=l[g]);return p.default=l,p},$=function(l){return l&&l.__esModule?l:{default:l}},D=function(l,p){if(!p.has(l))throw new TypeError("attempted to get private field on non-instance");return p.get(l)},U=function(l,p,g){if(!p.has(l))throw new TypeError("attempted to set private field on non-instance");return p.set(l,g),g},R("__extends",e),R("__assign",r),R("__rest",s),R("__decorate",o),R("__param",u),R("__metadata",y),R("__awaiter",w),R("__generator",x),R("__exportStar",b),R("__createBinding",Q),R("__values",O),R("__read",A),R("__spread",B),R("__spreadArrays",V),R("__await",F),R("__asyncGenerator",oe),R("__asyncDelegator",re),R("__asyncValues",ae),R("__makeTemplateObject",I),R("__importStar",N),R("__importDefault",$),R("__classPrivateFieldGet",D),R("__classPrivateFieldSet",U)})})(ip);var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.isBrowserCryptoAvailable=Nn.getSubtleCrypto=Nn.getBrowerCrypto=void 0;function Ou(){return(je===null||je===void 0?void 0:je.crypto)||(je===null||je===void 0?void 0:je.msCrypto)||{}}Nn.getBrowerCrypto=Ou;function sp(){const i=Ou();return i.subtle||i.webkitSubtle}Nn.getSubtleCrypto=sp;function pI(){return!!Ou()&&!!sp()}Nn.isBrowserCryptoAvailable=pI;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.isBrowser=Cn.isNode=Cn.isReactNative=void 0;function op(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Cn.isReactNative=op;function ap(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Cn.isNode=ap;function gI(){return!op()&&!ap()}Cn.isBrowser=gI;(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ip.exports;e.__exportStar(Nn,i),e.__exportStar(Cn,i)})(dI);function Pu(i=3){const e=Date.now()*Math.pow(10,i),r=Math.floor(Math.random()*Math.pow(10,i));return e+r}function cp(i=6){return BigInt(Pu(i))}function ji(i,e,r){return{id:r||Pu(),jsonrpc:"2.0",method:i,params:e}}function xu(i,e){return{id:i,jsonrpc:"2.0",result:e}}function up(i,e,r){return{id:i,jsonrpc:"2.0",error:yI(e,r)}}function yI(i,e){return typeof i>"u"?vh(rp):(typeof i=="string"&&(i=Object.assign(Object.assign({},vh(Su)),{message:i})),typeof e<"u"&&(i.data=e),fI(i.code)&&(i=hI(i.code)),i)}class mI{}class vI extends mI{constructor(){super()}}class _I extends vI{constructor(e){super()}}function lp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Ru(i){return lp(i)&&"method"in i}function na(i){return lp(i)&&(mn(i)||Wr(i))}function mn(i){return"result"in i}function Wr(i){return"error"in i}class wI extends _I{constructor(e){super(e),this.events=new er.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(ji(e.method,e.params||[],e.id||cp().toString()),r)}async requestStrict(e,r){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(u){o(u)}this.events.on(`${e.id}`,u=>{Wr(u)?o(u.error):s(u.result)});try{await this.connection.send(e,r)}catch(u){o(u)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),na(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const bI=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),EI=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=i.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function II(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return EI(i)}catch{return i}}function SI(i){return typeof i=="string"?i:bI(i)||""}const OI="PARSE_ERROR",PI="INVALID_REQUEST",xI="METHOD_NOT_FOUND",RI="INVALID_PARAMS",fp="INTERNAL_ERROR",Tu="SERVER_ERROR",TI=[-32700,-32600,-32601,-32602,-32603],_s={[OI]:{code:-32700,message:"Parse error"},[PI]:{code:-32600,message:"Invalid Request"},[xI]:{code:-32601,message:"Method not found"},[RI]:{code:-32602,message:"Invalid params"},[fp]:{code:-32603,message:"Internal error"},[Tu]:{code:-32e3,message:"Server error"}},hp=Tu;function AI(i){return TI.includes(i)}function _h(i){return Object.keys(_s).includes(i)?_s[i]:_s[hp]}function NI(i){const e=Object.values(_s).find(r=>r.code===i);return e||_s[hp]}function CI(i,e,r){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):i}var dp={},pp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,u,y,w,x,b,O,A,B,V,F,oe,re,ae,I,N,$,D,U,Q;(function(R){var le=typeof je=="object"?je:typeof self=="object"?self:typeof this=="object"?this:{};R(l(le,l(i.exports)));function l(p,g){return p!==le&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(E,d){return p[E]=g?g(E,d):d}}})(function(R){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)p.hasOwnProperty(g)&&(l[g]=p[g])};e=function(l,p){le(l,p);function g(){this.constructor=l}l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},r=Object.assign||function(l){for(var p,g=1,E=arguments.length;g<E;g++){p=arguments[g];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},s=function(l,p){var g={};for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&p.indexOf(E)<0&&(g[E]=l[E]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(l);d<E.length;d++)p.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(l,E[d])&&(g[E[d]]=l[E[d]]);return g},o=function(l,p,g,E){var d=arguments.length,f=d<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,p,g,E);else for(var H=l.length-1;H>=0;H--)(T=l[H])&&(f=(d<3?T(f):d>3?T(p,g,f):T(p,g))||f);return d>3&&f&&Object.defineProperty(p,g,f),f},u=function(l,p){return function(g,E){p(g,E,l)}},y=function(l,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,p)},w=function(l,p,g,E){function d(f){return f instanceof g?f:new g(function(T){T(f)})}return new(g||(g=Promise))(function(f,T){function H(K){try{S(E.next(K))}catch(te){T(te)}}function G(K){try{S(E.throw(K))}catch(te){T(te)}}function S(K){K.done?f(K.value):d(K.value).then(H,G)}S((E=E.apply(l,p||[])).next())})},x=function(l,p){var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,T;return T={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function H(S){return function(K){return G([S,K])}}function G(S){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,d&&(f=S[0]&2?d.return:S[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,S[1])).done)return f;switch(d=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,d=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(f=g.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){g.label=S[1];break}if(S[0]===6&&g.label<f[1]){g.label=f[1],f=S;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(S);break}f[2]&&g.ops.pop(),g.trys.pop();continue}S=p.call(l,g)}catch(K){S=[6,K],d=0}finally{E=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Q=function(l,p,g,E){E===void 0&&(E=g),l[E]=p[g]},b=function(l,p){for(var g in l)g!=="default"&&!p.hasOwnProperty(g)&&(p[g]=l[g])},O=function(l){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&l[p],E=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&E>=l.length&&(l=void 0),{value:l&&l[E++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(l,p){var g=typeof Symbol=="function"&&l[Symbol.iterator];if(!g)return l;var E=g.call(l),d,f=[],T;try{for(;(p===void 0||p-->0)&&!(d=E.next()).done;)f.push(d.value)}catch(H){T={error:H}}finally{try{d&&!d.done&&(g=E.return)&&g.call(E)}finally{if(T)throw T.error}}return f},B=function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(A(arguments[p]));return l},V=function(){for(var l=0,p=0,g=arguments.length;p<g;p++)l+=arguments[p].length;for(var E=Array(l),d=0,p=0;p<g;p++)for(var f=arguments[p],T=0,H=f.length;T<H;T++,d++)E[d]=f[T];return E},F=function(l){return this instanceof F?(this.v=l,this):new F(l)},oe=function(l,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=g.apply(l,p||[]),d,f=[];return d={},T("next"),T("throw"),T("return"),d[Symbol.asyncIterator]=function(){return this},d;function T(ne){E[ne]&&(d[ne]=function(ye){return new Promise(function(We,we){f.push([ne,ye,We,we])>1||H(ne,ye)})})}function H(ne,ye){try{G(E[ne](ye))}catch(We){te(f[0][3],We)}}function G(ne){ne.value instanceof F?Promise.resolve(ne.value.v).then(S,K):te(f[0][2],ne)}function S(ne){H("next",ne)}function K(ne){H("throw",ne)}function te(ne,ye){ne(ye),f.shift(),f.length&&H(f[0][0],f[0][1])}},re=function(l){var p,g;return p={},E("next"),E("throw",function(d){throw d}),E("return"),p[Symbol.iterator]=function(){return this},p;function E(d,f){p[d]=l[d]?function(T){return(g=!g)?{value:F(l[d](T)),done:d==="return"}:f?f(T):T}:f}},ae=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l[Symbol.asyncIterator],g;return p?p.call(l):(l=typeof O=="function"?O(l):l[Symbol.iterator](),g={},E("next"),E("throw"),E("return"),g[Symbol.asyncIterator]=function(){return this},g);function E(f){g[f]=l[f]&&function(T){return new Promise(function(H,G){T=l[f](T),d(H,G,T.done,T.value)})}}function d(f,T,H,G){Promise.resolve(G).then(function(S){f({value:S,done:H})},T)}},I=function(l,p){return Object.defineProperty?Object.defineProperty(l,"raw",{value:p}):l.raw=p,l},N=function(l){if(l&&l.__esModule)return l;var p={};if(l!=null)for(var g in l)Object.hasOwnProperty.call(l,g)&&(p[g]=l[g]);return p.default=l,p},$=function(l){return l&&l.__esModule?l:{default:l}},D=function(l,p){if(!p.has(l))throw new TypeError("attempted to get private field on non-instance");return p.get(l)},U=function(l,p,g){if(!p.has(l))throw new TypeError("attempted to set private field on non-instance");return p.set(l,g),g},R("__extends",e),R("__assign",r),R("__rest",s),R("__decorate",o),R("__param",u),R("__metadata",y),R("__awaiter",w),R("__generator",x),R("__exportStar",b),R("__createBinding",Q),R("__values",O),R("__read",A),R("__spread",B),R("__spreadArrays",V),R("__await",F),R("__asyncGenerator",oe),R("__asyncDelegator",re),R("__asyncValues",ae),R("__makeTemplateObject",I),R("__importStar",N),R("__importDefault",$),R("__classPrivateFieldGet",D),R("__classPrivateFieldSet",U)})})(pp);var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.isBrowserCryptoAvailable=$n.getSubtleCrypto=$n.getBrowerCrypto=void 0;function Au(){return(je===null||je===void 0?void 0:je.crypto)||(je===null||je===void 0?void 0:je.msCrypto)||{}}$n.getBrowerCrypto=Au;function gp(){const i=Au();return i.subtle||i.webkitSubtle}$n.getSubtleCrypto=gp;function $I(){return!!Au()&&!!gp()}$n.isBrowserCryptoAvailable=$I;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.isBrowser=Dn.isNode=Dn.isReactNative=void 0;function yp(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Dn.isReactNative=yp;function mp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Dn.isNode=mp;function DI(){return!yp()&&!mp()}Dn.isBrowser=DI;(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=pp.exports;e.__exportStar($n,i),e.__exportStar(Dn,i)})(dp);function jI(i,e,r){return{id:i,jsonrpc:"2.0",error:FI(e,r)}}function FI(i,e){return typeof i>"u"?_h(fp):(typeof i=="string"&&(i=Object.assign(Object.assign({},_h(Tu)),{message:i})),typeof e<"u"&&(i.data=e),AI(i.code)&&(i=NI(i.code)),i)}const LI="^wss?:";function UI(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function MI(i,e){const r=UI(i);return typeof r>"u"?!1:new RegExp(e).test(r)}function wh(i){return MI(i,LI)}function qI(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}const zI=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),BI=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",bh=i=>i.split("?")[0],Eh=10,HI=zI();class kI{constructor(e){if(this.url=e,this.events=new er.exports.EventEmitter,this.registering=!1,!wh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(SI(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!wh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const o=new URLSearchParams(e).get("origin"),u=dp.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!qI(e)},y=new HI(e,[],u);BI()?y.onerror=w=>{const x=w;s(this.emitError(x.error))}:y.on("error",w=>{s(this.emitError(w))}),y.onopen=()=>{this.onOpen(y),r(y)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?II(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),u=jI(e,o);this.events.emit("payload",u)}parseError(e,r=this.url){return CI(e,bh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Eh&&this.events.setMaxListeners(Eh)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${bh(this.url)}`));return this.events.emit("register_error",r),r}}var ru={exports:{}};(function(i,e){var r=200,s="__lodash_hash_undefined__",o=1,u=2,y=9007199254740991,w="[object Arguments]",x="[object Array]",b="[object AsyncFunction]",O="[object Boolean]",A="[object Date]",B="[object Error]",V="[object Function]",F="[object GeneratorFunction]",oe="[object Map]",re="[object Number]",ae="[object Null]",I="[object Object]",N="[object Promise]",$="[object Proxy]",D="[object RegExp]",U="[object Set]",Q="[object String]",R="[object Symbol]",le="[object Undefined]",l="[object WeakMap]",p="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",d="[object Float64Array]",f="[object Int8Array]",T="[object Int16Array]",H="[object Int32Array]",G="[object Uint8Array]",S="[object Uint8ClampedArray]",K="[object Uint16Array]",te="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,ye=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,we={};we[E]=we[d]=we[f]=we[T]=we[H]=we[G]=we[S]=we[K]=we[te]=!0,we[w]=we[x]=we[p]=we[O]=we[g]=we[A]=we[B]=we[V]=we[oe]=we[re]=we[I]=we[D]=we[U]=we[Q]=we[l]=!1;var Ur=typeof je=="object"&&je&&je.Object===Object&&je,Y=typeof self=="object"&&self&&self.Object===Object&&self,J=Ur||Y||Function("return this")(),k=e&&!e.nodeType&&e,h=k&&!0&&i&&!i.nodeType&&i,L=h&&h.exports===k,de=L&&Ur.process,be=function(){try{return de&&de.binding&&de.binding("util")}catch{}}(),Pe=be&&be.isTypedArray;function Fe(P,M){for(var ie=-1,fe=P==null?0:P.length,Qe=0,Ie=[];++ie<fe;){var st=P[ie];M(st,ie,P)&&(Ie[Qe++]=st)}return Ie}function Ue(P,M){for(var ie=-1,fe=M.length,Qe=P.length;++ie<fe;)P[Qe+ie]=M[ie];return P}function Ae(P,M){for(var ie=-1,fe=P==null?0:P.length;++ie<fe;)if(M(P[ie],ie,P))return!0;return!1}function Rt(P,M){for(var ie=-1,fe=Array(P);++ie<P;)fe[ie]=M(ie);return fe}function It(P){return function(M){return P(M)}}function ft(P,M){return P.has(M)}function qe(P,M){return P?.[M]}function rt(P){var M=-1,ie=Array(P.size);return P.forEach(function(fe,Qe){ie[++M]=[Qe,fe]}),ie}function nt(P,M){return function(ie){return P(M(ie))}}function ht(P){var M=-1,ie=Array(P.size);return P.forEach(function(fe){ie[++M]=fe}),ie}var ke=Array.prototype,it=Function.prototype,Le=Object.prototype,Ge=J["__core-js_shared__"],gt=it.toString,Be=Le.hasOwnProperty,Tt=function(){var P=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),Ut=Le.toString,Wt=RegExp("^"+gt.call(Be).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=L?J.Buffer:void 0,zt=J.Symbol,tr=J.Uint8Array,lr=Le.propertyIsEnumerable,Gr=ke.splice,rr=zt?zt.toStringTag:void 0,rn=Object.getOwnPropertySymbols,_n=Gt?Gt.isBuffer:void 0,zn=nt(Object.keys,Object),yt=br(J,"DataView"),at=br(J,"Map"),mt=br(J,"Promise"),vt=br(J,"Set"),dt=br(J,"WeakMap"),ct=br(Object,"create"),At=sn(yt),Nt=sn(at),_t=sn(mt),Ct=sn(vt),wt=sn(dt),St=zt?zt.prototype:void 0,bt=St?St.valueOf:void 0;function Ze(P){var M=-1,ie=P==null?0:P.length;for(this.clear();++M<ie;){var fe=P[M];this.set(fe[0],fe[1])}}function $t(){this.__data__=ct?ct(null):{},this.size=0}function Dt(P){var M=this.has(P)&&delete this.__data__[P];return this.size-=M?1:0,M}function oa(P){var M=this.__data__;if(ct){var ie=M[P];return ie===s?void 0:ie}return Be.call(M,P)?M[P]:void 0}function aa(P){var M=this.__data__;return ct?M[P]!==void 0:Be.call(M,P)}function ca(P,M){var ie=this.__data__;return this.size+=this.has(P)?0:1,ie[P]=ct&&M===void 0?s:M,this}Ze.prototype.clear=$t,Ze.prototype.delete=Dt,Ze.prototype.get=oa,Ze.prototype.has=aa,Ze.prototype.set=ca;function Rr(P){var M=-1,ie=P==null?0:P.length;for(this.clear();++M<ie;){var fe=P[M];this.set(fe[0],fe[1])}}function ua(){this.__data__=[],this.size=0}function la(P){var M=this.__data__,ie=Bn(M,P);if(ie<0)return!1;var fe=M.length-1;return ie==fe?M.pop():Gr.call(M,ie,1),--this.size,!0}function fa(P){var M=this.__data__,ie=Bn(M,P);return ie<0?void 0:M[ie][1]}function ha(P){return Bn(this.__data__,P)>-1}function da(P,M){var ie=this.__data__,fe=Bn(ie,P);return fe<0?(++this.size,ie.push([P,M])):ie[fe][1]=M,this}Rr.prototype.clear=ua,Rr.prototype.delete=la,Rr.prototype.get=fa,Rr.prototype.has=ha,Rr.prototype.set=da;function nn(P){var M=-1,ie=P==null?0:P.length;for(this.clear();++M<ie;){var fe=P[M];this.set(fe[0],fe[1])}}function ui(){this.size=0,this.__data__={hash:new Ze,map:new(at||Rr),string:new Ze}}function pa(P){var M=wn(this,P).delete(P);return this.size-=M?1:0,M}function li(P){return wn(this,P).get(P)}function ga(P){return wn(this,P).has(P)}function ya(P,M){var ie=wn(this,P),fe=ie.size;return ie.set(P,M),this.size+=ie.size==fe?0:1,this}nn.prototype.clear=ui,nn.prototype.delete=pa,nn.prototype.get=li,nn.prototype.has=ga,nn.prototype.set=ya;function fi(P){var M=-1,ie=P==null?0:P.length;for(this.__data__=new nn;++M<ie;)this.add(P[M])}function Ns(P){return this.__data__.set(P,s),this}function Cs(P){return this.__data__.has(P)}fi.prototype.add=fi.prototype.push=Ns,fi.prototype.has=Cs;function Mr(P){var M=this.__data__=new Rr(P);this.size=M.size}function ma(){this.__data__=new Rr,this.size=0}function va(P){var M=this.__data__,ie=M.delete(P);return this.size=M.size,ie}function _a(P){return this.__data__.get(P)}function wa(P){return this.__data__.has(P)}function $s(P,M){var ie=this.__data__;if(ie instanceof Rr){var fe=ie.__data__;if(!at||fe.length<r-1)return fe.push([P,M]),this.size=++ie.size,this;ie=this.__data__=new nn(fe)}return ie.set(P,M),this.size=ie.size,this}Mr.prototype.clear=ma,Mr.prototype.delete=va,Mr.prototype.get=_a,Mr.prototype.has=wa,Mr.prototype.set=$s;function Ds(P,M){var ie=pi(P),fe=!ie&&Ks(P),Qe=!ie&&!fe&&Ki(P),Ie=!ie&&!fe&&!Qe&&Js(P),st=ie||fe||Qe||Ie,jt=st?Rt(P.length,String):[],Ce=jt.length;for(var Ye in P)(M||Be.call(P,Ye))&&!(st&&(Ye=="length"||Qe&&(Ye=="offset"||Ye=="parent")||Ie&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||zs(Ye,Ce)))&&jt.push(Ye);return jt}function Bn(P,M){for(var ie=P.length;ie--;)if(Vs(P[ie][0],M))return ie;return-1}function ki(P,M,ie){var fe=M(P);return pi(P)?fe:Ue(fe,ie(P))}function Hn(P){return P==null?P===void 0?le:ae:rr&&rr in Object(P)?Ms(P):Ia(P)}function Vi(P){return Vn(P)&&Hn(P)==w}function kn(P,M,ie,fe,Qe){return P===M?!0:P==null||M==null||!Vn(P)&&!Vn(M)?P!==P&&M!==M:js(P,M,ie,fe,kn,Qe)}function js(P,M,ie,fe,Qe,Ie){var st=pi(P),jt=pi(M),Ce=st?x:Jr(P),Ye=jt?x:Jr(M);Ce=Ce==w?I:Ce,Ye=Ye==w?I:Ye;var Ot=Ce==I,fr=Ye==I,Ft=Ce==Ye;if(Ft&&Ki(P)){if(!Ki(M))return!1;st=!0,Ot=!1}if(Ft&&!Ot)return Ie||(Ie=new Mr),st||Js(P)?hi(P,M,ie,fe,Qe,Ie):Ea(P,M,Ce,ie,fe,Qe,Ie);if(!(ie&o)){var ot=Ot&&Be.call(P,"__wrapped__"),nr=fr&&Be.call(M,"__wrapped__");if(ot||nr){var qr=ot?P.value():P,Tr=nr?M.value():M;return Ie||(Ie=new Mr),Qe(qr,Tr,ie,fe,Ie)}}return Ft?(Ie||(Ie=new Mr),Us(P,M,ie,fe,Qe,Ie)):!1}function ba(P){if(!Gs(P)||Hs(P))return!1;var M=gi(P)?Wt:ye;return M.test(sn(P))}function Fs(P){return Vn(P)&&Ws(P.length)&&!!we[Hn(P)]}function Ls(P){if(!ks(P))return zn(P);var M=[];for(var ie in Object(P))Be.call(P,ie)&&ie!="constructor"&&M.push(ie);return M}function hi(P,M,ie,fe,Qe,Ie){var st=ie&o,jt=P.length,Ce=M.length;if(jt!=Ce&&!(st&&Ce>jt))return!1;var Ye=Ie.get(P);if(Ye&&Ie.get(M))return Ye==M;var Ot=-1,fr=!0,Ft=ie&u?new fi:void 0;for(Ie.set(P,M),Ie.set(M,P);++Ot<jt;){var ot=P[Ot],nr=M[Ot];if(fe)var qr=st?fe(nr,ot,Ot,M,P,Ie):fe(ot,nr,Ot,P,M,Ie);if(qr!==void 0){if(qr)continue;fr=!1;break}if(Ft){if(!Ae(M,function(Tr,Qr){if(!ft(Ft,Qr)&&(ot===Tr||Qe(ot,Tr,ie,fe,Ie)))return Ft.push(Qr)})){fr=!1;break}}else if(!(ot===nr||Qe(ot,nr,ie,fe,Ie))){fr=!1;break}}return Ie.delete(P),Ie.delete(M),fr}function Ea(P,M,ie,fe,Qe,Ie,st){switch(ie){case g:if(P.byteLength!=M.byteLength||P.byteOffset!=M.byteOffset)return!1;P=P.buffer,M=M.buffer;case p:return!(P.byteLength!=M.byteLength||!Ie(new tr(P),new tr(M)));case O:case A:case re:return Vs(+P,+M);case B:return P.name==M.name&&P.message==M.message;case D:case Q:return P==M+"";case oe:var jt=rt;case U:var Ce=fe&o;if(jt||(jt=ht),P.size!=M.size&&!Ce)return!1;var Ye=st.get(P);if(Ye)return Ye==M;fe|=u,st.set(P,M);var Ot=hi(jt(P),jt(M),fe,Qe,Ie,st);return st.delete(P),Ot;case R:if(bt)return bt.call(P)==bt.call(M)}return!1}function Us(P,M,ie,fe,Qe,Ie){var st=ie&o,jt=di(P),Ce=jt.length,Ye=di(M),Ot=Ye.length;if(Ce!=Ot&&!st)return!1;for(var fr=Ce;fr--;){var Ft=jt[fr];if(!(st?Ft in M:Be.call(M,Ft)))return!1}var ot=Ie.get(P);if(ot&&Ie.get(M))return ot==M;var nr=!0;Ie.set(P,M),Ie.set(M,P);for(var qr=st;++fr<Ce;){Ft=jt[fr];var Tr=P[Ft],Qr=M[Ft];if(fe)var Wi=st?fe(Qr,Tr,Ft,M,P,Ie):fe(Tr,Qr,Ft,P,M,Ie);if(!(Wi===void 0?Tr===Qr||Qe(Tr,Qr,ie,fe,Ie):Wi)){nr=!1;break}qr||(qr=Ft=="constructor")}if(nr&&!qr){var Kn=P.constructor,Bt=M.constructor;Kn!=Bt&&"constructor"in P&&"constructor"in M&&!(typeof Kn=="function"&&Kn instanceof Kn&&typeof Bt=="function"&&Bt instanceof Bt)&&(nr=!1)}return Ie.delete(P),Ie.delete(M),nr}function di(P){return ki(P,Pa,qs)}function wn(P,M){var ie=P.__data__;return Bs(M)?ie[typeof M=="string"?"string":"hash"]:ie.map}function br(P,M){var ie=qe(P,M);return ba(ie)?ie:void 0}function Ms(P){var M=Be.call(P,rr),ie=P[rr];try{P[rr]=void 0;var fe=!0}catch{}var Qe=Ut.call(P);return fe&&(M?P[rr]=ie:delete P[rr]),Qe}var qs=rn?function(P){return P==null?[]:(P=Object(P),Fe(rn(P),function(M){return lr.call(P,M)}))}:Je,Jr=Hn;(yt&&Jr(new yt(new ArrayBuffer(1)))!=g||at&&Jr(new at)!=oe||mt&&Jr(mt.resolve())!=N||vt&&Jr(new vt)!=U||dt&&Jr(new dt)!=l)&&(Jr=function(P){var M=Hn(P),ie=M==I?P.constructor:void 0,fe=ie?sn(ie):"";if(fe)switch(fe){case At:return g;case Nt:return oe;case _t:return N;case Ct:return U;case wt:return l}return M});function zs(P,M){return M=M??y,!!M&&(typeof P=="number"||We.test(P))&&P>-1&&P%1==0&&P<M}function Bs(P){var M=typeof P;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?P!=="__proto__":P===null}function Hs(P){return!!Tt&&Tt in P}function ks(P){var M=P&&P.constructor,ie=typeof M=="function"&&M.prototype||Le;return P===ie}function Ia(P){return Ut.call(P)}function sn(P){if(P!=null){try{return gt.call(P)}catch{}try{return P+""}catch{}}return""}function Vs(P,M){return P===M||P!==P&&M!==M}var Ks=Vi(function(){return arguments}())?Vi:function(P){return Vn(P)&&Be.call(P,"callee")&&!lr.call(P,"callee")},pi=Array.isArray;function Sa(P){return P!=null&&Ws(P.length)&&!gi(P)}var Ki=_n||Ve;function Oa(P,M){return kn(P,M)}function gi(P){if(!Gs(P))return!1;var M=Hn(P);return M==V||M==F||M==b||M==$}function Ws(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=y}function Gs(P){var M=typeof P;return P!=null&&(M=="object"||M=="function")}function Vn(P){return P!=null&&typeof P=="object"}var Js=Pe?It(Pe):Fs;function Pa(P){return Sa(P)?Ds(P):Ls(P)}function Je(){return[]}function Ve(){return!1}i.exports=Oa})(ru,ru.exports);var VI=ru.exports;function KI(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var u=i.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var w=i.length,x=i.charAt(0),b=Math.log(w)/Math.log(256),O=Math.log(256)/Math.log(w);function A(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var oe=0,re=0,ae=0,I=F.length;ae!==I&&F[ae]===0;)ae++,oe++;for(var N=(I-ae)*O+1>>>0,$=new Uint8Array(N);ae!==I;){for(var D=F[ae],U=0,Q=N-1;(D!==0||U<re)&&Q!==-1;Q--,U++)D+=256*$[Q]>>>0,$[Q]=D%w>>>0,D=D/w>>>0;if(D!==0)throw new Error("Non-zero carry");re=U,ae++}for(var R=N-re;R!==N&&$[R]===0;)R++;for(var le=x.repeat(oe);R<N;++R)le+=i.charAt($[R]);return le}function B(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var oe=0;if(F[oe]!==" "){for(var re=0,ae=0;F[oe]===x;)re++,oe++;for(var I=(F.length-oe)*b+1>>>0,N=new Uint8Array(I);F[oe];){var $=r[F.charCodeAt(oe)];if($===255)return;for(var D=0,U=I-1;($!==0||D<ae)&&U!==-1;U--,D++)$+=w*N[U]>>>0,N[U]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");ae=D,oe++}if(F[oe]!==" "){for(var Q=I-ae;Q!==I&&N[Q]===0;)Q++;for(var R=new Uint8Array(re+(I-Q)),le=re;Q!==I;)R[le++]=N[Q++];return R}}}function V(F){var oe=B(F);if(oe)return oe;throw new Error(`Non-${e} character`)}return{encode:A,decodeUnsafe:B,decode:V}}var WI=KI,GI=WI;const vp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},JI=i=>new TextEncoder().encode(i),QI=i=>new TextDecoder().decode(i);class YI{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class XI{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _p(this,e)}}class ZI{constructor(e){this.decoders=e}or(e){return _p(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _p=(i,e)=>new ZI({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class eS{constructor(e,r,s,o){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new YI(e,r,s),this.decoder=new XI(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ia=({name:i,prefix:e,encode:r,decode:s})=>new eS(i,e,r,s),As=({prefix:i,name:e,alphabet:r})=>{const{encode:s,decode:o}=GI(r,e);return ia({prefix:i,name:e,encode:s,decode:u=>vp(o(u))})},tS=(i,e,r,s)=>{const o={};for(let O=0;O<e.length;++O)o[e[O]]=O;let u=i.length;for(;i[u-1]==="=";)--u;const y=new Uint8Array(u*r/8|0);let w=0,x=0,b=0;for(let O=0;O<u;++O){const A=o[i[O]];if(A===void 0)throw new SyntaxError(`Non-${s} character`);x=x<<r|A,w+=r,w>=8&&(w-=8,y[b++]=255&x>>w)}if(w>=r||255&x<<8-w)throw new SyntaxError("Unexpected end of data");return y},rS=(i,e,r)=>{const s=e[e.length-1]==="=",o=(1<<r)-1;let u="",y=0,w=0;for(let x=0;x<i.length;++x)for(w=w<<8|i[x],y+=8;y>r;)y-=r,u+=e[o&w>>y];if(y&&(u+=e[o&w<<r-y]),s)for(;u.length*r&7;)u+="=";return u},Qt=({name:i,prefix:e,bitsPerChar:r,alphabet:s})=>ia({prefix:e,name:i,encode(o){return rS(o,s,r)},decode(o){return tS(o,s,r,i)}}),nS=ia({prefix:"\0",name:"identity",encode:i=>QI(i),decode:i=>JI(i)});var iS=Object.freeze({__proto__:null,identity:nS});const sS=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var oS=Object.freeze({__proto__:null,base2:sS});const aS=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var cS=Object.freeze({__proto__:null,base8:aS});const uS=As({prefix:"9",name:"base10",alphabet:"0123456789"});var lS=Object.freeze({__proto__:null,base10:uS});const fS=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),hS=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var dS=Object.freeze({__proto__:null,base16:fS,base16upper:hS});const pS=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gS=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),yS=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mS=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vS=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_S=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wS=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bS=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ES=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var IS=Object.freeze({__proto__:null,base32:pS,base32upper:gS,base32pad:yS,base32padupper:mS,base32hex:vS,base32hexupper:_S,base32hexpad:wS,base32hexpadupper:bS,base32z:ES});const SS=As({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),OS=As({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var PS=Object.freeze({__proto__:null,base36:SS,base36upper:OS});const xS=As({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),RS=As({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var TS=Object.freeze({__proto__:null,base58btc:xS,base58flickr:RS});const AS=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),NS=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CS=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$S=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var DS=Object.freeze({__proto__:null,base64:AS,base64pad:NS,base64url:CS,base64urlpad:$S});const wp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),jS=wp.reduce((i,e,r)=>(i[r]=e,i),[]),FS=wp.reduce((i,e,r)=>(i[e.codePointAt(0)]=r,i),[]);function LS(i){return i.reduce((e,r)=>(e+=jS[r],e),"")}function US(i){const e=[];for(const r of i){const s=FS[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const MS=ia({prefix:"\u{1F680}",name:"base256emoji",encode:LS,decode:US});var qS=Object.freeze({__proto__:null,base256emoji:MS}),zS=bp,Ih=128,BS=127,HS=~BS,kS=Math.pow(2,31);function bp(i,e,r){e=e||[],r=r||0;for(var s=r;i>=kS;)e[r++]=i&255|Ih,i/=128;for(;i&HS;)e[r++]=i&255|Ih,i>>>=7;return e[r]=i|0,bp.bytes=r-s+1,e}var VS=nu,KS=128,Sh=127;function nu(i,s){var r=0,s=s||0,o=0,u=s,y,w=i.length;do{if(u>=w)throw nu.bytes=0,new RangeError("Could not decode varint");y=i[u++],r+=o<28?(y&Sh)<<o:(y&Sh)*Math.pow(2,o),o+=7}while(y>=KS);return nu.bytes=u-s,r}var WS=Math.pow(2,7),GS=Math.pow(2,14),JS=Math.pow(2,21),QS=Math.pow(2,28),YS=Math.pow(2,35),XS=Math.pow(2,42),ZS=Math.pow(2,49),eO=Math.pow(2,56),tO=Math.pow(2,63),rO=function(i){return i<WS?1:i<GS?2:i<JS?3:i<QS?4:i<YS?5:i<XS?6:i<ZS?7:i<eO?8:i<tO?9:10},nO={encode:zS,decode:VS,encodingLength:rO},Ep=nO;const Oh=(i,e,r=0)=>(Ep.encode(i,e,r),e),Ph=i=>Ep.encodingLength(i),iu=(i,e)=>{const r=e.byteLength,s=Ph(i),o=s+Ph(r),u=new Uint8Array(o+r);return Oh(i,u,0),Oh(r,u,s),u.set(e,o),new iO(i,r,e,u)};class iO{constructor(e,r,s,o){this.code=e,this.size=r,this.digest=s,this.bytes=o}}const Ip=({name:i,code:e,encode:r})=>new sO(i,e,r);class sO{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?iu(this.code,r):r.then(s=>iu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Sp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),oO=Ip({name:"sha2-256",code:18,encode:Sp("SHA-256")}),aO=Ip({name:"sha2-512",code:19,encode:Sp("SHA-512")});var cO=Object.freeze({__proto__:null,sha256:oO,sha512:aO});const Op=0,uO="identity",Pp=vp,lO=i=>iu(Op,Pp(i)),fO={code:Op,name:uO,encode:Pp,digest:lO};var hO=Object.freeze({__proto__:null,identity:fO});new TextEncoder,new TextDecoder;const xh={...iS,...oS,...cS,...lS,...dS,...IS,...PS,...TS,...DS,...qS};({...cO,...hO});function xp(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function dO(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xp(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Rp(i,e,r,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:r},decoder:{decode:s}}}const Rh=Rp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Lc=Rp("ascii","a",i=>{let e="a";for(let r=0;r<i.length;r++)e+=String.fromCharCode(i[r]);return e},i=>{i=i.substring(1);const e=dO(i.length);for(let r=0;r<i.length;r++)e[r]=i.charCodeAt(r);return e}),pO={utf8:Rh,"utf-8":Rh,hex:xh.base16,latin1:Lc,ascii:Lc,binary:Lc,...xh};function gO(i,e="utf8"){const r=pO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xp(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}const Tp="wc",yO=2,Nu="core",Ln=`${Tp}@2:${Nu}:`,mO={name:Nu,logger:"error"},vO={database:":memory:"},_O="crypto",Th="client_ed25519_seed",wO=ge.ONE_DAY,bO="keychain",EO="0.3",IO="messages",SO="0.3",OO=ge.SIX_HOURS,PO="publisher",Ap="irn",xO="error",Np="wss://relay.walletconnect.com",Ah="wss://relay.walletconnect.org",RO="relayer",Zt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},TO="_subscription",gn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},AO=ge.ONE_SECOND,NO="2.10.6",CO=1e4,$O="0.3",DO="WALLETCONNECT_CLIENT_ID",Vr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},jO="subscription",FO="0.3",LO=ge.FIVE_SECONDS*1e3,UO="pairing",MO="0.3",us={wc_pairingDelete:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:0},res:{ttl:ge.ONE_DAY,prompt:!1,tag:0}}},ps={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},qO="history",zO="0.3",BO="expirer",Lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},HO="0.3",Uc="verify-api",Ci="https://verify.walletconnect.com",su="https://verify.walletconnect.org",kO=[Ci,su];class VO{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=bO,this.version=EO,this.initialized=!1,this.storagePrefix=Ln,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:u}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(u)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Qd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class KO{constructor(e,r,s){this.core=e,this.logger=r,this.name=_O,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),u=Yf(o);return zd(u.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=Kb();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const u=await this.getClientSeed(),y=Yf(u),w=eu();return await yb(w,o,wO,y)},this.generateSharedKey=(o,u,y)=>{this.isInitialized();const w=this.getPrivateKey(o),x=Wb(w,u);return this.setSymKey(x,y)},this.setSymKey=async(o,u)=>{this.isInitialized();const y=u||Gb(o);return await this.keychain.set(y,o),y},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,u,y)=>{this.isInitialized();const w=Jd(y),x=eb(u);if(oh(w)){const B=w.senderPublicKey,V=w.receiverPublicKey;o=await this.generateSharedKey(B,V)}const b=this.getSymKey(o),{type:O,senderPublicKey:A}=w;return Qb({type:O,symKey:b,message:x,senderPublicKey:A})},this.decode=async(o,u,y)=>{this.isInitialized();const w=Zb(u,y);if(oh(w)){const x=w.receiverPublicKey,b=w.senderPublicKey;o=await this.generateSharedKey(x,b)}try{const x=this.getSymKey(o),b=Yb({symKey:x,encoded:u});return Z1(b)}catch(x){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(x)}},this.getPayloadType=o=>{const u=Jo(o);return xs(u.type)},this.getPayloadSenderPublicKey=o=>{const u=Jo(o);return u.senderPublicKey?ur(u.senderPublicKey,cr):void 0},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.keychain=s||new VO(this.core,this.logger)}get context(){return De.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Th)}catch{e=eu(),await this.keychain.set(Th,e)}return gO(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class WO extends B1{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=IO,this.version=SO,this.initialized=!1,this.storagePrefix=Ln,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const u=Di(o);let y=this.messages.get(s);return typeof y>"u"&&(y={}),typeof y[u]<"u"||(y[u]=o,this.messages.set(s,y),await this.persist()),u},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const u=this.get(s),y=Di(o);return typeof u[y]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=De.generateChildLogger(e,this.name),this.core=r}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Qd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Yd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class GO extends H1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new er.exports.EventEmitter,this.name=PO,this.queue=new Map,this.publishTimeout=ge.toMiliseconds(ge.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,u)=>{var y;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:u}});try{const w=u?.ttl||OO,x=tu(u),b=u?.prompt||!1,O=u?.tag||0,A=u?.id||cp().toString(),B={topic:s,message:o,opts:{ttl:w,relay:x,prompt:b,tag:O,id:A}},V=setTimeout(()=>this.queue.set(A,B),this.publishTimeout);try{await await Ss(this.rpcPublish(s,o,w,x,b,O,A),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(A),this.relayer.events.emit(Zt.publish,B)}catch(F){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(y=u?.internal)!=null&&y.throwOnFailedPublish)throw this.removeRequestFromQueue(A),F;return}finally{clearTimeout(V)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:u}})}catch(w){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(w),w}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return De.getLoggerContext(this.logger)}rpcPublish(e,r,s,o,u,y,w){var x,b,O,A;const B={method:Ko(o.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:u,tag:y},id:w};return ar((x=B.params)==null?void 0:x.prompt)&&((b=B.params)==null||delete b.prompt),ar((O=B.params)==null?void 0:O.tag)&&((A=B.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:B}),this.relayer.request(B)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:o}=e;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Li.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Zt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Zt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class JO{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const o=s.filter(u=>u!==r);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var QO=Object.defineProperty,YO=Object.defineProperties,XO=Object.getOwnPropertyDescriptors,Nh=Object.getOwnPropertySymbols,ZO=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,Ch=(i,e,r)=>e in i?QO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,ls=(i,e)=>{for(var r in e||(e={}))ZO.call(e,r)&&Ch(i,r,e[r]);if(Nh)for(var r of Nh(e))eP.call(e,r)&&Ch(i,r,e[r]);return i},Mc=(i,e)=>YO(i,XO(e));class tP extends K1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new JO,this.events=new er.exports.EventEmitter,this.name=jO,this.version=FO,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ln,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const u=tu(o),y={topic:s,relay:u};this.pending.set(s,y);const w=await this.rpcSubscribe(s,u);return this.onSubscribe(w,y),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),w}catch(u){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(u),u}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,u)=>{const y=new ge.Watch;y.start(this.pendingSubscriptionWatchLabel);const w=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(w),y.stop(this.pendingSubscriptionWatchLabel),o(!0)),y.elapsed(this.pendingSubscriptionWatchLabel)>=LO&&(clearInterval(w),y.stop(this.pendingSubscriptionWatchLabel),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.clientId=""}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const o=tu(s);await this.rpcUnsubscribe(e,r,o);const u=Vt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,u),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,r){const s={method:Ko(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ss(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Zt.connection_stalled)}return Di(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:Ko(r.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ss(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Zt.connection_stalled)}}rpcUnsubscribe(e,r,s){const o={method:Ko(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,r){this.setSubscription(e,Mc(ls({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ls({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,ls({},r)),this.topicMap.set(r.topic,e),this.events.emit(Vr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Vr.deleted,Mc(ls({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Vr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Vr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Ts(r)&&this.onBatchSubscribe(r.map((s,o)=>Mc(ls({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Li.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Zt.connect,async()=>{await this.onConnect()}),this.relayer.on(Zt.disconnect,()=>{this.onDisconnect()}),this.events.on(Vr.created,async e=>{const r=Vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Vr.deleted,async e=>{const r=Vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var rP=Object.defineProperty,$h=Object.getOwnPropertySymbols,nP=Object.prototype.hasOwnProperty,iP=Object.prototype.propertyIsEnumerable,Dh=(i,e,r)=>e in i?rP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,sP=(i,e)=>{for(var r in e||(e={}))nP.call(e,r)&&Dh(i,r,e[r]);if($h)for(var r of $h(e))iP.call(e,r)&&Dh(i,r,e[r]);return i};class oP extends k1{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new er.exports.EventEmitter,this.name=RO,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Zt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Zt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(gn.payload,this.onPayloadHandler),this.provider.on(gn.connect,this.onConnectHandler),this.provider.on(gn.disconnect,this.onDisconnectHandler),this.provider.on(gn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?De.generateChildLogger(e.logger,this.name):De.pino(De.getDefaultLoggerOptions({level:e.logger||xO})),this.messages=new WO(this.logger,e.core),this.subscriber=new tP(this,this.logger),this.publisher=new GO(this,this.logger),this.relayUrl=e?.relayUrl||Np,this.projectId=e.projectId,this.bundleId=sE(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Ah}...`),await this.restartTransport(Ah)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},CO)}get context(){return De.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";if(o)return o;let u;const y=w=>{w.topic===e&&(this.subscriber.off(Vr.created,y),u())};return await Promise.all([new Promise(w=>{u=w,this.subscriber.on(Vr.created,y)}),new Promise(async w=>{o=await this.subscriber.subscribe(e,r),w()})]),o}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Ss(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Vr.resubscribed,()=>{r()})}),new Promise(async(r,s)=>{try{await Ss(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}r()})])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.provider.events.emit(gn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await mh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wI(new kI(fE({sdkVersion:NO,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const o=this.messages.has(r,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ru(e)){if(!e.method.endsWith(TO))return;const r=e.params,{topic:s,message:o,publishedAt:u}=r.data,y={topic:s,message:o,publishedAt:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(sP({type:"event",event:r.id},y)),this.events.emit(r.id,y),await this.acknowledgePayload(e),await this.onMessageEvent(y)}else na(e)&&this.events.emit(Zt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Zt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=xu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(gn.payload,this.onPayloadHandler),this.provider.off(gn.connect,this.onConnectHandler),this.provider.off(gn.disconnect,this.onDisconnectHandler),this.provider.off(gn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Zt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await mh();nI(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(Zt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ge.toMiliseconds(AO)))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var aP=Object.defineProperty,jh=Object.getOwnPropertySymbols,cP=Object.prototype.hasOwnProperty,uP=Object.prototype.propertyIsEnumerable,Fh=(i,e,r)=>e in i?aP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Lh=(i,e)=>{for(var r in e||(e={}))cP.call(e,r)&&Fh(i,r,e[r]);if(jh)for(var r of jh(e))uP.call(e,r)&&Fh(i,r,e[r]);return i};class sa extends V1{constructor(e,r,s,o=Ln,u=void 0){super(e,r,s,o),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=$O,this.cached=[],this.initialized=!1,this.storagePrefix=Ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(y=>{this.getKey&&y!==null&&!ar(y)?this.map.set(this.getKey(y),y):DE(y)?this.map.set(y.id,y):jE(y)&&this.map.set(y.topic,y)}),this.cached=[],this.initialized=!0)},this.set=async(y,w)=>{this.isInitialized(),this.map.has(y)?await this.update(y,w):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:y,value:w}),this.map.set(y,w),await this.persist())},this.get=y=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:y}),this.getData(y)),this.getAll=y=>(this.isInitialized(),y?this.values.filter(w=>Object.keys(y).every(x=>VI(w[x],y[x]))):this.values),this.update=async(y,w)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:y,update:w});const x=Lh(Lh({},this.getData(y)),w);this.map.set(y,x),await this.persist()},this.delete=async(y,w)=>{this.isInitialized(),this.map.has(y)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:y,reason:w}),this.map.delete(y),await this.persist())},this.logger=De.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=u}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class lP{constructor(e,r){this.core=e,this.logger=r,this.name=UO,this.version=MO,this.events=new du,this.initialized=!1,this.storagePrefix=Ln,this.ignoredPayloadTypes=[oi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=eu(),o=await this.core.crypto.setSymKey(s),u=Kr(ge.FIVE_MINUTES),y={protocol:Ap},w={topic:o,expiry:u,relay:y,active:!1},x=SE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:y});return await this.pairings.set(o,w),await this.core.relayer.subscribe(o),this.core.expirer.set(o,u),{topic:o,uri:x}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:u,relay:y}=hh(s.uri);let w;if(this.pairings.keys.includes(o)&&(w=this.pairings.get(o),w.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const x=Kr(ge.FIVE_MINUTES),b={topic:o,relay:y,expiry:x,active:!1};return await this.pairings.set(o,b),this.core.expirer.set(o,x),s.activatePairing&&await this.activate({topic:o}),this.events.emit(ps.create,b),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(u,o),await this.core.relayer.subscribe(o,{relay:y})),b},this.activate=async({topic:s})=>{this.isInitialized();const o=Kr(ge.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const u=await this.sendRequest(o,"wc_pairingPing",{}),{done:y,resolve:w,reject:x}=Ni();this.events.once(Lt("pairing_ping",u),({error:b})=>{b?x(b):w()}),await y()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Vt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,u)=>{const y=ji(o,u),w=await this.core.crypto.encode(s,y),x=us[o].req;return this.core.history.set(s,y),this.core.relayer.publish(s,w,x),y.id},this.sendResult=async(s,o,u)=>{const y=xu(s,u),w=await this.core.crypto.encode(o,y),x=await this.core.history.get(o,s),b=us[x.request.method].res;await this.core.relayer.publish(o,w,b),await this.core.history.resolve(y)},this.sendError=async(s,o,u)=>{const y=up(s,u),w=await this.core.crypto.encode(o,y),x=await this.core.history.get(o,s),b=us[x.request.method]?us[x.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(o,w,b),await this.core.history.resolve(y)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Vt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>An(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:u}=s;switch(u.method){case"wc_pairingPing":return this.onPairingPingRequest(o,u);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,u);default:return this.onUnknownRpcMethodRequest(o,u)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:u}=s,y=(await this.core.history.get(o,u.id)).request.method;switch(y){case"wc_pairingPing":return this.onPairingPingResponse(o,u);default:return this.onUnknownRpcMethodResponse(y)}},this.onPairingPingRequest=async(s,o)=>{const{id:u}=o;try{this.isValidPing({topic:s}),await this.sendResult(u,s,!0),this.events.emit(ps.ping,{id:u,topic:s})}catch(y){await this.sendError(u,s,y),this.logger.error(y)}},this.onPairingPingResponse=(s,o)=>{const{id:u}=o;setTimeout(()=>{mn(o)?this.events.emit(Lt("pairing_ping",u),{}):Wr(o)&&this.events.emit(Lt("pairing_ping",u),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:u}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(ps.delete,{id:u,topic:s})}catch(y){await this.sendError(u,s,y),this.logger.error(y)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:u,method:y}=o;try{if(this.registeredMethods.includes(y))return;const w=Vt("WC_METHOD_UNSUPPORTED",y);await this.sendError(u,s,w),this.logger.error(w)}catch(w){await this.sendError(u,s,w),this.logger.error(w)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Vt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!vr(s)){const{message:y}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(y)}if(!$E(s.uri)){const{message:y}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(y)}const u=hh(s.uri);if(!((o=u?.relay)!=null&&o.protocol)){const{message:y}=ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(y)}if(!(u!=null&&u.symKey)){const{message:y}=ce("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(y)}},this.isValidPing=async s=>{if(!vr(s)){const{message:u}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(u)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:u}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(u)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Kt(s,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(An(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.pairings=new sa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return De.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Zt.message,async e=>{const{topic:r,message:s}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);try{Ru(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):na(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.core.history.delete(r,o.id))}catch(u){this.logger.error(u)}})}registerExpirerEvents(){this.core.expirer.on(Lr.expired,async e=>{const{topic:r}=Zd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ps.expire,{topic:r}))})}}class fP extends z1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new er.exports.EventEmitter,this.name=qO,this.version=zO,this.cached=[],this.initialized=!1,this.storagePrefix=Ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,u)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:u}),this.records.has(o.id))return;const y={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:u,expiry:Kr(ge.THIRTY_DAYS)};this.records.set(y.id,y),this.events.emit(en.created,y)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Wr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(en.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(u=>{if(u.topic===s){if(typeof o<"u"&&u.id!==o)return;this.records.delete(u.id),this.events.emit(en.deleted,u)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:ji(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(en.created,e=>{const r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.updated,e=>{const r=en.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.deleted,e=>{const r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Li.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ge.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class hP extends W1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new er.exports.EventEmitter,this.name=BO,this.version=HO,this.cached=[],this.initialized=!1,this.storagePrefix=Ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const u=this.formatTarget(s),y={target:u,expiry:o};this.expirations.set(u,y),this.checkExpiry(u,y),this.events.emit(Lr.created,{target:u,expiration:y})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),u=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Lr.deleted,{target:o,expiration:u})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return hE(e);if(typeof e=="number")return dE(e);const{message:r}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Lr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;ge.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Lr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Li.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Lr.created,e=>{const r=Lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Lr.expired,e=>{const r=Lr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Lr.deleted,e=>{const r=Lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class dP extends G1{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Uc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||qi()||!zi())return;const o=this.getVerifyUrl(s?.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(u){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(u)}if(!this.initialized){this.removeIframe(),this.verifyUrl=su;try{await this.createIframe()}catch(u){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(u),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s?.verifyUrl);let u;try{u=await this.fetchAttestation(s.attestationId,o)}catch(y){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(y),u=await this.fetchAttestation(s.attestationId,su)}return u},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const u=this.startAbortTimer(ge.ONE_SECOND*2),y=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(u),y.status===200?await y.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=u=>{u.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(u=>{if(document.getElementById(Uc))return u();window.addEventListener("message",o);const y=document.createElement("iframe");y.id=Uc,y.src=`${this.verifyUrl}/${this.projectId}`,y.style.display="none",document.body.append(y),this.iframe=y,s=u}),new Promise((u,y)=>setTimeout(()=>{window.removeEventListener("message",o),y("verify iframe load timeout")},ge.toMiliseconds(ge.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||Ci;return kO.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Ci}`),o=Ci),o},this.logger=De.generateChildLogger(r,this.name),this.verifyUrl=Ci,this.abortController=new AbortController,this.isDevEnv=Eu()&&{}.IS_VITEST}get context(){return De.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ge.toMiliseconds(e))}}var pP=Object.defineProperty,Uh=Object.getOwnPropertySymbols,gP=Object.prototype.hasOwnProperty,yP=Object.prototype.propertyIsEnumerable,Mh=(i,e,r)=>e in i?pP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,qh=(i,e)=>{for(var r in e||(e={}))gP.call(e,r)&&Mh(i,r,e[r]);if(Uh)for(var r of Uh(e))yP.call(e,r)&&Mh(i,r,e[r]);return i};class Cu extends q1{constructor(e){super(e),this.protocol=Tp,this.version=yO,this.name=Nu,this.events=new er.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Np,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:e?.logger||mO.logger}));this.logger=De.generateChildLogger(r,this.name),this.heartbeat=new Li.HeartBeat,this.crypto=new KO(this,this.logger,e?.keychain),this.history=new fP(this,this.logger),this.expirer=new hP(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new g1(qh(qh({},vO),e?.storageOptions)),this.relayer=new oP({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new lP(this,this.logger),this.verify=new dP(this.projectId||"",this.logger)}static async init(e){const r=new Cu(e);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(DO,s),r}get context(){return De.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const mP=Cu,Cp="wc",$p=2,Dp="client",$u=`${Cp}@${$p}:${Dp}:`,qc={name:Dp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},zh="WALLETCONNECT_DEEPLINK_CHOICE",vP="proposal",jp="Proposal expired",_P="session",qo=ge.SEVEN_DAYS,wP="engine",fs={wc_sessionPropose:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1115}}},zc={min:ge.FIVE_MINUTES,max:ge.SEVEN_DAYS},yn={idle:"IDLE",active:"ACTIVE"},bP="request",EP=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var IP=Object.defineProperty,SP=Object.defineProperties,OP=Object.getOwnPropertyDescriptors,Bh=Object.getOwnPropertySymbols,PP=Object.prototype.hasOwnProperty,xP=Object.prototype.propertyIsEnumerable,Hh=(i,e,r)=>e in i?IP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,yr=(i,e)=>{for(var r in e||(e={}))PP.call(e,r)&&Hh(i,r,e[r]);if(Bh)for(var r of Bh(e))xP.call(e,r)&&Hh(i,r,e[r]);return i},hs=(i,e)=>SP(i,OP(e));class RP extends Q1{constructor(e){super(e),this.name=wP,this.events=new du,this.initialized=!1,this.ignoredPayloadTypes=[oi],this.requestQueue={state:yn.idle,queue:[]},this.sessionRequestQueue={state:yn.idle,queue:[]},this.requestQueueDelay=ge.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(fs)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ge.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const s=hs(yr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:u,optionalNamespaces:y,sessionProperties:w,relays:x}=s;let b=o,O,A=!1;if(b&&(A=this.client.core.pairing.pairings.get(b).active),!b||!A){const{topic:N,uri:$}=await this.client.core.pairing.create();b=N,O=$}const B=await this.client.core.crypto.generateKeyPair(),V=yr({requiredNamespaces:u,optionalNamespaces:y,relays:x??[{protocol:Ap}],proposer:{publicKey:B,metadata:this.client.metadata}},w&&{sessionProperties:w}),{reject:F,resolve:oe,done:re}=Ni(ge.FIVE_MINUTES,jp);if(this.events.once(Lt("session_connect"),async({error:N,session:$})=>{if(N)F(N);else if($){$.self.publicKey=B;const D=hs(yr({},$),{requiredNamespaces:$.requiredNamespaces,optionalNamespaces:$.optionalNamespaces});await this.client.session.set($.topic,D),await this.setExpiry($.topic,$.expiry),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:$.peer.metadata}),oe(D)}}),!b){const{message:N}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${b}`);throw new Error(N)}const ae=await this.sendRequest({topic:b,method:"wc_sessionPropose",params:V}),I=Kr(ge.FIVE_MINUTES);return await this.setProposal(ae,yr({id:ae,expiry:I},V)),{uri:O,approval:re}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:u,sessionProperties:y}=r,w=this.client.proposal.get(s);let{pairingTopic:x,proposer:b,requiredNamespaces:O,optionalNamespaces:A}=w;x=x||"",ms(O)||(O=RE(u,"approve()"));const B=await this.client.core.crypto.generateKeyPair(),V=b.publicKey,F=await this.client.core.crypto.generateSharedKey(B,V);x&&s&&(await this.client.core.pairing.updateMetadata({topic:x,metadata:b.metadata}),await this.sendResult({id:s,topic:x,result:{relay:{protocol:o??"irn"},responderPublicKey:B}}),await this.client.proposal.delete(s,Vt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:x}));const oe=yr({relay:{protocol:o??"irn"},namespaces:u,requiredNamespaces:O,optionalNamespaces:A,pairingTopic:x,controller:{publicKey:B,metadata:this.client.metadata},expiry:Kr(qo)},y&&{sessionProperties:y});await this.client.core.relayer.subscribe(F),await this.sendRequest({topic:F,method:"wc_sessionSettle",params:oe,throwOnFailedPublish:!0});const re=hs(yr({},oe),{topic:F,pairingTopic:x,acknowledged:!1,self:oe.controller,peer:{publicKey:b.publicKey,metadata:b.metadata},controller:B});return await this.client.session.set(F,re),await this.setExpiry(F,Kr(qo)),{topic:F,acknowledged:()=>new Promise(ae=>setTimeout(()=>ae(this.client.session.get(F)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:u}=this.client.proposal.get(s);u&&(await this.sendError(s,u,o),await this.client.proposal.delete(s,Vt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,u=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:y,resolve:w,reject:x}=Ni();return this.events.once(Lt("session_update",u),({error:b})=>{b?x(b):w()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:y}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:u,resolve:y,reject:w}=Ni();return this.events.once(Lt("session_extend",o),({error:x})=>{x?w(x):y()}),await this.setExpiry(s,Kr(qo)),{acknowledged:u}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:u,expiry:y}=r,w=Pu(),{done:x,resolve:b,reject:O}=Ni(y,"Request expired. Please try again.");return this.events.once(Lt("session_request",w),({error:A,result:B})=>{A?O(A):b(B)}),await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:w,topic:u,method:"wc_sessionRequest",params:{request:o,chainId:s},expiry:y,throwOnFailedPublish:!0}).catch(B=>O(B)),this.client.events.emit("session_request_sent",{topic:u,request:o,chainId:s,id:w}),A()}),new Promise(async A=>{const B=await gE(this.client.core.storage,zh);pE({id:w,topic:u,wcDeepLink:B}),A()}),x()]).then(A=>A[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:u}=o;mn(o)?await this.sendResult({id:u,topic:s,result:o.result,throwOnFailedPublish:!0}):Wr(o)&&await this.sendError(u,s,o.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:u,resolve:y,reject:w}=Ni();this.events.once(Lt("session_ping",o),({error:x})=>{x?w(x):y()}),await u()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:u}=r;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:u}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Vt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>NE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(u=>{var y,w;return((y=u.peerMetadata)==null?void 0:y.url)&&((w=u.peerMetadata)==null?void 0:w.url)===r.peer.metadata.url&&u.topic&&u.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(u=>this.client.core.pairing.disconnect({topic:u.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Vt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(zh).catch(u=>this.client.logger.warn(u))},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Vt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(u=>u.id!==r),o&&(this.sessionRequestQueue.state=yn.idle)},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=fs.wc_sessionRequest.req.ttl,{id:o,topic:u,params:y,verifyContext:w}=r;await this.client.pendingRequest.set(o,{id:o,topic:u,params:y,verifyContext:w}),s&&this.client.core.expirer.set(o,Kr(s))},this.sendRequest=async r=>{const{topic:s,method:o,params:u,expiry:y,relayRpcId:w,clientRpcId:x,throwOnFailedPublish:b}=r,O=ji(o,u,x);if(zi()&&EP.includes(o)){const V=Di(JSON.stringify(O));this.client.core.verify.register({attestationId:V})}const A=await this.client.core.crypto.encode(s,O),B=fs[o].req;return y&&(B.ttl=y),w&&(B.id=w),this.client.core.history.set(s,O),b?(B.internal=hs(yr({},B.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,A,B)):this.client.core.relayer.publish(s,A,B).catch(V=>this.client.logger.error(V)),O.id},this.sendResult=async r=>{const{id:s,topic:o,result:u,throwOnFailedPublish:y}=r,w=xu(s,u),x=await this.client.core.crypto.encode(o,w),b=await this.client.core.history.get(o,s),O=fs[b.request.method].res;y?(O.internal=hs(yr({},O.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,x,O)):this.client.core.relayer.publish(o,x,O).catch(A=>this.client.logger.error(A)),await this.client.core.history.resolve(w)},this.sendError=async(r,s,o)=>{const u=up(r,o),y=await this.client.core.crypto.encode(s,u),w=await this.client.core.history.get(s,r),x=fs[w.request.method].res;this.client.core.relayer.publish(s,y,x),await this.client.core.history.resolve(u)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{An(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{An(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===yn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=yn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=yn.idle},this.processRequest=r=>{const{topic:s,payload:o}=r,u=o.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,u=(await this.client.core.history.get(s,o.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${u}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:u}=s;try{this.isValidConnect(yr({},s.params));const y=Kr(ge.FIVE_MINUTES),w=yr({id:u,pairingTopic:r,expiry:y},o);await this.setProposal(u,w);const x=Di(JSON.stringify(s)),b=await this.getVerifyContext(x,w.proposer.metadata);this.client.events.emit("session_proposal",{id:u,params:w,verifyContext:b})}catch(y){await this.sendError(u,r,y),this.client.logger.error(y)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(mn(s)){const{result:u}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});const y=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:y});const w=y.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:w});const x=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:x});const b=await this.client.core.crypto.generateSharedKey(w,x);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:b});const O=await this.client.core.relayer.subscribe(b);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:O}),await this.client.core.pairing.activate({topic:r})}else Wr(s)&&(await this.client.proposal.delete(o,Vt("USER_DISCONNECTED")),this.events.emit(Lt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:u}=s;try{this.isValidSessionSettleRequest(u);const{relay:y,controller:w,expiry:x,namespaces:b,requiredNamespaces:O,optionalNamespaces:A,sessionProperties:B,pairingTopic:V}=s.params,F=yr({topic:r,relay:y,expiry:x,namespaces:b,acknowledged:!0,pairingTopic:V,requiredNamespaces:O,optionalNamespaces:A,controller:w.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:w.publicKey,metadata:w.metadata}},B&&{sessionProperties:B});await this.sendResult({id:s.id,topic:r,result:!0}),this.events.emit(Lt("session_connect"),{session:F}),this.cleanupDuplicatePairings(F)}catch(y){await this.sendError(o,r,y),this.client.logger.error(y)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;mn(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Lt("session_approve",o),{})):Wr(s)&&(await this.client.session.delete(r,Vt("USER_DISCONNECTED")),this.events.emit(Lt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:u}=s;try{const y=`${r}_session_update`,w=Mo.get(y);if(w&&this.isRequestOutOfSync(w,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidUpdate(yr({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_update",{id:u,topic:r,params:o}),Mo.set(y,u)}catch(y){await this.sendError(u,r,y),this.client.logger.error(y)}},this.isRequestOutOfSync=(r,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;mn(s)?this.events.emit(Lt("session_update",o),{}):Wr(s)&&this.events.emit(Lt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Kr(qo)),await this.sendResult({id:o,topic:r,result:!0}),this.client.events.emit("session_extend",{id:o,topic:r})}catch(u){await this.sendError(o,r,u),this.client.logger.error(u)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;mn(s)?this.events.emit(Lt("session_extend",o),{}):Wr(s)&&this.events.emit(Lt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult({id:o,topic:r,result:!0}),this.client.events.emit("session_ping",{id:o,topic:r})}catch(u){await this.sendError(o,r,u),this.client.logger.error(u)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{mn(s)?this.events.emit(Lt("session_ping",o),{}):Wr(s)&&this.events.emit(Lt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(u=>{this.client.core.relayer.once(Zt.publish,async()=>{u(await this.deleteSession(r))})}),this.sendResult({id:o,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(u){this.client.logger.error(u)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:u}=s;try{this.isValidRequest(yr({topic:r},u));const y=Di(JSON.stringify(ji("wc_sessionRequest",u,o))),w=this.client.session.get(r),x=await this.getVerifyContext(y,w.peer.metadata),b={id:o,topic:r,params:u,verifyContext:x};await this.setPendingSessionRequest(b),this.addSessionRequestToSessionRequestQueue(b),this.processSessionRequestQueue()}catch(y){await this.sendError(o,r,y),this.client.logger.error(y)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;mn(s)?this.events.emit(Lt("session_request",o),{result:s.result}):Wr(s)&&this.events.emit(Lt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:u}=s;try{const y=`${r}_session_event_${u.event.name}`,w=Mo.get(y);if(w&&this.isRequestOutOfSync(w,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(yr({topic:r},u)),this.client.events.emit("session_event",{id:o,topic:r,params:u}),Mo.set(y,o)}catch(y){await this.sendError(o,r,y),this.client.logger.error(y)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=yn.idle,this.processSessionRequestQueue()},ge.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===yn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=yn.active,this.client.events.emit("session_request",r)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=r=>{if(r.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===r.topic);s&&this.onSessionProposeRequest(r.topic,ji("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async r=>{if(!vr(r)){const{message:x}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(x)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:y,relays:w}=r;if(ar(s)||await this.isValidPairingTopic(s),!HE(w,!0)){const{message:x}=ce("MISSING_OR_INVALID",`connect() relays: ${w}`);throw new Error(x)}!ar(o)&&ms(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(u)&&ms(u)!==0&&this.validateNamespaces(u,"optionalNamespaces"),ar(y)||this.validateSessionProps(y,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=BE(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!vr(r))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:u,sessionProperties:y}=r;await this.isValidProposalId(s);const w=this.client.proposal.get(s),x=Wo(o,"approve()");if(x)throw new Error(x.message);const b=gh(w.requiredNamespaces,o,"approve()");if(b)throw new Error(b.message);if(!Kt(u,!0)){const{message:O}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${u}`);throw new Error(O)}ar(y)||this.validateSessionProps(y,"sessionProperties")},this.isValidReject=async r=>{if(!vr(r)){const{message:u}=ce("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(u)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!VE(o)){const{message:u}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidSessionSettleRequest=r=>{if(!vr(r)){const{message:b}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(b)}const{relay:s,controller:o,namespaces:u,expiry:y}=r;if(!tp(s)){const{message:b}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(b)}const w=FE(o,"onSessionSettleRequest()");if(w)throw new Error(w.message);const x=Wo(u,"onSessionSettleRequest()");if(x)throw new Error(x.message);if(An(y)){const{message:b}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(b)}},this.isValidUpdate=async r=>{if(!vr(r)){const{message:x}=ce("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(x)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const u=this.client.session.get(s),y=Wo(o,"update()");if(y)throw new Error(y.message);const w=gh(u.requiredNamespaces,o,"update()");if(w)throw new Error(w.message)},this.isValidExtend=async r=>{if(!vr(r)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!vr(r)){const{message:x}=ce("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(x)}const{topic:s,request:o,chainId:u,expiry:y}=r;await this.isValidSessionTopic(s);const{namespaces:w}=this.client.session.get(s);if(!ph(w,u)){const{message:x}=ce("MISSING_OR_INVALID",`request() chainId: ${u}`);throw new Error(x)}if(!KE(o)){const{message:x}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(x)}if(!JE(w,u,o.method)){const{message:x}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(x)}if(y&&!ZE(y,zc)){const{message:x}=ce("MISSING_OR_INVALID",`request() expiry: ${y}. Expiry must be a number (in seconds) between ${zc.min} and ${zc.max}`);throw new Error(x)}},this.isValidRespond=async r=>{if(!vr(r)){const{message:u}=ce("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(u)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!WE(o)){const{message:u}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidPing=async r=>{if(!vr(r)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!vr(r)){const{message:w}=ce("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(w)}const{topic:s,event:o,chainId:u}=r;await this.isValidSessionTopic(s);const{namespaces:y}=this.client.session.get(s);if(!ph(y,u)){const{message:w}=ce("MISSING_OR_INVALID",`emit() chainId: ${u}`);throw new Error(w)}if(!GE(o)){const{message:w}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(w)}if(!QE(y,u,o.name)){const{message:w}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(w)}},this.isValidDisconnect=async r=>{if(!vr(r)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||Ci,validation:"UNKNOWN",origin:s.url||""}};try{const u=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});u&&(o.verified.origin=u.origin,o.verified.isScam=u.isScam,o.verified.validation=u.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.info(u)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Kt(o,!1)){const{message:u}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(u)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Zt.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);try{Ru(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):na(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.client.core.history.delete(r,o.id)):this.onRelayEventUnknownPayload({topic:r,payload:o})}catch(u){this.client.logger.error(u)}})}registerExpirerEvents(){this.client.core.expirer.on(Lr.expired,async e=>{const{topic:r,id:s}=Zd(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(ps.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Kt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(An(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Kt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(An(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=ce("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Kt(e,!1)){const{message:r}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!kE(e)){const{message:r}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(An(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class TP extends sa{constructor(e,r){super(e,r,vP,$u),this.core=e,this.logger=r}}class AP extends sa{constructor(e,r){super(e,r,_P,$u),this.core=e,this.logger=r}}class NP extends sa{constructor(e,r){super(e,r,bP,$u,s=>s.id),this.core=e,this.logger=r}}class Du extends J1{constructor(e){super(e),this.protocol=Cp,this.version=$p,this.name=qc.name,this.events=new er.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||qc.name,this.metadata=e?.metadata||aE();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:e?.logger||qc.logger}));this.core=e?.core||new mP(e),this.logger=De.generateChildLogger(r,this.name),this.session=new AP(this.core,this.logger),this.proposal=new TP(this.core,this.logger),this.pendingRequest=new NP(this.core,this.logger),this.engine=new RP(this)}static async init(e){const r=new Du(e);return await r.initialize(),r}get context(){return De.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.getLocalStorage=tt.getLocalStorageOrThrow=tt.getCrypto=tt.getCryptoOrThrow=tt.getLocation=tt.getLocationOrThrow=tt.getNavigator=tt.getNavigatorOrThrow=tt.getDocument=tt.getDocumentOrThrow=tt.getFromWindowOrThrow=tt.getFromWindow=void 0;function ai(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}tt.getFromWindow=ai;function Hi(i){const e=ai(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}tt.getFromWindowOrThrow=Hi;function CP(){return Hi("document")}tt.getDocumentOrThrow=CP;function $P(){return ai("document")}tt.getDocument=$P;function DP(){return Hi("navigator")}tt.getNavigatorOrThrow=DP;function jP(){return ai("navigator")}tt.getNavigator=jP;function FP(){return Hi("location")}tt.getLocationOrThrow=FP;function LP(){return ai("location")}tt.getLocation=LP;function UP(){return Hi("crypto")}tt.getCryptoOrThrow=UP;function MP(){return ai("crypto")}tt.getCrypto=MP;function qP(){return Hi("localStorage")}tt.getLocalStorageOrThrow=qP;function zP(){return ai("localStorage")}tt.getLocalStorage=zP;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.getWindowMetadata=void 0;const kh=tt;function BP(){let i,e;try{i=kh.getDocumentOrThrow(),e=kh.getLocationOrThrow()}catch{return null}function r(){const A=i.getElementsByTagName("link"),B=[];for(let V=0;V<A.length;V++){const F=A[V],oe=F.getAttribute("rel");if(oe&&oe.toLowerCase().indexOf("icon")>-1){const re=F.getAttribute("href");if(re)if(re.toLowerCase().indexOf("https:")===-1&&re.toLowerCase().indexOf("http:")===-1&&re.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(re.indexOf("/")===0)ae+=re;else{const I=e.pathname.split("/");I.pop(),ae+=I.join("/")+"/"+re}B.push(ae)}else if(re.indexOf("//")===0){const ae=e.protocol+re;B.push(ae)}else B.push(re)}}return B}function s(...A){const B=i.getElementsByTagName("meta");for(let V=0;V<B.length;V++){const F=B[V],oe=["itemprop","property","name"].map(re=>F.getAttribute(re)).filter(re=>re?A.includes(re):!1);if(oe.length&&oe){const re=F.getAttribute("content");if(re)return re}}return""}function o(){let A=s("name","og:site_name","og:title","twitter:title");return A||(A=i.title),A}function u(){return s("description","og:description","twitter:description","keywords")}const y=o(),w=u(),x=e.origin,b=r();return{description:w,url:x,icons:b,name:y}}ju.getWindowMetadata=BP;var HP={},kP=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Fp="%[a-f0-9]{2}",Vh=new RegExp("("+Fp+")|([^%]+?)","gi"),Kh=new RegExp("("+Fp+")+","gi");function ou(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var r=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],ou(r),ou(s))}function VP(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(Vh)||[],r=1;r<e.length;r++)i=ou(e,r).join(""),e=i.match(Vh)||[];return i}}function KP(i){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Kh.exec(i);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=VP(r[0]);s!==r[0]&&(e[r[0]]=s)}r=Kh.exec(i)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),u=0;u<o.length;u++){var y=o[u];i=i.replace(new RegExp(y,"g"),e[y])}return i}var WP=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return KP(i)}};(function(i){const e=kP,r=WP,s=hd,o=dd,u=I=>I==null,y=Symbol("encodeFragmentIdentifier");function w(I){switch(I.arrayFormat){case"index":return N=>($,D)=>{const U=$.length;return D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),"[",U,"]"].join("")]:[...$,[O(N,I),"[",O(U,I),"]=",O(D,I)].join("")]};case"bracket":return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),"[]"].join("")]:[...$,[O(N,I),"[]=",O(D,I)].join("")];case"colon-list-separator":return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,[O(N,I),":list="].join("")]:[...$,[O(N,I),":list=",O(D,I)].join("")];case"comma":case"separator":case"bracket-separator":{const N=I.arrayFormat==="bracket-separator"?"[]=":"=";return $=>(D,U)=>U===void 0||I.skipNull&&U===null||I.skipEmptyString&&U===""?D:(U=U===null?"":U,D.length===0?[[O($,I),N,O(U,I)].join("")]:[[D,O(U,I)].join(I.arrayFormatSeparator)])}default:return N=>($,D)=>D===void 0||I.skipNull&&D===null||I.skipEmptyString&&D===""?$:D===null?[...$,O(N,I)]:[...$,[O(N,I),"=",O(D,I)].join("")]}}function x(I){let N;switch(I.arrayFormat){case"index":return($,D,U)=>{if(N=/\[(\d*)\]$/.exec($),$=$.replace(/\[\d*\]$/,""),!N){U[$]=D;return}U[$]===void 0&&(U[$]={}),U[$][N[1]]=D};case"bracket":return($,D,U)=>{if(N=/(\[\])$/.exec($),$=$.replace(/\[\]$/,""),!N){U[$]=D;return}if(U[$]===void 0){U[$]=[D];return}U[$]=[].concat(U[$],D)};case"colon-list-separator":return($,D,U)=>{if(N=/(:list)$/.exec($),$=$.replace(/:list$/,""),!N){U[$]=D;return}if(U[$]===void 0){U[$]=[D];return}U[$]=[].concat(U[$],D)};case"comma":case"separator":return($,D,U)=>{const Q=typeof D=="string"&&D.includes(I.arrayFormatSeparator),R=typeof D=="string"&&!Q&&A(D,I).includes(I.arrayFormatSeparator);D=R?A(D,I):D;const le=Q||R?D.split(I.arrayFormatSeparator).map(l=>A(l,I)):D===null?D:A(D,I);U[$]=le};case"bracket-separator":return($,D,U)=>{const Q=/(\[\])$/.test($);if($=$.replace(/\[\]$/,""),!Q){U[$]=D&&A(D,I);return}const R=D===null?[]:D.split(I.arrayFormatSeparator).map(le=>A(le,I));if(U[$]===void 0){U[$]=R;return}U[$]=[].concat(U[$],R)};default:return($,D,U)=>{if(U[$]===void 0){U[$]=D;return}U[$]=[].concat(U[$],D)}}}function b(I){if(typeof I!="string"||I.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function O(I,N){return N.encode?N.strict?e(I):encodeURIComponent(I):I}function A(I,N){return N.decode?r(I):I}function B(I){return Array.isArray(I)?I.sort():typeof I=="object"?B(Object.keys(I)).sort((N,$)=>Number(N)-Number($)).map(N=>I[N]):I}function V(I){const N=I.indexOf("#");return N!==-1&&(I=I.slice(0,N)),I}function F(I){let N="";const $=I.indexOf("#");return $!==-1&&(N=I.slice($)),N}function oe(I){I=V(I);const N=I.indexOf("?");return N===-1?"":I.slice(N+1)}function re(I,N){return N.parseNumbers&&!Number.isNaN(Number(I))&&typeof I=="string"&&I.trim()!==""?I=Number(I):N.parseBooleans&&I!==null&&(I.toLowerCase()==="true"||I.toLowerCase()==="false")&&(I=I.toLowerCase()==="true"),I}function ae(I,N){N=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},N),b(N.arrayFormatSeparator);const $=x(N),D=Object.create(null);if(typeof I!="string"||(I=I.trim().replace(/^[?#&]/,""),!I))return D;for(const U of I.split("&")){if(U==="")continue;let[Q,R]=s(N.decode?U.replace(/\+/g," "):U,"=");R=R===void 0?null:["comma","separator","bracket-separator"].includes(N.arrayFormat)?R:A(R,N),$(A(Q,N),R,D)}for(const U of Object.keys(D)){const Q=D[U];if(typeof Q=="object"&&Q!==null)for(const R of Object.keys(Q))Q[R]=re(Q[R],N);else D[U]=re(Q,N)}return N.sort===!1?D:(N.sort===!0?Object.keys(D).sort():Object.keys(D).sort(N.sort)).reduce((U,Q)=>{const R=D[Q];return Boolean(R)&&typeof R=="object"&&!Array.isArray(R)?U[Q]=B(R):U[Q]=R,U},Object.create(null))}i.extract=oe,i.parse=ae,i.stringify=(I,N)=>{if(!I)return"";N=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},N),b(N.arrayFormatSeparator);const $=R=>N.skipNull&&u(I[R])||N.skipEmptyString&&I[R]==="",D=w(N),U={};for(const R of Object.keys(I))$(R)||(U[R]=I[R]);const Q=Object.keys(U);return N.sort!==!1&&Q.sort(N.sort),Q.map(R=>{const le=I[R];return le===void 0?"":le===null?O(R,N):Array.isArray(le)?le.length===0&&N.arrayFormat==="bracket-separator"?O(R,N)+"[]":le.reduce(D(R),[]).join("&"):O(R,N)+"="+O(le,N)}).filter(R=>R.length>0).join("&")},i.parseUrl=(I,N)=>{N=Object.assign({decode:!0},N);const[$,D]=s(I,"#");return Object.assign({url:$.split("?")[0]||"",query:ae(oe(I),N)},N&&N.parseFragmentIdentifier&&D?{fragmentIdentifier:A(D,N)}:{})},i.stringifyUrl=(I,N)=>{N=Object.assign({encode:!0,strict:!0,[y]:!0},N);const $=V(I.url).split("?")[0]||"",D=i.extract(I.url),U=i.parse(D,{sort:!1}),Q=Object.assign(U,I.query);let R=i.stringify(Q,N);R&&(R=`?${R}`);let le=F(I.url);return I.fragmentIdentifier&&(le=`#${N[y]?O(I.fragmentIdentifier,N):I.fragmentIdentifier}`),`${$}${R}${le}`},i.pick=(I,N,$)=>{$=Object.assign({parseFragmentIdentifier:!0,[y]:!1},$);const{url:D,query:U,fragmentIdentifier:Q}=i.parseUrl(I,$);return i.stringifyUrl({url:D,query:o(U,N),fragmentIdentifier:Q},$)},i.exclude=(I,N,$)=>{const D=Array.isArray(N)?U=>!N.includes(U):(U,Q)=>!N(U,Q);return i.pick(I,D,$)}})(HP);const GP=":";function JP(i){const[e,r]=i.split(GP);return{namespace:e,reference:r}}function Bc(i=[],e=[]){return[...new Set([...i,...e])]}function Fu(i){return i.includes(":")}function gs(i){return Fu(i)?i.split(":")[0]:i}const QP={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Wh(i,e){const{message:r,code:s}=QP[i];return{message:e?`${r} ${e}`:r,code:s}}function Gh(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function YP(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}var au={exports:{}};(function(i,e){var r=typeof self<"u"?self:je,s=function(){function u(){this.fetch=!1,this.DOMException=r.DOMException}return u.prototype=r,new u}();(function(u){(function(y){var w={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function x(d){return d&&DataView.prototype.isPrototypeOf(d)}if(w.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(d){return d&&b.indexOf(Object.prototype.toString.call(d))>-1};function A(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function B(d){return typeof d!="string"&&(d=String(d)),d}function V(d){var f={next:function(){var T=d.shift();return{done:T===void 0,value:T}}};return w.iterable&&(f[Symbol.iterator]=function(){return f}),f}function F(d){this.map={},d instanceof F?d.forEach(function(f,T){this.append(T,f)},this):Array.isArray(d)?d.forEach(function(f){this.append(f[0],f[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(f){this.append(f,d[f])},this)}F.prototype.append=function(d,f){d=A(d),f=B(f);var T=this.map[d];this.map[d]=T?T+", "+f:f},F.prototype.delete=function(d){delete this.map[A(d)]},F.prototype.get=function(d){return d=A(d),this.has(d)?this.map[d]:null},F.prototype.has=function(d){return this.map.hasOwnProperty(A(d))},F.prototype.set=function(d,f){this.map[A(d)]=B(f)},F.prototype.forEach=function(d,f){for(var T in this.map)this.map.hasOwnProperty(T)&&d.call(f,this.map[T],T,this)},F.prototype.keys=function(){var d=[];return this.forEach(function(f,T){d.push(T)}),V(d)},F.prototype.values=function(){var d=[];return this.forEach(function(f){d.push(f)}),V(d)},F.prototype.entries=function(){var d=[];return this.forEach(function(f,T){d.push([T,f])}),V(d)},w.iterable&&(F.prototype[Symbol.iterator]=F.prototype.entries);function oe(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function re(d){return new Promise(function(f,T){d.onload=function(){f(d.result)},d.onerror=function(){T(d.error)}})}function ae(d){var f=new FileReader,T=re(f);return f.readAsArrayBuffer(d),T}function I(d){var f=new FileReader,T=re(f);return f.readAsText(d),T}function N(d){for(var f=new Uint8Array(d),T=new Array(f.length),H=0;H<f.length;H++)T[H]=String.fromCharCode(f[H]);return T.join("")}function $(d){if(d.slice)return d.slice(0);var f=new Uint8Array(d.byteLength);return f.set(new Uint8Array(d)),f.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:w.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:w.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:w.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():w.arrayBuffer&&w.blob&&x(d)?(this._bodyArrayBuffer=$(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):w.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||O(d))?this._bodyArrayBuffer=$(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):w.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w.blob&&(this.blob=function(){var d=oe(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?oe(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var d=oe(this);if(d)return d;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w.formData&&(this.formData=function(){return this.text().then(le)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(d){var f=d.toUpperCase();return U.indexOf(f)>-1?f:d}function R(d,f){f=f||{};var T=f.body;if(d instanceof R){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,f.headers||(this.headers=new F(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!T&&d._bodyInit!=null&&(T=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new F(f.headers)),this.method=Q(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(T)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})};function le(d){var f=new FormData;return d.trim().split("&").forEach(function(T){if(T){var H=T.split("="),G=H.shift().replace(/\+/g," "),S=H.join("=").replace(/\+/g," ");f.append(decodeURIComponent(G),decodeURIComponent(S))}}),f}function l(d){var f=new F,T=d.replace(/\r?\n[\t ]+/g," ");return T.split(/\r?\n/).forEach(function(H){var G=H.split(":"),S=G.shift().trim();if(S){var K=G.join(":").trim();f.append(S,K)}}),f}D.call(R.prototype);function p(d,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new F(f.headers),this.url=f.url||"",this._initBody(d)}D.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new F(this.headers),url:this.url})},p.error=function(){var d=new p(null,{status:0,statusText:""});return d.type="error",d};var g=[301,302,303,307,308];p.redirect=function(d,f){if(g.indexOf(f)===-1)throw new RangeError("Invalid status code");return new p(null,{status:f,headers:{location:d}})},y.DOMException=u.DOMException;try{new y.DOMException}catch{y.DOMException=function(f,T){this.message=f,this.name=T;var H=Error(f);this.stack=H.stack},y.DOMException.prototype=Object.create(Error.prototype),y.DOMException.prototype.constructor=y.DOMException}function E(d,f){return new Promise(function(T,H){var G=new R(d,f);if(G.signal&&G.signal.aborted)return H(new y.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function K(){S.abort()}S.onload=function(){var te={status:S.status,statusText:S.statusText,headers:l(S.getAllResponseHeaders()||"")};te.url="responseURL"in S?S.responseURL:te.headers.get("X-Request-URL");var ne="response"in S?S.response:S.responseText;T(new p(ne,te))},S.onerror=function(){H(new TypeError("Network request failed"))},S.ontimeout=function(){H(new TypeError("Network request failed"))},S.onabort=function(){H(new y.DOMException("Aborted","AbortError"))},S.open(G.method,G.url,!0),G.credentials==="include"?S.withCredentials=!0:G.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&w.blob&&(S.responseType="blob"),G.headers.forEach(function(te,ne){S.setRequestHeader(ne,te)}),G.signal&&(G.signal.addEventListener("abort",K),S.onreadystatechange=function(){S.readyState===4&&G.signal.removeEventListener("abort",K)}),S.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return E.polyfill=!0,u.fetch||(u.fetch=E,u.Headers=F,u.Request=R,u.Response=p),y.Headers=F,y.Request=R,y.Response=p,y.fetch=E,Object.defineProperty(y,"__esModule",{value:!0}),y})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(au,au.exports);var Jh=xw(au.exports);const XP=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),ZP=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=i.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function ex(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return ZP(i)}catch{return i}}function Qh(i){return typeof i=="string"?i:XP(i)||""}const tx="PARSE_ERROR",rx="INVALID_REQUEST",nx="METHOD_NOT_FOUND",ix="INVALID_PARAMS",Lp="INTERNAL_ERROR",Lu="SERVER_ERROR",sx=[-32700,-32600,-32601,-32602,-32603],ws={[tx]:{code:-32700,message:"Parse error"},[rx]:{code:-32600,message:"Invalid Request"},[nx]:{code:-32601,message:"Method not found"},[ix]:{code:-32602,message:"Invalid params"},[Lp]:{code:-32603,message:"Internal error"},[Lu]:{code:-32e3,message:"Server error"}},Up=Lu;function ox(i){return sx.includes(i)}function Yh(i){return Object.keys(ws).includes(i)?ws[i]:ws[Up]}function ax(i){const e=Object.values(ws).find(r=>r.code===i);return e||ws[Up]}function cx(i,e,r){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):i}var ux={},Mp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,u,y,w,x,b,O,A,B,V,F,oe,re,ae,I,N,$,D,U,Q;(function(R){var le=typeof je=="object"?je:typeof self=="object"?self:typeof this=="object"?this:{};R(l(le,l(i.exports)));function l(p,g){return p!==le&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(E,d){return p[E]=g?g(E,d):d}}})(function(R){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)p.hasOwnProperty(g)&&(l[g]=p[g])};e=function(l,p){le(l,p);function g(){this.constructor=l}l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},r=Object.assign||function(l){for(var p,g=1,E=arguments.length;g<E;g++){p=arguments[g];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(l[d]=p[d])}return l},s=function(l,p){var g={};for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&p.indexOf(E)<0&&(g[E]=l[E]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(l);d<E.length;d++)p.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(l,E[d])&&(g[E[d]]=l[E[d]]);return g},o=function(l,p,g,E){var d=arguments.length,f=d<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,p,g,E);else for(var H=l.length-1;H>=0;H--)(T=l[H])&&(f=(d<3?T(f):d>3?T(p,g,f):T(p,g))||f);return d>3&&f&&Object.defineProperty(p,g,f),f},u=function(l,p){return function(g,E){p(g,E,l)}},y=function(l,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,p)},w=function(l,p,g,E){function d(f){return f instanceof g?f:new g(function(T){T(f)})}return new(g||(g=Promise))(function(f,T){function H(K){try{S(E.next(K))}catch(te){T(te)}}function G(K){try{S(E.throw(K))}catch(te){T(te)}}function S(K){K.done?f(K.value):d(K.value).then(H,G)}S((E=E.apply(l,p||[])).next())})},x=function(l,p){var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,T;return T={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function H(S){return function(K){return G([S,K])}}function G(S){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,d&&(f=S[0]&2?d.return:S[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,S[1])).done)return f;switch(d=0,f&&(S=[S[0]&2,f.value]),S[0]){case 0:case 1:f=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,d=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(f=g.trys,!(f=f.length>0&&f[f.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!f||S[1]>f[0]&&S[1]<f[3])){g.label=S[1];break}if(S[0]===6&&g.label<f[1]){g.label=f[1],f=S;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(S);break}f[2]&&g.ops.pop(),g.trys.pop();continue}S=p.call(l,g)}catch(K){S=[6,K],d=0}finally{E=f=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Q=function(l,p,g,E){E===void 0&&(E=g),l[E]=p[g]},b=function(l,p){for(var g in l)g!=="default"&&!p.hasOwnProperty(g)&&(p[g]=l[g])},O=function(l){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&l[p],E=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&E>=l.length&&(l=void 0),{value:l&&l[E++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(l,p){var g=typeof Symbol=="function"&&l[Symbol.iterator];if(!g)return l;var E=g.call(l),d,f=[],T;try{for(;(p===void 0||p-->0)&&!(d=E.next()).done;)f.push(d.value)}catch(H){T={error:H}}finally{try{d&&!d.done&&(g=E.return)&&g.call(E)}finally{if(T)throw T.error}}return f},B=function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(A(arguments[p]));return l},V=function(){for(var l=0,p=0,g=arguments.length;p<g;p++)l+=arguments[p].length;for(var E=Array(l),d=0,p=0;p<g;p++)for(var f=arguments[p],T=0,H=f.length;T<H;T++,d++)E[d]=f[T];return E},F=function(l){return this instanceof F?(this.v=l,this):new F(l)},oe=function(l,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=g.apply(l,p||[]),d,f=[];return d={},T("next"),T("throw"),T("return"),d[Symbol.asyncIterator]=function(){return this},d;function T(ne){E[ne]&&(d[ne]=function(ye){return new Promise(function(We,we){f.push([ne,ye,We,we])>1||H(ne,ye)})})}function H(ne,ye){try{G(E[ne](ye))}catch(We){te(f[0][3],We)}}function G(ne){ne.value instanceof F?Promise.resolve(ne.value.v).then(S,K):te(f[0][2],ne)}function S(ne){H("next",ne)}function K(ne){H("throw",ne)}function te(ne,ye){ne(ye),f.shift(),f.length&&H(f[0][0],f[0][1])}},re=function(l){var p,g;return p={},E("next"),E("throw",function(d){throw d}),E("return"),p[Symbol.iterator]=function(){return this},p;function E(d,f){p[d]=l[d]?function(T){return(g=!g)?{value:F(l[d](T)),done:d==="return"}:f?f(T):T}:f}},ae=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l[Symbol.asyncIterator],g;return p?p.call(l):(l=typeof O=="function"?O(l):l[Symbol.iterator](),g={},E("next"),E("throw"),E("return"),g[Symbol.asyncIterator]=function(){return this},g);function E(f){g[f]=l[f]&&function(T){return new Promise(function(H,G){T=l[f](T),d(H,G,T.done,T.value)})}}function d(f,T,H,G){Promise.resolve(G).then(function(S){f({value:S,done:H})},T)}},I=function(l,p){return Object.defineProperty?Object.defineProperty(l,"raw",{value:p}):l.raw=p,l},N=function(l){if(l&&l.__esModule)return l;var p={};if(l!=null)for(var g in l)Object.hasOwnProperty.call(l,g)&&(p[g]=l[g]);return p.default=l,p},$=function(l){return l&&l.__esModule?l:{default:l}},D=function(l,p){if(!p.has(l))throw new TypeError("attempted to get private field on non-instance");return p.get(l)},U=function(l,p,g){if(!p.has(l))throw new TypeError("attempted to set private field on non-instance");return p.set(l,g),g},R("__extends",e),R("__assign",r),R("__rest",s),R("__decorate",o),R("__param",u),R("__metadata",y),R("__awaiter",w),R("__generator",x),R("__exportStar",b),R("__createBinding",Q),R("__values",O),R("__read",A),R("__spread",B),R("__spreadArrays",V),R("__await",F),R("__asyncGenerator",oe),R("__asyncDelegator",re),R("__asyncValues",ae),R("__makeTemplateObject",I),R("__importStar",N),R("__importDefault",$),R("__classPrivateFieldGet",D),R("__classPrivateFieldSet",U)})})(Mp);var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.isBrowserCryptoAvailable=jn.getSubtleCrypto=jn.getBrowerCrypto=void 0;function Uu(){return(je===null||je===void 0?void 0:je.crypto)||(je===null||je===void 0?void 0:je.msCrypto)||{}}jn.getBrowerCrypto=Uu;function qp(){const i=Uu();return i.subtle||i.webkitSubtle}jn.getSubtleCrypto=qp;function lx(){return!!Uu()&&!!qp()}jn.isBrowserCryptoAvailable=lx;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.isBrowser=Fn.isNode=Fn.isReactNative=void 0;function zp(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Fn.isReactNative=zp;function Bp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Fn.isNode=Bp;function fx(){return!zp()&&!Bp()}Fn.isBrowser=fx;(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Mp.exports;e.__exportStar(jn,i),e.__exportStar(Fn,i)})(ux);function Hp(i=3){const e=Date.now()*Math.pow(10,i),r=Math.floor(Math.random()*Math.pow(10,i));return e+r}function hx(i=6){return BigInt(Hp(i))}function dx(i,e,r){return{id:r||Hp(),jsonrpc:"2.0",method:i,params:e}}function px(i,e,r){return{id:i,jsonrpc:"2.0",error:gx(e,r)}}function gx(i,e){return typeof i>"u"?Yh(Lp):(typeof i=="string"&&(i=Object.assign(Object.assign({},Yh(Lu)),{message:i})),typeof e<"u"&&(i.data=e),ox(i.code)&&(i=ax(i.code)),i)}class yx{}class mx extends yx{constructor(){super()}}class vx extends mx{constructor(e){super()}}const _x="^https?:";function wx(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function bx(i,e){const r=wx(i);return typeof r>"u"?!1:new RegExp(e).test(r)}function Xh(i){return bx(i,_x)}function Ex(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Ix(i){return Ex(i)&&(Sx(i)||kp(i))}function Sx(i){return"result"in i}function kp(i){return"error"in i}const Ox={Accept:"application/json","Content-Type":"application/json"},Px="POST",Zh={headers:Ox,method:Px},ed=10;class Mn{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new er.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Xh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=Qh(e),u=await(await Jh(this.url,Object.assign(Object.assign({},Zh),{body:s}))).json();this.onPayload({data:u})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Xh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Qh({id:1,jsonrpc:"2.0",method:"test",params:[]});await Jh(e,Object.assign(Object.assign({},Zh),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ex(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),u=px(e,o);this.events.emit("payload",u)}parseError(e,r=this.url){return cx(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ed&&this.events.setMaxListeners(ed)}}class qn extends vx{constructor(e){super(e),this.events=new er.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(dx(e.method,e.params||[],e.id||hx().toString()),r)}async requestStrict(e,r){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(u){o(u)}this.events.on(`${e.id}`,u=>{kp(u)?o(u.error):s(u.result)});try{await this.connection.send(e,r)}catch(u){o(u)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ix(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const td="error",xx="wss://relay.walletconnect.com",Rx="wc",Tx="universal_provider",rd=`${Rx}@2:${Tx}:`,Ax="https://rpc.walletconnect.com/v1/",vn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cu={exports:{}};(function(i,e){(function(){var r,s="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",y="Expected a function",w="Invalid `variable` option passed into `_.template`",x="__lodash_hash_undefined__",b=500,O="__lodash_placeholder__",A=1,B=2,V=4,F=1,oe=2,re=1,ae=2,I=4,N=8,$=16,D=32,U=64,Q=128,R=256,le=512,l=30,p="...",g=800,E=16,d=1,f=2,T=3,H=1/0,G=9007199254740991,S=17976931348623157e292,K=0/0,te=4294967295,ne=te-1,ye=te>>>1,We=[["ary",Q],["bind",re],["bindKey",ae],["curry",N],["curryRight",$],["flip",le],["partial",D],["partialRight",U],["rearg",R]],we="[object Arguments]",Ur="[object Array]",Y="[object AsyncFunction]",J="[object Boolean]",k="[object Date]",h="[object DOMException]",L="[object Error]",de="[object Function]",be="[object GeneratorFunction]",Pe="[object Map]",Fe="[object Number]",Ue="[object Null]",Ae="[object Object]",Rt="[object Promise]",It="[object Proxy]",ft="[object RegExp]",qe="[object Set]",rt="[object String]",nt="[object Symbol]",ht="[object Undefined]",ke="[object WeakMap]",it="[object WeakSet]",Le="[object ArrayBuffer]",Ge="[object DataView]",gt="[object Float32Array]",Be="[object Float64Array]",Tt="[object Int8Array]",Ut="[object Int16Array]",Wt="[object Int32Array]",Gt="[object Uint8Array]",zt="[object Uint8ClampedArray]",tr="[object Uint16Array]",lr="[object Uint32Array]",Gr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,rn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39);/g,zn=/[&<>"']/g,yt=RegExp(_n.source),at=RegExp(zn.source),mt=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_t=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(_t.source),wt=/^\s+/,St=/\s/,bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ze=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oa=/[()=,{}\[\]\/\s]/,aa=/\\(\\)?/g,ca=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rr=/\w*$/,ua=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,fa=/^\[object .+?Constructor\]$/,ha=/^0o[0-7]+$/i,da=/^(?:0|[1-9]\d*)$/,nn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui=/($^)/,pa=/['\n\r\u2028\u2029\\]/g,li="\\ud800-\\udfff",ga="\\u0300-\\u036f",ya="\\ufe20-\\ufe2f",fi="\\u20d0-\\u20ff",Ns=ga+ya+fi,Cs="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",ma="\\xac\\xb1\\xd7\\xf7",va="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_a="\\u2000-\\u206f",wa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$s="A-Z\\xc0-\\xd6\\xd8-\\xde",Ds="\\ufe0e\\ufe0f",Bn=ma+va+_a+wa,ki="['\u2019]",Hn="["+li+"]",Vi="["+Bn+"]",kn="["+Ns+"]",js="\\d+",ba="["+Cs+"]",Fs="["+Mr+"]",Ls="[^"+li+Bn+js+Cs+Mr+$s+"]",hi="\\ud83c[\\udffb-\\udfff]",Ea="(?:"+kn+"|"+hi+")",Us="[^"+li+"]",di="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+$s+"]",Ms="\\u200d",qs="(?:"+Fs+"|"+Ls+")",Jr="(?:"+br+"|"+Ls+")",zs="(?:"+ki+"(?:d|ll|m|re|s|t|ve))?",Bs="(?:"+ki+"(?:D|LL|M|RE|S|T|VE))?",Hs=Ea+"?",ks="["+Ds+"]?",Ia="(?:"+Ms+"(?:"+[Us,di,wn].join("|")+")"+ks+Hs+")*",sn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ks=ks+Hs+Ia,pi="(?:"+[ba,di,wn].join("|")+")"+Ks,Sa="(?:"+[Us+kn+"?",kn,di,wn,Hn].join("|")+")",Ki=RegExp(ki,"g"),Oa=RegExp(kn,"g"),gi=RegExp(hi+"(?="+hi+")|"+Sa+Ks,"g"),Ws=RegExp([br+"?"+Fs+"+"+zs+"(?="+[Vi,br,"$"].join("|")+")",Jr+"+"+Bs+"(?="+[Vi,br+qs,"$"].join("|")+")",br+"?"+qs+"+"+zs,br+"+"+Bs,Vs,sn,js,pi].join("|"),"g"),Gs=RegExp("["+Ms+li+Ns+Ds+"]"),Vn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Js=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pa=-1,Je={};Je[gt]=Je[Be]=Je[Tt]=Je[Ut]=Je[Wt]=Je[Gt]=Je[zt]=Je[tr]=Je[lr]=!0,Je[we]=Je[Ur]=Je[Le]=Je[J]=Je[Ge]=Je[k]=Je[L]=Je[de]=Je[Pe]=Je[Fe]=Je[Ae]=Je[ft]=Je[qe]=Je[rt]=Je[ke]=!1;var Ve={};Ve[we]=Ve[Ur]=Ve[Le]=Ve[Ge]=Ve[J]=Ve[k]=Ve[gt]=Ve[Be]=Ve[Tt]=Ve[Ut]=Ve[Wt]=Ve[Pe]=Ve[Fe]=Ve[Ae]=Ve[ft]=Ve[qe]=Ve[rt]=Ve[nt]=Ve[Gt]=Ve[zt]=Ve[tr]=Ve[lr]=!0,Ve[L]=Ve[de]=Ve[ke]=!1;var P={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ie={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=parseFloat,Ie=parseInt,st=typeof ds=="object"&&ds&&ds.Object===Object&&ds,jt=typeof self=="object"&&self&&self.Object===Object&&self,Ce=st||jt||Function("return this")(),Ye=e&&!e.nodeType&&e,Ot=Ye&&!0&&i&&!i.nodeType&&i,fr=Ot&&Ot.exports===Ye,Ft=fr&&st.process,ot=function(){try{var q=Ot&&Ot.require&&Ot.require("util").types;return q||Ft&&Ft.binding&&Ft.binding("util")}catch{}}(),nr=ot&&ot.isArrayBuffer,qr=ot&&ot.isDate,Tr=ot&&ot.isMap,Qr=ot&&ot.isRegExp,Wi=ot&&ot.isSet,Kn=ot&&ot.isTypedArray;function Bt(q,X,W){switch(W.length){case 0:return q.call(X);case 1:return q.call(X,W[0]);case 2:return q.call(X,W[0],W[1]);case 3:return q.call(X,W[0],W[1],W[2])}return q.apply(X,W)}function Wp(q,X,W,he){for(var Ee=-1,Me=q==null?0:q.length;++Ee<Me;){var Mt=q[Ee];X(he,Mt,W(Mt),q)}return he}function Ar(q,X){for(var W=-1,he=q==null?0:q.length;++W<he&&X(q[W],W,q)!==!1;);return q}function Gp(q,X){for(var W=q==null?0:q.length;W--&&X(q[W],W,q)!==!1;);return q}function zu(q,X){for(var W=-1,he=q==null?0:q.length;++W<he;)if(!X(q[W],W,q))return!1;return!0}function bn(q,X){for(var W=-1,he=q==null?0:q.length,Ee=0,Me=[];++W<he;){var Mt=q[W];X(Mt,W,q)&&(Me[Ee++]=Mt)}return Me}function Qs(q,X){var W=q==null?0:q.length;return!!W&&yi(q,X,0)>-1}function xa(q,X,W){for(var he=-1,Ee=q==null?0:q.length;++he<Ee;)if(W(X,q[he]))return!0;return!1}function ut(q,X){for(var W=-1,he=q==null?0:q.length,Ee=Array(he);++W<he;)Ee[W]=X(q[W],W,q);return Ee}function En(q,X){for(var W=-1,he=X.length,Ee=q.length;++W<he;)q[Ee+W]=X[W];return q}function Ra(q,X,W,he){var Ee=-1,Me=q==null?0:q.length;for(he&&Me&&(W=q[++Ee]);++Ee<Me;)W=X(W,q[Ee],Ee,q);return W}function Jp(q,X,W,he){var Ee=q==null?0:q.length;for(he&&Ee&&(W=q[--Ee]);Ee--;)W=X(W,q[Ee],Ee,q);return W}function Ta(q,X){for(var W=-1,he=q==null?0:q.length;++W<he;)if(X(q[W],W,q))return!0;return!1}var Qp=Aa("length");function Yp(q){return q.split("")}function Xp(q){return q.match(Dt)||[]}function Bu(q,X,W){var he;return W(q,function(Ee,Me,Mt){if(X(Ee,Me,Mt))return he=Me,!1}),he}function Ys(q,X,W,he){for(var Ee=q.length,Me=W+(he?1:-1);he?Me--:++Me<Ee;)if(X(q[Me],Me,q))return Me;return-1}function yi(q,X,W){return X===X?lg(q,X,W):Ys(q,Hu,W)}function Zp(q,X,W,he){for(var Ee=W-1,Me=q.length;++Ee<Me;)if(he(q[Ee],X))return Ee;return-1}function Hu(q){return q!==q}function ku(q,X){var W=q==null?0:q.length;return W?Ca(q,X)/W:K}function Aa(q){return function(X){return X==null?r:X[q]}}function Na(q){return function(X){return q==null?r:q[X]}}function Vu(q,X,W,he,Ee){return Ee(q,function(Me,Mt,Xe){W=he?(he=!1,Me):X(W,Me,Mt,Xe)}),W}function eg(q,X){var W=q.length;for(q.sort(X);W--;)q[W]=q[W].value;return q}function Ca(q,X){for(var W,he=-1,Ee=q.length;++he<Ee;){var Me=X(q[he]);Me!==r&&(W=W===r?Me:W+Me)}return W}function $a(q,X){for(var W=-1,he=Array(q);++W<q;)he[W]=X(W);return he}function tg(q,X){return ut(X,function(W){return[W,q[W]]})}function Ku(q){return q&&q.slice(0,Qu(q)+1).replace(wt,"")}function Er(q){return function(X){return q(X)}}function Da(q,X){return ut(X,function(W){return q[W]})}function Gi(q,X){return q.has(X)}function Wu(q,X){for(var W=-1,he=q.length;++W<he&&yi(X,q[W],0)>-1;);return W}function Gu(q,X){for(var W=q.length;W--&&yi(X,q[W],0)>-1;);return W}function rg(q,X){for(var W=q.length,he=0;W--;)q[W]===X&&++he;return he}var ng=Na(P),ig=Na(M);function sg(q){return"\\"+fe[q]}function og(q,X){return q==null?r:q[X]}function mi(q){return Gs.test(q)}function ag(q){return Vn.test(q)}function cg(q){for(var X,W=[];!(X=q.next()).done;)W.push(X.value);return W}function ja(q){var X=-1,W=Array(q.size);return q.forEach(function(he,Ee){W[++X]=[Ee,he]}),W}function Ju(q,X){return function(W){return q(X(W))}}function In(q,X){for(var W=-1,he=q.length,Ee=0,Me=[];++W<he;){var Mt=q[W];(Mt===X||Mt===O)&&(q[W]=O,Me[Ee++]=W)}return Me}function Xs(q){var X=-1,W=Array(q.size);return q.forEach(function(he){W[++X]=he}),W}function ug(q){var X=-1,W=Array(q.size);return q.forEach(function(he){W[++X]=[he,he]}),W}function lg(q,X,W){for(var he=W-1,Ee=q.length;++he<Ee;)if(q[he]===X)return he;return-1}function fg(q,X,W){for(var he=W+1;he--;)if(q[he]===X)return he;return he}function vi(q){return mi(q)?dg(q):Qp(q)}function zr(q){return mi(q)?pg(q):Yp(q)}function Qu(q){for(var X=q.length;X--&&St.test(q.charAt(X)););return X}var hg=Na(ie);function dg(q){for(var X=gi.lastIndex=0;gi.test(q);)++X;return X}function pg(q){return q.match(gi)||[]}function gg(q){return q.match(Ws)||[]}var yg=function q(X){X=X==null?Ce:_i.defaults(Ce.Object(),X,_i.pick(Ce,Js));var W=X.Array,he=X.Date,Ee=X.Error,Me=X.Function,Mt=X.Math,Xe=X.Object,Fa=X.RegExp,mg=X.String,Nr=X.TypeError,Zs=W.prototype,vg=Me.prototype,wi=Xe.prototype,eo=X["__core-js_shared__"],to=vg.toString,He=wi.hasOwnProperty,_g=0,Yu=function(){var t=/[^.]+$/.exec(eo&&eo.keys&&eo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ro=wi.toString,wg=to.call(Xe),bg=Ce._,Eg=Fa("^"+to.call(He).replace(_t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),no=fr?X.Buffer:r,Sn=X.Symbol,io=X.Uint8Array,Xu=no?no.allocUnsafe:r,so=Ju(Xe.getPrototypeOf,Xe),Zu=Xe.create,el=wi.propertyIsEnumerable,oo=Zs.splice,tl=Sn?Sn.isConcatSpreadable:r,Ji=Sn?Sn.iterator:r,Wn=Sn?Sn.toStringTag:r,ao=function(){try{var t=Xn(Xe,"defineProperty");return t({},"",{}),t}catch{}}(),Ig=X.clearTimeout!==Ce.clearTimeout&&X.clearTimeout,Sg=he&&he.now!==Ce.Date.now&&he.now,Og=X.setTimeout!==Ce.setTimeout&&X.setTimeout,co=Mt.ceil,uo=Mt.floor,La=Xe.getOwnPropertySymbols,Pg=no?no.isBuffer:r,rl=X.isFinite,xg=Zs.join,Rg=Ju(Xe.keys,Xe),qt=Mt.max,Yt=Mt.min,Tg=he.now,Ag=X.parseInt,nl=Mt.random,Ng=Zs.reverse,Ua=Xn(X,"DataView"),Qi=Xn(X,"Map"),Ma=Xn(X,"Promise"),bi=Xn(X,"Set"),Yi=Xn(X,"WeakMap"),Xi=Xn(Xe,"create"),lo=Yi&&new Yi,Ei={},Cg=Zn(Ua),$g=Zn(Qi),Dg=Zn(Ma),jg=Zn(bi),Fg=Zn(Yi),fo=Sn?Sn.prototype:r,Zi=fo?fo.valueOf:r,il=fo?fo.toString:r;function v(t){if(Et(t)&&!Se(t)&&!(t instanceof Ne)){if(t instanceof Cr)return t;if(He.call(t,"__wrapped__"))return of(t)}return new Cr(t)}var Ii=function(){function t(){}return function(n){if(!pt(n))return{};if(Zu)return Zu(n);t.prototype=n;var a=new t;return t.prototype=r,a}}();function ho(){}function Cr(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}v.templateSettings={escape:mt,evaluate:vt,interpolate:dt,variable:"",imports:{_:v}},v.prototype=ho.prototype,v.prototype.constructor=v,Cr.prototype=Ii(ho.prototype),Cr.prototype.constructor=Cr;function Ne(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Lg(){var t=new Ne(this.__wrapped__);return t.__actions__=hr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=hr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=hr(this.__views__),t}function Ug(){if(this.__filtered__){var t=new Ne(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Mg(){var t=this.__wrapped__.value(),n=this.__dir__,a=Se(t),c=n<0,m=a?t.length:0,_=Yy(0,m,this.__views__),C=_.start,j=_.end,z=j-C,Z=c?j:C-1,ee=this.__iteratees__,se=ee.length,ue=0,pe=Yt(z,this.__takeCount__);if(!a||!c&&m==z&&pe==z)return Rl(t,this.__actions__);var ve=[];e:for(;z--&&ue<pe;){Z+=n;for(var xe=-1,_e=t[Z];++xe<se;){var Te=ee[xe],$e=Te.iteratee,Or=Te.type,or=$e(_e);if(Or==f)_e=or;else if(!or){if(Or==d)continue e;break e}}ve[ue++]=_e}return ve}Ne.prototype=Ii(ho.prototype),Ne.prototype.constructor=Ne;function Gn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var c=t[n];this.set(c[0],c[1])}}function qg(){this.__data__=Xi?Xi(null):{},this.size=0}function zg(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Bg(t){var n=this.__data__;if(Xi){var a=n[t];return a===x?r:a}return He.call(n,t)?n[t]:r}function Hg(t){var n=this.__data__;return Xi?n[t]!==r:He.call(n,t)}function kg(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Xi&&n===r?x:n,this}Gn.prototype.clear=qg,Gn.prototype.delete=zg,Gn.prototype.get=Bg,Gn.prototype.has=Hg,Gn.prototype.set=kg;function on(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var c=t[n];this.set(c[0],c[1])}}function Vg(){this.__data__=[],this.size=0}function Kg(t){var n=this.__data__,a=po(n,t);if(a<0)return!1;var c=n.length-1;return a==c?n.pop():oo.call(n,a,1),--this.size,!0}function Wg(t){var n=this.__data__,a=po(n,t);return a<0?r:n[a][1]}function Gg(t){return po(this.__data__,t)>-1}function Jg(t,n){var a=this.__data__,c=po(a,t);return c<0?(++this.size,a.push([t,n])):a[c][1]=n,this}on.prototype.clear=Vg,on.prototype.delete=Kg,on.prototype.get=Wg,on.prototype.has=Gg,on.prototype.set=Jg;function an(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var c=t[n];this.set(c[0],c[1])}}function Qg(){this.size=0,this.__data__={hash:new Gn,map:new(Qi||on),string:new Gn}}function Yg(t){var n=Po(this,t).delete(t);return this.size-=n?1:0,n}function Xg(t){return Po(this,t).get(t)}function Zg(t){return Po(this,t).has(t)}function ey(t,n){var a=Po(this,t),c=a.size;return a.set(t,n),this.size+=a.size==c?0:1,this}an.prototype.clear=Qg,an.prototype.delete=Yg,an.prototype.get=Xg,an.prototype.has=Zg,an.prototype.set=ey;function Jn(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new an;++n<a;)this.add(t[n])}function ty(t){return this.__data__.set(t,x),this}function ry(t){return this.__data__.has(t)}Jn.prototype.add=Jn.prototype.push=ty,Jn.prototype.has=ry;function Br(t){var n=this.__data__=new on(t);this.size=n.size}function ny(){this.__data__=new on,this.size=0}function iy(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function sy(t){return this.__data__.get(t)}function oy(t){return this.__data__.has(t)}function ay(t,n){var a=this.__data__;if(a instanceof on){var c=a.__data__;if(!Qi||c.length<o-1)return c.push([t,n]),this.size=++a.size,this;a=this.__data__=new an(c)}return a.set(t,n),this.size=a.size,this}Br.prototype.clear=ny,Br.prototype.delete=iy,Br.prototype.get=sy,Br.prototype.has=oy,Br.prototype.set=ay;function sl(t,n){var a=Se(t),c=!a&&ei(t),m=!a&&!c&&Tn(t),_=!a&&!c&&!m&&xi(t),C=a||c||m||_,j=C?$a(t.length,mg):[],z=j.length;for(var Z in t)(n||He.call(t,Z))&&!(C&&(Z=="length"||m&&(Z=="offset"||Z=="parent")||_&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||fn(Z,z)))&&j.push(Z);return j}function ol(t){var n=t.length;return n?t[Qa(0,n-1)]:r}function cy(t,n){return xo(hr(t),Qn(n,0,t.length))}function uy(t){return xo(hr(t))}function qa(t,n,a){(a!==r&&!Hr(t[n],a)||a===r&&!(n in t))&&cn(t,n,a)}function es(t,n,a){var c=t[n];(!(He.call(t,n)&&Hr(c,a))||a===r&&!(n in t))&&cn(t,n,a)}function po(t,n){for(var a=t.length;a--;)if(Hr(t[a][0],n))return a;return-1}function ly(t,n,a,c){return On(t,function(m,_,C){n(c,m,a(m),C)}),c}function al(t,n){return t&&Xr(n,Ht(n),t)}function fy(t,n){return t&&Xr(n,pr(n),t)}function cn(t,n,a){n=="__proto__"&&ao?ao(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}function za(t,n){for(var a=-1,c=n.length,m=W(c),_=t==null;++a<c;)m[a]=_?r:bc(t,n[a]);return m}function Qn(t,n,a){return t===t&&(a!==r&&(t=t<=a?t:a),n!==r&&(t=t>=n?t:n)),t}function $r(t,n,a,c,m,_){var C,j=n&A,z=n&B,Z=n&V;if(a&&(C=m?a(t,c,m,_):a(t)),C!==r)return C;if(!pt(t))return t;var ee=Se(t);if(ee){if(C=Zy(t),!j)return hr(t,C)}else{var se=Xt(t),ue=se==de||se==be;if(Tn(t))return Nl(t,j);if(se==Ae||se==we||ue&&!m){if(C=z||ue?{}:Ql(t),!j)return z?By(t,fy(C,t)):zy(t,al(C,t))}else{if(!Ve[se])return m?t:{};C=em(t,se,j)}}_||(_=new Br);var pe=_.get(t);if(pe)return pe;_.set(t,C),Pf(t)?t.forEach(function(_e){C.add($r(_e,n,a,_e,t,_))}):Sf(t)&&t.forEach(function(_e,Te){C.set(Te,$r(_e,n,a,Te,t,_))});var ve=Z?z?ac:oc:z?pr:Ht,xe=ee?r:ve(t);return Ar(xe||t,function(_e,Te){xe&&(Te=_e,_e=t[Te]),es(C,Te,$r(_e,n,a,Te,t,_))}),C}function hy(t){var n=Ht(t);return function(a){return cl(a,t,n)}}function cl(t,n,a){var c=a.length;if(t==null)return!c;for(t=Xe(t);c--;){var m=a[c],_=n[m],C=t[m];if(C===r&&!(m in t)||!_(C))return!1}return!0}function ul(t,n,a){if(typeof t!="function")throw new Nr(y);return as(function(){t.apply(r,a)},n)}function ts(t,n,a,c){var m=-1,_=Qs,C=!0,j=t.length,z=[],Z=n.length;if(!j)return z;a&&(n=ut(n,Er(a))),c?(_=xa,C=!1):n.length>=o&&(_=Gi,C=!1,n=new Jn(n));e:for(;++m<j;){var ee=t[m],se=a==null?ee:a(ee);if(ee=c||ee!==0?ee:0,C&&se===se){for(var ue=Z;ue--;)if(n[ue]===se)continue e;z.push(ee)}else _(n,se,c)||z.push(ee)}return z}var On=Fl(Yr),ll=Fl(Ha,!0);function dy(t,n){var a=!0;return On(t,function(c,m,_){return a=!!n(c,m,_),a}),a}function go(t,n,a){for(var c=-1,m=t.length;++c<m;){var _=t[c],C=n(_);if(C!=null&&(j===r?C===C&&!Sr(C):a(C,j)))var j=C,z=_}return z}function py(t,n,a,c){var m=t.length;for(a=Oe(a),a<0&&(a=-a>m?0:m+a),c=c===r||c>m?m:Oe(c),c<0&&(c+=m),c=a>c?0:Rf(c);a<c;)t[a++]=n;return t}function fl(t,n){var a=[];return On(t,function(c,m,_){n(c,m,_)&&a.push(c)}),a}function Jt(t,n,a,c,m){var _=-1,C=t.length;for(a||(a=rm),m||(m=[]);++_<C;){var j=t[_];n>0&&a(j)?n>1?Jt(j,n-1,a,c,m):En(m,j):c||(m[m.length]=j)}return m}var Ba=Ll(),hl=Ll(!0);function Yr(t,n){return t&&Ba(t,n,Ht)}function Ha(t,n){return t&&hl(t,n,Ht)}function yo(t,n){return bn(n,function(a){return hn(t[a])})}function Yn(t,n){n=xn(n,t);for(var a=0,c=n.length;t!=null&&a<c;)t=t[Zr(n[a++])];return a&&a==c?t:r}function dl(t,n,a){var c=n(t);return Se(t)?c:En(c,a(t))}function ir(t){return t==null?t===r?ht:Ue:Wn&&Wn in Xe(t)?Qy(t):um(t)}function ka(t,n){return t>n}function gy(t,n){return t!=null&&He.call(t,n)}function yy(t,n){return t!=null&&n in Xe(t)}function my(t,n,a){return t>=Yt(n,a)&&t<qt(n,a)}function Va(t,n,a){for(var c=a?xa:Qs,m=t[0].length,_=t.length,C=_,j=W(_),z=1/0,Z=[];C--;){var ee=t[C];C&&n&&(ee=ut(ee,Er(n))),z=Yt(ee.length,z),j[C]=!a&&(n||m>=120&&ee.length>=120)?new Jn(C&&ee):r}ee=t[0];var se=-1,ue=j[0];e:for(;++se<m&&Z.length<z;){var pe=ee[se],ve=n?n(pe):pe;if(pe=a||pe!==0?pe:0,!(ue?Gi(ue,ve):c(Z,ve,a))){for(C=_;--C;){var xe=j[C];if(!(xe?Gi(xe,ve):c(t[C],ve,a)))continue e}ue&&ue.push(ve),Z.push(pe)}}return Z}function vy(t,n,a,c){return Yr(t,function(m,_,C){n(c,a(m),_,C)}),c}function rs(t,n,a){n=xn(n,t),t=ef(t,n);var c=t==null?t:t[Zr(jr(n))];return c==null?r:Bt(c,t,a)}function pl(t){return Et(t)&&ir(t)==we}function _y(t){return Et(t)&&ir(t)==Le}function wy(t){return Et(t)&&ir(t)==k}function ns(t,n,a,c,m){return t===n?!0:t==null||n==null||!Et(t)&&!Et(n)?t!==t&&n!==n:by(t,n,a,c,ns,m)}function by(t,n,a,c,m,_){var C=Se(t),j=Se(n),z=C?Ur:Xt(t),Z=j?Ur:Xt(n);z=z==we?Ae:z,Z=Z==we?Ae:Z;var ee=z==Ae,se=Z==Ae,ue=z==Z;if(ue&&Tn(t)){if(!Tn(n))return!1;C=!0,ee=!1}if(ue&&!ee)return _||(_=new Br),C||xi(t)?Wl(t,n,a,c,m,_):Gy(t,n,z,a,c,m,_);if(!(a&F)){var pe=ee&&He.call(t,"__wrapped__"),ve=se&&He.call(n,"__wrapped__");if(pe||ve){var xe=pe?t.value():t,_e=ve?n.value():n;return _||(_=new Br),m(xe,_e,a,c,_)}}return ue?(_||(_=new Br),Jy(t,n,a,c,m,_)):!1}function Ey(t){return Et(t)&&Xt(t)==Pe}function Ka(t,n,a,c){var m=a.length,_=m,C=!c;if(t==null)return!_;for(t=Xe(t);m--;){var j=a[m];if(C&&j[2]?j[1]!==t[j[0]]:!(j[0]in t))return!1}for(;++m<_;){j=a[m];var z=j[0],Z=t[z],ee=j[1];if(C&&j[2]){if(Z===r&&!(z in t))return!1}else{var se=new Br;if(c)var ue=c(Z,ee,z,t,n,se);if(!(ue===r?ns(ee,Z,F|oe,c,se):ue))return!1}}return!0}function gl(t){if(!pt(t)||im(t))return!1;var n=hn(t)?Eg:fa;return n.test(Zn(t))}function Iy(t){return Et(t)&&ir(t)==ft}function Sy(t){return Et(t)&&Xt(t)==qe}function Oy(t){return Et(t)&&$o(t.length)&&!!Je[ir(t)]}function yl(t){return typeof t=="function"?t:t==null?gr:typeof t=="object"?Se(t)?_l(t[0],t[1]):vl(t):Mf(t)}function Wa(t){if(!os(t))return Rg(t);var n=[];for(var a in Xe(t))He.call(t,a)&&a!="constructor"&&n.push(a);return n}function Py(t){if(!pt(t))return cm(t);var n=os(t),a=[];for(var c in t)c=="constructor"&&(n||!He.call(t,c))||a.push(c);return a}function Ga(t,n){return t<n}function ml(t,n){var a=-1,c=dr(t)?W(t.length):[];return On(t,function(m,_,C){c[++a]=n(m,_,C)}),c}function vl(t){var n=uc(t);return n.length==1&&n[0][2]?Xl(n[0][0],n[0][1]):function(a){return a===t||Ka(a,t,n)}}function _l(t,n){return fc(t)&&Yl(n)?Xl(Zr(t),n):function(a){var c=bc(a,t);return c===r&&c===n?Ec(a,t):ns(n,c,F|oe)}}function mo(t,n,a,c,m){t!==n&&Ba(n,function(_,C){if(m||(m=new Br),pt(_))xy(t,n,C,a,mo,c,m);else{var j=c?c(dc(t,C),_,C+"",t,n,m):r;j===r&&(j=_),qa(t,C,j)}},pr)}function xy(t,n,a,c,m,_,C){var j=dc(t,a),z=dc(n,a),Z=C.get(z);if(Z){qa(t,a,Z);return}var ee=_?_(j,z,a+"",t,n,C):r,se=ee===r;if(se){var ue=Se(z),pe=!ue&&Tn(z),ve=!ue&&!pe&&xi(z);ee=z,ue||pe||ve?Se(j)?ee=j:Pt(j)?ee=hr(j):pe?(se=!1,ee=Nl(z,!0)):ve?(se=!1,ee=Cl(z,!0)):ee=[]:cs(z)||ei(z)?(ee=j,ei(j)?ee=Tf(j):(!pt(j)||hn(j))&&(ee=Ql(z))):se=!1}se&&(C.set(z,ee),m(ee,z,c,_,C),C.delete(z)),qa(t,a,ee)}function wl(t,n){var a=t.length;if(a)return n+=n<0?a:0,fn(n,a)?t[n]:r}function bl(t,n,a){n.length?n=ut(n,function(_){return Se(_)?function(C){return Yn(C,_.length===1?_[0]:_)}:_}):n=[gr];var c=-1;n=ut(n,Er(me()));var m=ml(t,function(_,C,j){var z=ut(n,function(Z){return Z(_)});return{criteria:z,index:++c,value:_}});return eg(m,function(_,C){return qy(_,C,a)})}function Ry(t,n){return El(t,n,function(a,c){return Ec(t,c)})}function El(t,n,a){for(var c=-1,m=n.length,_={};++c<m;){var C=n[c],j=Yn(t,C);a(j,C)&&is(_,xn(C,t),j)}return _}function Ty(t){return function(n){return Yn(n,t)}}function Ja(t,n,a,c){var m=c?Zp:yi,_=-1,C=n.length,j=t;for(t===n&&(n=hr(n)),a&&(j=ut(t,Er(a)));++_<C;)for(var z=0,Z=n[_],ee=a?a(Z):Z;(z=m(j,ee,z,c))>-1;)j!==t&&oo.call(j,z,1),oo.call(t,z,1);return t}function Il(t,n){for(var a=t?n.length:0,c=a-1;a--;){var m=n[a];if(a==c||m!==_){var _=m;fn(m)?oo.call(t,m,1):Za(t,m)}}return t}function Qa(t,n){return t+uo(nl()*(n-t+1))}function Ay(t,n,a,c){for(var m=-1,_=qt(co((n-t)/(a||1)),0),C=W(_);_--;)C[c?_:++m]=t,t+=a;return C}function Ya(t,n){var a="";if(!t||n<1||n>G)return a;do n%2&&(a+=t),n=uo(n/2),n&&(t+=t);while(n);return a}function Re(t,n){return pc(Zl(t,n,gr),t+"")}function Ny(t){return ol(Ri(t))}function Cy(t,n){var a=Ri(t);return xo(a,Qn(n,0,a.length))}function is(t,n,a,c){if(!pt(t))return t;n=xn(n,t);for(var m=-1,_=n.length,C=_-1,j=t;j!=null&&++m<_;){var z=Zr(n[m]),Z=a;if(z==="__proto__"||z==="constructor"||z==="prototype")return t;if(m!=C){var ee=j[z];Z=c?c(ee,z,j):r,Z===r&&(Z=pt(ee)?ee:fn(n[m+1])?[]:{})}es(j,z,Z),j=j[z]}return t}var Sl=lo?function(t,n){return lo.set(t,n),t}:gr,$y=ao?function(t,n){return ao(t,"toString",{configurable:!0,enumerable:!1,value:Sc(n),writable:!0})}:gr;function Dy(t){return xo(Ri(t))}function Dr(t,n,a){var c=-1,m=t.length;n<0&&(n=-n>m?0:m+n),a=a>m?m:a,a<0&&(a+=m),m=n>a?0:a-n>>>0,n>>>=0;for(var _=W(m);++c<m;)_[c]=t[c+n];return _}function jy(t,n){var a;return On(t,function(c,m,_){return a=n(c,m,_),!a}),!!a}function vo(t,n,a){var c=0,m=t==null?c:t.length;if(typeof n=="number"&&n===n&&m<=ye){for(;c<m;){var _=c+m>>>1,C=t[_];C!==null&&!Sr(C)&&(a?C<=n:C<n)?c=_+1:m=_}return m}return Xa(t,n,gr,a)}function Xa(t,n,a,c){var m=0,_=t==null?0:t.length;if(_===0)return 0;n=a(n);for(var C=n!==n,j=n===null,z=Sr(n),Z=n===r;m<_;){var ee=uo((m+_)/2),se=a(t[ee]),ue=se!==r,pe=se===null,ve=se===se,xe=Sr(se);if(C)var _e=c||ve;else Z?_e=ve&&(c||ue):j?_e=ve&&ue&&(c||!pe):z?_e=ve&&ue&&!pe&&(c||!xe):pe||xe?_e=!1:_e=c?se<=n:se<n;_e?m=ee+1:_=ee}return Yt(_,ne)}function Ol(t,n){for(var a=-1,c=t.length,m=0,_=[];++a<c;){var C=t[a],j=n?n(C):C;if(!a||!Hr(j,z)){var z=j;_[m++]=C===0?0:C}}return _}function Pl(t){return typeof t=="number"?t:Sr(t)?K:+t}function Ir(t){if(typeof t=="string")return t;if(Se(t))return ut(t,Ir)+"";if(Sr(t))return il?il.call(t):"";var n=t+"";return n=="0"&&1/t==-H?"-0":n}function Pn(t,n,a){var c=-1,m=Qs,_=t.length,C=!0,j=[],z=j;if(a)C=!1,m=xa;else if(_>=o){var Z=n?null:Ky(t);if(Z)return Xs(Z);C=!1,m=Gi,z=new Jn}else z=n?[]:j;e:for(;++c<_;){var ee=t[c],se=n?n(ee):ee;if(ee=a||ee!==0?ee:0,C&&se===se){for(var ue=z.length;ue--;)if(z[ue]===se)continue e;n&&z.push(se),j.push(ee)}else m(z,se,a)||(z!==j&&z.push(se),j.push(ee))}return j}function Za(t,n){return n=xn(n,t),t=ef(t,n),t==null||delete t[Zr(jr(n))]}function xl(t,n,a,c){return is(t,n,a(Yn(t,n)),c)}function _o(t,n,a,c){for(var m=t.length,_=c?m:-1;(c?_--:++_<m)&&n(t[_],_,t););return a?Dr(t,c?0:_,c?_+1:m):Dr(t,c?_+1:0,c?m:_)}function Rl(t,n){var a=t;return a instanceof Ne&&(a=a.value()),Ra(n,function(c,m){return m.func.apply(m.thisArg,En([c],m.args))},a)}function ec(t,n,a){var c=t.length;if(c<2)return c?Pn(t[0]):[];for(var m=-1,_=W(c);++m<c;)for(var C=t[m],j=-1;++j<c;)j!=m&&(_[m]=ts(_[m]||C,t[j],n,a));return Pn(Jt(_,1),n,a)}function Tl(t,n,a){for(var c=-1,m=t.length,_=n.length,C={};++c<m;){var j=c<_?n[c]:r;a(C,t[c],j)}return C}function tc(t){return Pt(t)?t:[]}function rc(t){return typeof t=="function"?t:gr}function xn(t,n){return Se(t)?t:fc(t,n)?[t]:sf(ze(t))}var Fy=Re;function Rn(t,n,a){var c=t.length;return a=a===r?c:a,!n&&a>=c?t:Dr(t,n,a)}var Al=Ig||function(t){return Ce.clearTimeout(t)};function Nl(t,n){if(n)return t.slice();var a=t.length,c=Xu?Xu(a):new t.constructor(a);return t.copy(c),c}function nc(t){var n=new t.constructor(t.byteLength);return new io(n).set(new io(t)),n}function Ly(t,n){var a=n?nc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function Uy(t){var n=new t.constructor(t.source,Rr.exec(t));return n.lastIndex=t.lastIndex,n}function My(t){return Zi?Xe(Zi.call(t)):{}}function Cl(t,n){var a=n?nc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function $l(t,n){if(t!==n){var a=t!==r,c=t===null,m=t===t,_=Sr(t),C=n!==r,j=n===null,z=n===n,Z=Sr(n);if(!j&&!Z&&!_&&t>n||_&&C&&z&&!j&&!Z||c&&C&&z||!a&&z||!m)return 1;if(!c&&!_&&!Z&&t<n||Z&&a&&m&&!c&&!_||j&&a&&m||!C&&m||!z)return-1}return 0}function qy(t,n,a){for(var c=-1,m=t.criteria,_=n.criteria,C=m.length,j=a.length;++c<C;){var z=$l(m[c],_[c]);if(z){if(c>=j)return z;var Z=a[c];return z*(Z=="desc"?-1:1)}}return t.index-n.index}function Dl(t,n,a,c){for(var m=-1,_=t.length,C=a.length,j=-1,z=n.length,Z=qt(_-C,0),ee=W(z+Z),se=!c;++j<z;)ee[j]=n[j];for(;++m<C;)(se||m<_)&&(ee[a[m]]=t[m]);for(;Z--;)ee[j++]=t[m++];return ee}function jl(t,n,a,c){for(var m=-1,_=t.length,C=-1,j=a.length,z=-1,Z=n.length,ee=qt(_-j,0),se=W(ee+Z),ue=!c;++m<ee;)se[m]=t[m];for(var pe=m;++z<Z;)se[pe+z]=n[z];for(;++C<j;)(ue||m<_)&&(se[pe+a[C]]=t[m++]);return se}function hr(t,n){var a=-1,c=t.length;for(n||(n=W(c));++a<c;)n[a]=t[a];return n}function Xr(t,n,a,c){var m=!a;a||(a={});for(var _=-1,C=n.length;++_<C;){var j=n[_],z=c?c(a[j],t[j],j,a,t):r;z===r&&(z=t[j]),m?cn(a,j,z):es(a,j,z)}return a}function zy(t,n){return Xr(t,lc(t),n)}function By(t,n){return Xr(t,Gl(t),n)}function wo(t,n){return function(a,c){var m=Se(a)?Wp:ly,_=n?n():{};return m(a,t,me(c,2),_)}}function Si(t){return Re(function(n,a){var c=-1,m=a.length,_=m>1?a[m-1]:r,C=m>2?a[2]:r;for(_=t.length>3&&typeof _=="function"?(m--,_):r,C&&sr(a[0],a[1],C)&&(_=m<3?r:_,m=1),n=Xe(n);++c<m;){var j=a[c];j&&t(n,j,c,_)}return n})}function Fl(t,n){return function(a,c){if(a==null)return a;if(!dr(a))return t(a,c);for(var m=a.length,_=n?m:-1,C=Xe(a);(n?_--:++_<m)&&c(C[_],_,C)!==!1;);return a}}function Ll(t){return function(n,a,c){for(var m=-1,_=Xe(n),C=c(n),j=C.length;j--;){var z=C[t?j:++m];if(a(_[z],z,_)===!1)break}return n}}function Hy(t,n,a){var c=n&re,m=ss(t);function _(){var C=this&&this!==Ce&&this instanceof _?m:t;return C.apply(c?a:this,arguments)}return _}function Ul(t){return function(n){n=ze(n);var a=mi(n)?zr(n):r,c=a?a[0]:n.charAt(0),m=a?Rn(a,1).join(""):n.slice(1);return c[t]()+m}}function Oi(t){return function(n){return Ra(Lf(Ff(n).replace(Ki,"")),t,"")}}function ss(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Ii(t.prototype),c=t.apply(a,n);return pt(c)?c:a}}function ky(t,n,a){var c=ss(t);function m(){for(var _=arguments.length,C=W(_),j=_,z=Pi(m);j--;)C[j]=arguments[j];var Z=_<3&&C[0]!==z&&C[_-1]!==z?[]:In(C,z);if(_-=Z.length,_<a)return Hl(t,n,bo,m.placeholder,r,C,Z,r,r,a-_);var ee=this&&this!==Ce&&this instanceof m?c:t;return Bt(ee,this,C)}return m}function Ml(t){return function(n,a,c){var m=Xe(n);if(!dr(n)){var _=me(a,3);n=Ht(n),a=function(j){return _(m[j],j,m)}}var C=t(n,a,c);return C>-1?m[_?n[C]:C]:r}}function ql(t){return ln(function(n){var a=n.length,c=a,m=Cr.prototype.thru;for(t&&n.reverse();c--;){var _=n[c];if(typeof _!="function")throw new Nr(y);if(m&&!C&&Oo(_)=="wrapper")var C=new Cr([],!0)}for(c=C?c:a;++c<a;){_=n[c];var j=Oo(_),z=j=="wrapper"?cc(_):r;z&&hc(z[0])&&z[1]==(Q|N|D|R)&&!z[4].length&&z[9]==1?C=C[Oo(z[0])].apply(C,z[3]):C=_.length==1&&hc(_)?C[j]():C.thru(_)}return function(){var Z=arguments,ee=Z[0];if(C&&Z.length==1&&Se(ee))return C.plant(ee).value();for(var se=0,ue=a?n[se].apply(this,Z):ee;++se<a;)ue=n[se].call(this,ue);return ue}})}function bo(t,n,a,c,m,_,C,j,z,Z){var ee=n&Q,se=n&re,ue=n&ae,pe=n&(N|$),ve=n&le,xe=ue?r:ss(t);function _e(){for(var Te=arguments.length,$e=W(Te),Or=Te;Or--;)$e[Or]=arguments[Or];if(pe)var or=Pi(_e),Pr=rg($e,or);if(c&&($e=Dl($e,c,m,pe)),_&&($e=jl($e,_,C,pe)),Te-=Pr,pe&&Te<Z){var xt=In($e,or);return Hl(t,n,bo,_e.placeholder,a,$e,xt,j,z,Z-Te)}var kr=se?a:this,pn=ue?kr[t]:t;return Te=$e.length,j?$e=lm($e,j):ve&&Te>1&&$e.reverse(),ee&&z<Te&&($e.length=z),this&&this!==Ce&&this instanceof _e&&(pn=xe||ss(pn)),pn.apply(kr,$e)}return _e}function zl(t,n){return function(a,c){return vy(a,t,n(c),{})}}function Eo(t,n){return function(a,c){var m;if(a===r&&c===r)return n;if(a!==r&&(m=a),c!==r){if(m===r)return c;typeof a=="string"||typeof c=="string"?(a=Ir(a),c=Ir(c)):(a=Pl(a),c=Pl(c)),m=t(a,c)}return m}}function ic(t){return ln(function(n){return n=ut(n,Er(me())),Re(function(a){var c=this;return t(n,function(m){return Bt(m,c,a)})})})}function Io(t,n){n=n===r?" ":Ir(n);var a=n.length;if(a<2)return a?Ya(n,t):n;var c=Ya(n,co(t/vi(n)));return mi(n)?Rn(zr(c),0,t).join(""):c.slice(0,t)}function Vy(t,n,a,c){var m=n&re,_=ss(t);function C(){for(var j=-1,z=arguments.length,Z=-1,ee=c.length,se=W(ee+z),ue=this&&this!==Ce&&this instanceof C?_:t;++Z<ee;)se[Z]=c[Z];for(;z--;)se[Z++]=arguments[++j];return Bt(ue,m?a:this,se)}return C}function Bl(t){return function(n,a,c){return c&&typeof c!="number"&&sr(n,a,c)&&(a=c=r),n=dn(n),a===r?(a=n,n=0):a=dn(a),c=c===r?n<a?1:-1:dn(c),Ay(n,a,c,t)}}function So(t){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Fr(n),a=Fr(a)),t(n,a)}}function Hl(t,n,a,c,m,_,C,j,z,Z){var ee=n&N,se=ee?C:r,ue=ee?r:C,pe=ee?_:r,ve=ee?r:_;n|=ee?D:U,n&=~(ee?U:D),n&I||(n&=~(re|ae));var xe=[t,n,m,pe,se,ve,ue,j,z,Z],_e=a.apply(r,xe);return hc(t)&&tf(_e,xe),_e.placeholder=c,rf(_e,t,n)}function sc(t){var n=Mt[t];return function(a,c){if(a=Fr(a),c=c==null?0:Yt(Oe(c),292),c&&rl(a)){var m=(ze(a)+"e").split("e"),_=n(m[0]+"e"+(+m[1]+c));return m=(ze(_)+"e").split("e"),+(m[0]+"e"+(+m[1]-c))}return n(a)}}var Ky=bi&&1/Xs(new bi([,-0]))[1]==H?function(t){return new bi(t)}:xc;function kl(t){return function(n){var a=Xt(n);return a==Pe?ja(n):a==qe?ug(n):tg(n,t(n))}}function un(t,n,a,c,m,_,C,j){var z=n&ae;if(!z&&typeof t!="function")throw new Nr(y);var Z=c?c.length:0;if(Z||(n&=~(D|U),c=m=r),C=C===r?C:qt(Oe(C),0),j=j===r?j:Oe(j),Z-=m?m.length:0,n&U){var ee=c,se=m;c=m=r}var ue=z?r:cc(t),pe=[t,n,a,c,m,ee,se,_,C,j];if(ue&&am(pe,ue),t=pe[0],n=pe[1],a=pe[2],c=pe[3],m=pe[4],j=pe[9]=pe[9]===r?z?0:t.length:qt(pe[9]-Z,0),!j&&n&(N|$)&&(n&=~(N|$)),!n||n==re)var ve=Hy(t,n,a);else n==N||n==$?ve=ky(t,n,j):(n==D||n==(re|D))&&!m.length?ve=Vy(t,n,a,c):ve=bo.apply(r,pe);var xe=ue?Sl:tf;return rf(xe(ve,pe),t,n)}function Vl(t,n,a,c){return t===r||Hr(t,wi[a])&&!He.call(c,a)?n:t}function Kl(t,n,a,c,m,_){return pt(t)&&pt(n)&&(_.set(n,t),mo(t,n,r,Kl,_),_.delete(n)),t}function Wy(t){return cs(t)?r:t}function Wl(t,n,a,c,m,_){var C=a&F,j=t.length,z=n.length;if(j!=z&&!(C&&z>j))return!1;var Z=_.get(t),ee=_.get(n);if(Z&&ee)return Z==n&&ee==t;var se=-1,ue=!0,pe=a&oe?new Jn:r;for(_.set(t,n),_.set(n,t);++se<j;){var ve=t[se],xe=n[se];if(c)var _e=C?c(xe,ve,se,n,t,_):c(ve,xe,se,t,n,_);if(_e!==r){if(_e)continue;ue=!1;break}if(pe){if(!Ta(n,function(Te,$e){if(!Gi(pe,$e)&&(ve===Te||m(ve,Te,a,c,_)))return pe.push($e)})){ue=!1;break}}else if(!(ve===xe||m(ve,xe,a,c,_))){ue=!1;break}}return _.delete(t),_.delete(n),ue}function Gy(t,n,a,c,m,_,C){switch(a){case Ge:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Le:return!(t.byteLength!=n.byteLength||!_(new io(t),new io(n)));case J:case k:case Fe:return Hr(+t,+n);case L:return t.name==n.name&&t.message==n.message;case ft:case rt:return t==n+"";case Pe:var j=ja;case qe:var z=c&F;if(j||(j=Xs),t.size!=n.size&&!z)return!1;var Z=C.get(t);if(Z)return Z==n;c|=oe,C.set(t,n);var ee=Wl(j(t),j(n),c,m,_,C);return C.delete(t),ee;case nt:if(Zi)return Zi.call(t)==Zi.call(n)}return!1}function Jy(t,n,a,c,m,_){var C=a&F,j=oc(t),z=j.length,Z=oc(n),ee=Z.length;if(z!=ee&&!C)return!1;for(var se=z;se--;){var ue=j[se];if(!(C?ue in n:He.call(n,ue)))return!1}var pe=_.get(t),ve=_.get(n);if(pe&&ve)return pe==n&&ve==t;var xe=!0;_.set(t,n),_.set(n,t);for(var _e=C;++se<z;){ue=j[se];var Te=t[ue],$e=n[ue];if(c)var Or=C?c($e,Te,ue,n,t,_):c(Te,$e,ue,t,n,_);if(!(Or===r?Te===$e||m(Te,$e,a,c,_):Or)){xe=!1;break}_e||(_e=ue=="constructor")}if(xe&&!_e){var or=t.constructor,Pr=n.constructor;or!=Pr&&"constructor"in t&&"constructor"in n&&!(typeof or=="function"&&or instanceof or&&typeof Pr=="function"&&Pr instanceof Pr)&&(xe=!1)}return _.delete(t),_.delete(n),xe}function ln(t){return pc(Zl(t,r,uf),t+"")}function oc(t){return dl(t,Ht,lc)}function ac(t){return dl(t,pr,Gl)}var cc=lo?function(t){return lo.get(t)}:xc;function Oo(t){for(var n=t.name+"",a=Ei[n],c=He.call(Ei,n)?a.length:0;c--;){var m=a[c],_=m.func;if(_==null||_==t)return m.name}return n}function Pi(t){var n=He.call(v,"placeholder")?v:t;return n.placeholder}function me(){var t=v.iteratee||Oc;return t=t===Oc?yl:t,arguments.length?t(arguments[0],arguments[1]):t}function Po(t,n){var a=t.__data__;return nm(n)?a[typeof n=="string"?"string":"hash"]:a.map}function uc(t){for(var n=Ht(t),a=n.length;a--;){var c=n[a],m=t[c];n[a]=[c,m,Yl(m)]}return n}function Xn(t,n){var a=og(t,n);return gl(a)?a:r}function Qy(t){var n=He.call(t,Wn),a=t[Wn];try{t[Wn]=r;var c=!0}catch{}var m=ro.call(t);return c&&(n?t[Wn]=a:delete t[Wn]),m}var lc=La?function(t){return t==null?[]:(t=Xe(t),bn(La(t),function(n){return el.call(t,n)}))}:Rc,Gl=La?function(t){for(var n=[];t;)En(n,lc(t)),t=so(t);return n}:Rc,Xt=ir;(Ua&&Xt(new Ua(new ArrayBuffer(1)))!=Ge||Qi&&Xt(new Qi)!=Pe||Ma&&Xt(Ma.resolve())!=Rt||bi&&Xt(new bi)!=qe||Yi&&Xt(new Yi)!=ke)&&(Xt=function(t){var n=ir(t),a=n==Ae?t.constructor:r,c=a?Zn(a):"";if(c)switch(c){case Cg:return Ge;case $g:return Pe;case Dg:return Rt;case jg:return qe;case Fg:return ke}return n});function Yy(t,n,a){for(var c=-1,m=a.length;++c<m;){var _=a[c],C=_.size;switch(_.type){case"drop":t+=C;break;case"dropRight":n-=C;break;case"take":n=Yt(n,t+C);break;case"takeRight":t=qt(t,n-C);break}}return{start:t,end:n}}function Xy(t){var n=t.match(Ze);return n?n[1].split($t):[]}function Jl(t,n,a){n=xn(n,t);for(var c=-1,m=n.length,_=!1;++c<m;){var C=Zr(n[c]);if(!(_=t!=null&&a(t,C)))break;t=t[C]}return _||++c!=m?_:(m=t==null?0:t.length,!!m&&$o(m)&&fn(C,m)&&(Se(t)||ei(t)))}function Zy(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&He.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Ql(t){return typeof t.constructor=="function"&&!os(t)?Ii(so(t)):{}}function em(t,n,a){var c=t.constructor;switch(n){case Le:return nc(t);case J:case k:return new c(+t);case Ge:return Ly(t,a);case gt:case Be:case Tt:case Ut:case Wt:case Gt:case zt:case tr:case lr:return Cl(t,a);case Pe:return new c;case Fe:case rt:return new c(t);case ft:return Uy(t);case qe:return new c;case nt:return My(t)}}function tm(t,n){var a=n.length;if(!a)return t;var c=a-1;return n[c]=(a>1?"& ":"")+n[c],n=n.join(a>2?", ":" "),t.replace(bt,`{
/* [wrapped with `+n+`] */
`)}function rm(t){return Se(t)||ei(t)||!!(tl&&t&&t[tl])}function fn(t,n){var a=typeof t;return n=n??G,!!n&&(a=="number"||a!="symbol"&&da.test(t))&&t>-1&&t%1==0&&t<n}function sr(t,n,a){if(!pt(a))return!1;var c=typeof n;return(c=="number"?dr(a)&&fn(n,a.length):c=="string"&&n in a)?Hr(a[n],t):!1}function fc(t,n){if(Se(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Sr(t)?!0:At.test(t)||!ct.test(t)||n!=null&&t in Xe(n)}function nm(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function hc(t){var n=Oo(t),a=v[n];if(typeof a!="function"||!(n in Ne.prototype))return!1;if(t===a)return!0;var c=cc(a);return!!c&&t===c[0]}function im(t){return!!Yu&&Yu in t}var sm=eo?hn:Tc;function os(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||wi;return t===a}function Yl(t){return t===t&&!pt(t)}function Xl(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==r||t in Xe(a))}}function om(t){var n=No(t,function(c){return a.size===b&&a.clear(),c}),a=n.cache;return n}function am(t,n){var a=t[1],c=n[1],m=a|c,_=m<(re|ae|Q),C=c==Q&&a==N||c==Q&&a==R&&t[7].length<=n[8]||c==(Q|R)&&n[7].length<=n[8]&&a==N;if(!(_||C))return t;c&re&&(t[2]=n[2],m|=a&re?0:I);var j=n[3];if(j){var z=t[3];t[3]=z?Dl(z,j,n[4]):j,t[4]=z?In(t[3],O):n[4]}return j=n[5],j&&(z=t[5],t[5]=z?jl(z,j,n[6]):j,t[6]=z?In(t[5],O):n[6]),j=n[7],j&&(t[7]=j),c&Q&&(t[8]=t[8]==null?n[8]:Yt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=m,t}function cm(t){var n=[];if(t!=null)for(var a in Xe(t))n.push(a);return n}function um(t){return ro.call(t)}function Zl(t,n,a){return n=qt(n===r?t.length-1:n,0),function(){for(var c=arguments,m=-1,_=qt(c.length-n,0),C=W(_);++m<_;)C[m]=c[n+m];m=-1;for(var j=W(n+1);++m<n;)j[m]=c[m];return j[n]=a(C),Bt(t,this,j)}}function ef(t,n){return n.length<2?t:Yn(t,Dr(n,0,-1))}function lm(t,n){for(var a=t.length,c=Yt(n.length,a),m=hr(t);c--;){var _=n[c];t[c]=fn(_,a)?m[_]:r}return t}function dc(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var tf=nf(Sl),as=Og||function(t,n){return Ce.setTimeout(t,n)},pc=nf($y);function rf(t,n,a){var c=n+"";return pc(t,tm(c,fm(Xy(c),a)))}function nf(t){var n=0,a=0;return function(){var c=Tg(),m=E-(c-a);if(a=c,m>0){if(++n>=g)return arguments[0]}else n=0;return t.apply(r,arguments)}}function xo(t,n){var a=-1,c=t.length,m=c-1;for(n=n===r?c:n;++a<n;){var _=Qa(a,m),C=t[_];t[_]=t[a],t[a]=C}return t.length=n,t}var sf=om(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Nt,function(a,c,m,_){n.push(m?_.replace(aa,"$1"):c||a)}),n});function Zr(t){if(typeof t=="string"||Sr(t))return t;var n=t+"";return n=="0"&&1/t==-H?"-0":n}function Zn(t){if(t!=null){try{return to.call(t)}catch{}try{return t+""}catch{}}return""}function fm(t,n){return Ar(We,function(a){var c="_."+a[0];n&a[1]&&!Qs(t,c)&&t.push(c)}),t.sort()}function of(t){if(t instanceof Ne)return t.clone();var n=new Cr(t.__wrapped__,t.__chain__);return n.__actions__=hr(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function hm(t,n,a){(a?sr(t,n,a):n===r)?n=1:n=qt(Oe(n),0);var c=t==null?0:t.length;if(!c||n<1)return[];for(var m=0,_=0,C=W(co(c/n));m<c;)C[_++]=Dr(t,m,m+=n);return C}function dm(t){for(var n=-1,a=t==null?0:t.length,c=0,m=[];++n<a;){var _=t[n];_&&(m[c++]=_)}return m}function pm(){var t=arguments.length;if(!t)return[];for(var n=W(t-1),a=arguments[0],c=t;c--;)n[c-1]=arguments[c];return En(Se(a)?hr(a):[a],Jt(n,1))}var gm=Re(function(t,n){return Pt(t)?ts(t,Jt(n,1,Pt,!0)):[]}),ym=Re(function(t,n){var a=jr(n);return Pt(a)&&(a=r),Pt(t)?ts(t,Jt(n,1,Pt,!0),me(a,2)):[]}),mm=Re(function(t,n){var a=jr(n);return Pt(a)&&(a=r),Pt(t)?ts(t,Jt(n,1,Pt,!0),r,a):[]});function vm(t,n,a){var c=t==null?0:t.length;return c?(n=a||n===r?1:Oe(n),Dr(t,n<0?0:n,c)):[]}function _m(t,n,a){var c=t==null?0:t.length;return c?(n=a||n===r?1:Oe(n),n=c-n,Dr(t,0,n<0?0:n)):[]}function wm(t,n){return t&&t.length?_o(t,me(n,3),!0,!0):[]}function bm(t,n){return t&&t.length?_o(t,me(n,3),!0):[]}function Em(t,n,a,c){var m=t==null?0:t.length;return m?(a&&typeof a!="number"&&sr(t,n,a)&&(a=0,c=m),py(t,n,a,c)):[]}function af(t,n,a){var c=t==null?0:t.length;if(!c)return-1;var m=a==null?0:Oe(a);return m<0&&(m=qt(c+m,0)),Ys(t,me(n,3),m)}function cf(t,n,a){var c=t==null?0:t.length;if(!c)return-1;var m=c-1;return a!==r&&(m=Oe(a),m=a<0?qt(c+m,0):Yt(m,c-1)),Ys(t,me(n,3),m,!0)}function uf(t){var n=t==null?0:t.length;return n?Jt(t,1):[]}function Im(t){var n=t==null?0:t.length;return n?Jt(t,H):[]}function Sm(t,n){var a=t==null?0:t.length;return a?(n=n===r?1:Oe(n),Jt(t,n)):[]}function Om(t){for(var n=-1,a=t==null?0:t.length,c={};++n<a;){var m=t[n];c[m[0]]=m[1]}return c}function lf(t){return t&&t.length?t[0]:r}function Pm(t,n,a){var c=t==null?0:t.length;if(!c)return-1;var m=a==null?0:Oe(a);return m<0&&(m=qt(c+m,0)),yi(t,n,m)}function xm(t){var n=t==null?0:t.length;return n?Dr(t,0,-1):[]}var Rm=Re(function(t){var n=ut(t,tc);return n.length&&n[0]===t[0]?Va(n):[]}),Tm=Re(function(t){var n=jr(t),a=ut(t,tc);return n===jr(a)?n=r:a.pop(),a.length&&a[0]===t[0]?Va(a,me(n,2)):[]}),Am=Re(function(t){var n=jr(t),a=ut(t,tc);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===t[0]?Va(a,r,n):[]});function Nm(t,n){return t==null?"":xg.call(t,n)}function jr(t){var n=t==null?0:t.length;return n?t[n-1]:r}function Cm(t,n,a){var c=t==null?0:t.length;if(!c)return-1;var m=c;return a!==r&&(m=Oe(a),m=m<0?qt(c+m,0):Yt(m,c-1)),n===n?fg(t,n,m):Ys(t,Hu,m,!0)}function $m(t,n){return t&&t.length?wl(t,Oe(n)):r}var Dm=Re(ff);function ff(t,n){return t&&t.length&&n&&n.length?Ja(t,n):t}function jm(t,n,a){return t&&t.length&&n&&n.length?Ja(t,n,me(a,2)):t}function Fm(t,n,a){return t&&t.length&&n&&n.length?Ja(t,n,r,a):t}var Lm=ln(function(t,n){var a=t==null?0:t.length,c=za(t,n);return Il(t,ut(n,function(m){return fn(m,a)?+m:m}).sort($l)),c});function Um(t,n){var a=[];if(!(t&&t.length))return a;var c=-1,m=[],_=t.length;for(n=me(n,3);++c<_;){var C=t[c];n(C,c,t)&&(a.push(C),m.push(c))}return Il(t,m),a}function gc(t){return t==null?t:Ng.call(t)}function Mm(t,n,a){var c=t==null?0:t.length;return c?(a&&typeof a!="number"&&sr(t,n,a)?(n=0,a=c):(n=n==null?0:Oe(n),a=a===r?c:Oe(a)),Dr(t,n,a)):[]}function qm(t,n){return vo(t,n)}function zm(t,n,a){return Xa(t,n,me(a,2))}function Bm(t,n){var a=t==null?0:t.length;if(a){var c=vo(t,n);if(c<a&&Hr(t[c],n))return c}return-1}function Hm(t,n){return vo(t,n,!0)}function km(t,n,a){return Xa(t,n,me(a,2),!0)}function Vm(t,n){var a=t==null?0:t.length;if(a){var c=vo(t,n,!0)-1;if(Hr(t[c],n))return c}return-1}function Km(t){return t&&t.length?Ol(t):[]}function Wm(t,n){return t&&t.length?Ol(t,me(n,2)):[]}function Gm(t){var n=t==null?0:t.length;return n?Dr(t,1,n):[]}function Jm(t,n,a){return t&&t.length?(n=a||n===r?1:Oe(n),Dr(t,0,n<0?0:n)):[]}function Qm(t,n,a){var c=t==null?0:t.length;return c?(n=a||n===r?1:Oe(n),n=c-n,Dr(t,n<0?0:n,c)):[]}function Ym(t,n){return t&&t.length?_o(t,me(n,3),!1,!0):[]}function Xm(t,n){return t&&t.length?_o(t,me(n,3)):[]}var Zm=Re(function(t){return Pn(Jt(t,1,Pt,!0))}),ev=Re(function(t){var n=jr(t);return Pt(n)&&(n=r),Pn(Jt(t,1,Pt,!0),me(n,2))}),tv=Re(function(t){var n=jr(t);return n=typeof n=="function"?n:r,Pn(Jt(t,1,Pt,!0),r,n)});function rv(t){return t&&t.length?Pn(t):[]}function nv(t,n){return t&&t.length?Pn(t,me(n,2)):[]}function iv(t,n){return n=typeof n=="function"?n:r,t&&t.length?Pn(t,r,n):[]}function yc(t){if(!(t&&t.length))return[];var n=0;return t=bn(t,function(a){if(Pt(a))return n=qt(a.length,n),!0}),$a(n,function(a){return ut(t,Aa(a))})}function hf(t,n){if(!(t&&t.length))return[];var a=yc(t);return n==null?a:ut(a,function(c){return Bt(n,r,c)})}var sv=Re(function(t,n){return Pt(t)?ts(t,n):[]}),ov=Re(function(t){return ec(bn(t,Pt))}),av=Re(function(t){var n=jr(t);return Pt(n)&&(n=r),ec(bn(t,Pt),me(n,2))}),cv=Re(function(t){var n=jr(t);return n=typeof n=="function"?n:r,ec(bn(t,Pt),r,n)}),uv=Re(yc);function lv(t,n){return Tl(t||[],n||[],es)}function fv(t,n){return Tl(t||[],n||[],is)}var hv=Re(function(t){var n=t.length,a=n>1?t[n-1]:r;return a=typeof a=="function"?(t.pop(),a):r,hf(t,a)});function df(t){var n=v(t);return n.__chain__=!0,n}function dv(t,n){return n(t),t}function Ro(t,n){return n(t)}var pv=ln(function(t){var n=t.length,a=n?t[0]:0,c=this.__wrapped__,m=function(_){return za(_,t)};return n>1||this.__actions__.length||!(c instanceof Ne)||!fn(a)?this.thru(m):(c=c.slice(a,+a+(n?1:0)),c.__actions__.push({func:Ro,args:[m],thisArg:r}),new Cr(c,this.__chain__).thru(function(_){return n&&!_.length&&_.push(r),_}))});function gv(){return df(this)}function yv(){return new Cr(this.value(),this.__chain__)}function mv(){this.__values__===r&&(this.__values__=xf(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function vv(){return this}function _v(t){for(var n,a=this;a instanceof ho;){var c=of(a);c.__index__=0,c.__values__=r,n?m.__wrapped__=c:n=c;var m=c;a=a.__wrapped__}return m.__wrapped__=t,n}function wv(){var t=this.__wrapped__;if(t instanceof Ne){var n=t;return this.__actions__.length&&(n=new Ne(this)),n=n.reverse(),n.__actions__.push({func:Ro,args:[gc],thisArg:r}),new Cr(n,this.__chain__)}return this.thru(gc)}function bv(){return Rl(this.__wrapped__,this.__actions__)}var Ev=wo(function(t,n,a){He.call(t,a)?++t[a]:cn(t,a,1)});function Iv(t,n,a){var c=Se(t)?zu:dy;return a&&sr(t,n,a)&&(n=r),c(t,me(n,3))}function Sv(t,n){var a=Se(t)?bn:fl;return a(t,me(n,3))}var Ov=Ml(af),Pv=Ml(cf);function xv(t,n){return Jt(To(t,n),1)}function Rv(t,n){return Jt(To(t,n),H)}function Tv(t,n,a){return a=a===r?1:Oe(a),Jt(To(t,n),a)}function pf(t,n){var a=Se(t)?Ar:On;return a(t,me(n,3))}function gf(t,n){var a=Se(t)?Gp:ll;return a(t,me(n,3))}var Av=wo(function(t,n,a){He.call(t,a)?t[a].push(n):cn(t,a,[n])});function Nv(t,n,a,c){t=dr(t)?t:Ri(t),a=a&&!c?Oe(a):0;var m=t.length;return a<0&&(a=qt(m+a,0)),Do(t)?a<=m&&t.indexOf(n,a)>-1:!!m&&yi(t,n,a)>-1}var Cv=Re(function(t,n,a){var c=-1,m=typeof n=="function",_=dr(t)?W(t.length):[];return On(t,function(C){_[++c]=m?Bt(n,C,a):rs(C,n,a)}),_}),$v=wo(function(t,n,a){cn(t,a,n)});function To(t,n){var a=Se(t)?ut:ml;return a(t,me(n,3))}function Dv(t,n,a,c){return t==null?[]:(Se(n)||(n=n==null?[]:[n]),a=c?r:a,Se(a)||(a=a==null?[]:[a]),bl(t,n,a))}var jv=wo(function(t,n,a){t[a?0:1].push(n)},function(){return[[],[]]});function Fv(t,n,a){var c=Se(t)?Ra:Vu,m=arguments.length<3;return c(t,me(n,4),a,m,On)}function Lv(t,n,a){var c=Se(t)?Jp:Vu,m=arguments.length<3;return c(t,me(n,4),a,m,ll)}function Uv(t,n){var a=Se(t)?bn:fl;return a(t,Co(me(n,3)))}function Mv(t){var n=Se(t)?ol:Ny;return n(t)}function qv(t,n,a){(a?sr(t,n,a):n===r)?n=1:n=Oe(n);var c=Se(t)?cy:Cy;return c(t,n)}function zv(t){var n=Se(t)?uy:Dy;return n(t)}function Bv(t){if(t==null)return 0;if(dr(t))return Do(t)?vi(t):t.length;var n=Xt(t);return n==Pe||n==qe?t.size:Wa(t).length}function Hv(t,n,a){var c=Se(t)?Ta:jy;return a&&sr(t,n,a)&&(n=r),c(t,me(n,3))}var kv=Re(function(t,n){if(t==null)return[];var a=n.length;return a>1&&sr(t,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),bl(t,Jt(n,1),[])}),Ao=Sg||function(){return Ce.Date.now()};function Vv(t,n){if(typeof n!="function")throw new Nr(y);return t=Oe(t),function(){if(--t<1)return n.apply(this,arguments)}}function yf(t,n,a){return n=a?r:n,n=t&&n==null?t.length:n,un(t,Q,r,r,r,r,n)}function mf(t,n){var a;if(typeof n!="function")throw new Nr(y);return t=Oe(t),function(){return--t>0&&(a=n.apply(this,arguments)),t<=1&&(n=r),a}}var mc=Re(function(t,n,a){var c=re;if(a.length){var m=In(a,Pi(mc));c|=D}return un(t,c,n,a,m)}),vf=Re(function(t,n,a){var c=re|ae;if(a.length){var m=In(a,Pi(vf));c|=D}return un(n,c,t,a,m)});function _f(t,n,a){n=a?r:n;var c=un(t,N,r,r,r,r,r,n);return c.placeholder=_f.placeholder,c}function wf(t,n,a){n=a?r:n;var c=un(t,$,r,r,r,r,r,n);return c.placeholder=wf.placeholder,c}function bf(t,n,a){var c,m,_,C,j,z,Z=0,ee=!1,se=!1,ue=!0;if(typeof t!="function")throw new Nr(y);n=Fr(n)||0,pt(a)&&(ee=!!a.leading,se="maxWait"in a,_=se?qt(Fr(a.maxWait)||0,n):_,ue="trailing"in a?!!a.trailing:ue);function pe(xt){var kr=c,pn=m;return c=m=r,Z=xt,C=t.apply(pn,kr),C}function ve(xt){return Z=xt,j=as(Te,n),ee?pe(xt):C}function xe(xt){var kr=xt-z,pn=xt-Z,qf=n-kr;return se?Yt(qf,_-pn):qf}function _e(xt){var kr=xt-z,pn=xt-Z;return z===r||kr>=n||kr<0||se&&pn>=_}function Te(){var xt=Ao();if(_e(xt))return $e(xt);j=as(Te,xe(xt))}function $e(xt){return j=r,ue&&c?pe(xt):(c=m=r,C)}function Or(){j!==r&&Al(j),Z=0,c=z=m=j=r}function or(){return j===r?C:$e(Ao())}function Pr(){var xt=Ao(),kr=_e(xt);if(c=arguments,m=this,z=xt,kr){if(j===r)return ve(z);if(se)return Al(j),j=as(Te,n),pe(z)}return j===r&&(j=as(Te,n)),C}return Pr.cancel=Or,Pr.flush=or,Pr}var Kv=Re(function(t,n){return ul(t,1,n)}),Wv=Re(function(t,n,a){return ul(t,Fr(n)||0,a)});function Gv(t){return un(t,le)}function No(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Nr(y);var a=function(){var c=arguments,m=n?n.apply(this,c):c[0],_=a.cache;if(_.has(m))return _.get(m);var C=t.apply(this,c);return a.cache=_.set(m,C)||_,C};return a.cache=new(No.Cache||an),a}No.Cache=an;function Co(t){if(typeof t!="function")throw new Nr(y);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Jv(t){return mf(2,t)}var Qv=Fy(function(t,n){n=n.length==1&&Se(n[0])?ut(n[0],Er(me())):ut(Jt(n,1),Er(me()));var a=n.length;return Re(function(c){for(var m=-1,_=Yt(c.length,a);++m<_;)c[m]=n[m].call(this,c[m]);return Bt(t,this,c)})}),vc=Re(function(t,n){var a=In(n,Pi(vc));return un(t,D,r,n,a)}),Ef=Re(function(t,n){var a=In(n,Pi(Ef));return un(t,U,r,n,a)}),Yv=ln(function(t,n){return un(t,R,r,r,r,n)});function Xv(t,n){if(typeof t!="function")throw new Nr(y);return n=n===r?n:Oe(n),Re(t,n)}function Zv(t,n){if(typeof t!="function")throw new Nr(y);return n=n==null?0:qt(Oe(n),0),Re(function(a){var c=a[n],m=Rn(a,0,n);return c&&En(m,c),Bt(t,this,m)})}function e0(t,n,a){var c=!0,m=!0;if(typeof t!="function")throw new Nr(y);return pt(a)&&(c="leading"in a?!!a.leading:c,m="trailing"in a?!!a.trailing:m),bf(t,n,{leading:c,maxWait:n,trailing:m})}function t0(t){return yf(t,1)}function r0(t,n){return vc(rc(n),t)}function n0(){if(!arguments.length)return[];var t=arguments[0];return Se(t)?t:[t]}function i0(t){return $r(t,V)}function s0(t,n){return n=typeof n=="function"?n:r,$r(t,V,n)}function o0(t){return $r(t,A|V)}function a0(t,n){return n=typeof n=="function"?n:r,$r(t,A|V,n)}function c0(t,n){return n==null||cl(t,n,Ht(n))}function Hr(t,n){return t===n||t!==t&&n!==n}var u0=So(ka),l0=So(function(t,n){return t>=n}),ei=pl(function(){return arguments}())?pl:function(t){return Et(t)&&He.call(t,"callee")&&!el.call(t,"callee")},Se=W.isArray,f0=nr?Er(nr):_y;function dr(t){return t!=null&&$o(t.length)&&!hn(t)}function Pt(t){return Et(t)&&dr(t)}function h0(t){return t===!0||t===!1||Et(t)&&ir(t)==J}var Tn=Pg||Tc,d0=qr?Er(qr):wy;function p0(t){return Et(t)&&t.nodeType===1&&!cs(t)}function g0(t){if(t==null)return!0;if(dr(t)&&(Se(t)||typeof t=="string"||typeof t.splice=="function"||Tn(t)||xi(t)||ei(t)))return!t.length;var n=Xt(t);if(n==Pe||n==qe)return!t.size;if(os(t))return!Wa(t).length;for(var a in t)if(He.call(t,a))return!1;return!0}function y0(t,n){return ns(t,n)}function m0(t,n,a){a=typeof a=="function"?a:r;var c=a?a(t,n):r;return c===r?ns(t,n,r,a):!!c}function _c(t){if(!Et(t))return!1;var n=ir(t);return n==L||n==h||typeof t.message=="string"&&typeof t.name=="string"&&!cs(t)}function v0(t){return typeof t=="number"&&rl(t)}function hn(t){if(!pt(t))return!1;var n=ir(t);return n==de||n==be||n==Y||n==It}function If(t){return typeof t=="number"&&t==Oe(t)}function $o(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=G}function pt(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Et(t){return t!=null&&typeof t=="object"}var Sf=Tr?Er(Tr):Ey;function _0(t,n){return t===n||Ka(t,n,uc(n))}function w0(t,n,a){return a=typeof a=="function"?a:r,Ka(t,n,uc(n),a)}function b0(t){return Of(t)&&t!=+t}function E0(t){if(sm(t))throw new Ee(u);return gl(t)}function I0(t){return t===null}function S0(t){return t==null}function Of(t){return typeof t=="number"||Et(t)&&ir(t)==Fe}function cs(t){if(!Et(t)||ir(t)!=Ae)return!1;var n=so(t);if(n===null)return!0;var a=He.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&to.call(a)==wg}var wc=Qr?Er(Qr):Iy;function O0(t){return If(t)&&t>=-G&&t<=G}var Pf=Wi?Er(Wi):Sy;function Do(t){return typeof t=="string"||!Se(t)&&Et(t)&&ir(t)==rt}function Sr(t){return typeof t=="symbol"||Et(t)&&ir(t)==nt}var xi=Kn?Er(Kn):Oy;function P0(t){return t===r}function x0(t){return Et(t)&&Xt(t)==ke}function R0(t){return Et(t)&&ir(t)==it}var T0=So(Ga),A0=So(function(t,n){return t<=n});function xf(t){if(!t)return[];if(dr(t))return Do(t)?zr(t):hr(t);if(Ji&&t[Ji])return cg(t[Ji]());var n=Xt(t),a=n==Pe?ja:n==qe?Xs:Ri;return a(t)}function dn(t){if(!t)return t===0?t:0;if(t=Fr(t),t===H||t===-H){var n=t<0?-1:1;return n*S}return t===t?t:0}function Oe(t){var n=dn(t),a=n%1;return n===n?a?n-a:n:0}function Rf(t){return t?Qn(Oe(t),0,te):0}function Fr(t){if(typeof t=="number")return t;if(Sr(t))return K;if(pt(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=pt(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ku(t);var a=la.test(t);return a||ha.test(t)?Ie(t.slice(2),a?2:8):ua.test(t)?K:+t}function Tf(t){return Xr(t,pr(t))}function N0(t){return t?Qn(Oe(t),-G,G):t===0?t:0}function ze(t){return t==null?"":Ir(t)}var C0=Si(function(t,n){if(os(n)||dr(n)){Xr(n,Ht(n),t);return}for(var a in n)He.call(n,a)&&es(t,a,n[a])}),Af=Si(function(t,n){Xr(n,pr(n),t)}),jo=Si(function(t,n,a,c){Xr(n,pr(n),t,c)}),$0=Si(function(t,n,a,c){Xr(n,Ht(n),t,c)}),D0=ln(za);function j0(t,n){var a=Ii(t);return n==null?a:al(a,n)}var F0=Re(function(t,n){t=Xe(t);var a=-1,c=n.length,m=c>2?n[2]:r;for(m&&sr(n[0],n[1],m)&&(c=1);++a<c;)for(var _=n[a],C=pr(_),j=-1,z=C.length;++j<z;){var Z=C[j],ee=t[Z];(ee===r||Hr(ee,wi[Z])&&!He.call(t,Z))&&(t[Z]=_[Z])}return t}),L0=Re(function(t){return t.push(r,Kl),Bt(Nf,r,t)});function U0(t,n){return Bu(t,me(n,3),Yr)}function M0(t,n){return Bu(t,me(n,3),Ha)}function q0(t,n){return t==null?t:Ba(t,me(n,3),pr)}function z0(t,n){return t==null?t:hl(t,me(n,3),pr)}function B0(t,n){return t&&Yr(t,me(n,3))}function H0(t,n){return t&&Ha(t,me(n,3))}function k0(t){return t==null?[]:yo(t,Ht(t))}function V0(t){return t==null?[]:yo(t,pr(t))}function bc(t,n,a){var c=t==null?r:Yn(t,n);return c===r?a:c}function K0(t,n){return t!=null&&Jl(t,n,gy)}function Ec(t,n){return t!=null&&Jl(t,n,yy)}var W0=zl(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=ro.call(n)),t[n]=a},Sc(gr)),G0=zl(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=ro.call(n)),He.call(t,n)?t[n].push(a):t[n]=[a]},me),J0=Re(rs);function Ht(t){return dr(t)?sl(t):Wa(t)}function pr(t){return dr(t)?sl(t,!0):Py(t)}function Q0(t,n){var a={};return n=me(n,3),Yr(t,function(c,m,_){cn(a,n(c,m,_),c)}),a}function Y0(t,n){var a={};return n=me(n,3),Yr(t,function(c,m,_){cn(a,m,n(c,m,_))}),a}var X0=Si(function(t,n,a){mo(t,n,a)}),Nf=Si(function(t,n,a,c){mo(t,n,a,c)}),Z0=ln(function(t,n){var a={};if(t==null)return a;var c=!1;n=ut(n,function(_){return _=xn(_,t),c||(c=_.length>1),_}),Xr(t,ac(t),a),c&&(a=$r(a,A|B|V,Wy));for(var m=n.length;m--;)Za(a,n[m]);return a});function e_(t,n){return Cf(t,Co(me(n)))}var t_=ln(function(t,n){return t==null?{}:Ry(t,n)});function Cf(t,n){if(t==null)return{};var a=ut(ac(t),function(c){return[c]});return n=me(n),El(t,a,function(c,m){return n(c,m[0])})}function r_(t,n,a){n=xn(n,t);var c=-1,m=n.length;for(m||(m=1,t=r);++c<m;){var _=t==null?r:t[Zr(n[c])];_===r&&(c=m,_=a),t=hn(_)?_.call(t):_}return t}function n_(t,n,a){return t==null?t:is(t,n,a)}function i_(t,n,a,c){return c=typeof c=="function"?c:r,t==null?t:is(t,n,a,c)}var $f=kl(Ht),Df=kl(pr);function s_(t,n,a){var c=Se(t),m=c||Tn(t)||xi(t);if(n=me(n,4),a==null){var _=t&&t.constructor;m?a=c?new _:[]:pt(t)?a=hn(_)?Ii(so(t)):{}:a={}}return(m?Ar:Yr)(t,function(C,j,z){return n(a,C,j,z)}),a}function o_(t,n){return t==null?!0:Za(t,n)}function a_(t,n,a){return t==null?t:xl(t,n,rc(a))}function c_(t,n,a,c){return c=typeof c=="function"?c:r,t==null?t:xl(t,n,rc(a),c)}function Ri(t){return t==null?[]:Da(t,Ht(t))}function u_(t){return t==null?[]:Da(t,pr(t))}function l_(t,n,a){return a===r&&(a=n,n=r),a!==r&&(a=Fr(a),a=a===a?a:0),n!==r&&(n=Fr(n),n=n===n?n:0),Qn(Fr(t),n,a)}function f_(t,n,a){return n=dn(n),a===r?(a=n,n=0):a=dn(a),t=Fr(t),my(t,n,a)}function h_(t,n,a){if(a&&typeof a!="boolean"&&sr(t,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&n===r?(t=0,n=1):(t=dn(t),n===r?(n=t,t=0):n=dn(n)),t>n){var c=t;t=n,n=c}if(a||t%1||n%1){var m=nl();return Yt(t+m*(n-t+Qe("1e-"+((m+"").length-1))),n)}return Qa(t,n)}var d_=Oi(function(t,n,a){return n=n.toLowerCase(),t+(a?jf(n):n)});function jf(t){return Ic(ze(t).toLowerCase())}function Ff(t){return t=ze(t),t&&t.replace(nn,ng).replace(Oa,"")}function p_(t,n,a){t=ze(t),n=Ir(n);var c=t.length;a=a===r?c:Qn(Oe(a),0,c);var m=a;return a-=n.length,a>=0&&t.slice(a,m)==n}function g_(t){return t=ze(t),t&&at.test(t)?t.replace(zn,ig):t}function y_(t){return t=ze(t),t&&Ct.test(t)?t.replace(_t,"\\$&"):t}var m_=Oi(function(t,n,a){return t+(a?"-":"")+n.toLowerCase()}),v_=Oi(function(t,n,a){return t+(a?" ":"")+n.toLowerCase()}),__=Ul("toLowerCase");function w_(t,n,a){t=ze(t),n=Oe(n);var c=n?vi(t):0;if(!n||c>=n)return t;var m=(n-c)/2;return Io(uo(m),a)+t+Io(co(m),a)}function b_(t,n,a){t=ze(t),n=Oe(n);var c=n?vi(t):0;return n&&c<n?t+Io(n-c,a):t}function E_(t,n,a){t=ze(t),n=Oe(n);var c=n?vi(t):0;return n&&c<n?Io(n-c,a)+t:t}function I_(t,n,a){return a||n==null?n=0:n&&(n=+n),Ag(ze(t).replace(wt,""),n||0)}function S_(t,n,a){return(a?sr(t,n,a):n===r)?n=1:n=Oe(n),Ya(ze(t),n)}function O_(){var t=arguments,n=ze(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var P_=Oi(function(t,n,a){return t+(a?"_":"")+n.toLowerCase()});function x_(t,n,a){return a&&typeof a!="number"&&sr(t,n,a)&&(n=a=r),a=a===r?te:a>>>0,a?(t=ze(t),t&&(typeof n=="string"||n!=null&&!wc(n))&&(n=Ir(n),!n&&mi(t))?Rn(zr(t),0,a):t.split(n,a)):[]}var R_=Oi(function(t,n,a){return t+(a?" ":"")+Ic(n)});function T_(t,n,a){return t=ze(t),a=a==null?0:Qn(Oe(a),0,t.length),n=Ir(n),t.slice(a,a+n.length)==n}function A_(t,n,a){var c=v.templateSettings;a&&sr(t,n,a)&&(n=r),t=ze(t),n=jo({},n,c,Vl);var m=jo({},n.imports,c.imports,Vl),_=Ht(m),C=Da(m,_),j,z,Z=0,ee=n.interpolate||ui,se="__p += '",ue=Fa((n.escape||ui).source+"|"+ee.source+"|"+(ee===dt?ca:ui).source+"|"+(n.evaluate||ui).source+"|$","g"),pe="//# sourceURL="+(He.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pa+"]")+`
`;t.replace(ue,function(_e,Te,$e,Or,or,Pr){return $e||($e=Or),se+=t.slice(Z,Pr).replace(pa,sg),Te&&(j=!0,se+=`' +
__e(`+Te+`) +
'`),or&&(z=!0,se+=`';
`+or+`;
__p += '`),$e&&(se+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),Z=Pr+_e.length,_e}),se+=`';
`;var ve=He.call(n,"variable")&&n.variable;if(!ve)se=`with (obj) {
`+se+`
}
`;else if(oa.test(ve))throw new Ee(w);se=(z?se.replace(Gr,""):se).replace(rr,"$1").replace(rn,"$1;"),se="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(j?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var xe=Uf(function(){return Me(_,pe+"return "+se).apply(r,C)});if(xe.source=se,_c(xe))throw xe;return xe}function N_(t){return ze(t).toLowerCase()}function C_(t){return ze(t).toUpperCase()}function $_(t,n,a){if(t=ze(t),t&&(a||n===r))return Ku(t);if(!t||!(n=Ir(n)))return t;var c=zr(t),m=zr(n),_=Wu(c,m),C=Gu(c,m)+1;return Rn(c,_,C).join("")}function D_(t,n,a){if(t=ze(t),t&&(a||n===r))return t.slice(0,Qu(t)+1);if(!t||!(n=Ir(n)))return t;var c=zr(t),m=Gu(c,zr(n))+1;return Rn(c,0,m).join("")}function j_(t,n,a){if(t=ze(t),t&&(a||n===r))return t.replace(wt,"");if(!t||!(n=Ir(n)))return t;var c=zr(t),m=Wu(c,zr(n));return Rn(c,m).join("")}function F_(t,n){var a=l,c=p;if(pt(n)){var m="separator"in n?n.separator:m;a="length"in n?Oe(n.length):a,c="omission"in n?Ir(n.omission):c}t=ze(t);var _=t.length;if(mi(t)){var C=zr(t);_=C.length}if(a>=_)return t;var j=a-vi(c);if(j<1)return c;var z=C?Rn(C,0,j).join(""):t.slice(0,j);if(m===r)return z+c;if(C&&(j+=z.length-j),wc(m)){if(t.slice(j).search(m)){var Z,ee=z;for(m.global||(m=Fa(m.source,ze(Rr.exec(m))+"g")),m.lastIndex=0;Z=m.exec(ee);)var se=Z.index;z=z.slice(0,se===r?j:se)}}else if(t.indexOf(Ir(m),j)!=j){var ue=z.lastIndexOf(m);ue>-1&&(z=z.slice(0,ue))}return z+c}function L_(t){return t=ze(t),t&&yt.test(t)?t.replace(_n,hg):t}var U_=Oi(function(t,n,a){return t+(a?" ":"")+n.toUpperCase()}),Ic=Ul("toUpperCase");function Lf(t,n,a){return t=ze(t),n=a?r:n,n===r?ag(t)?gg(t):Xp(t):t.match(n)||[]}var Uf=Re(function(t,n){try{return Bt(t,r,n)}catch(a){return _c(a)?a:new Ee(a)}}),M_=ln(function(t,n){return Ar(n,function(a){a=Zr(a),cn(t,a,mc(t[a],t))}),t});function q_(t){var n=t==null?0:t.length,a=me();return t=n?ut(t,function(c){if(typeof c[1]!="function")throw new Nr(y);return[a(c[0]),c[1]]}):[],Re(function(c){for(var m=-1;++m<n;){var _=t[m];if(Bt(_[0],this,c))return Bt(_[1],this,c)}})}function z_(t){return hy($r(t,A))}function Sc(t){return function(){return t}}function B_(t,n){return t==null||t!==t?n:t}var H_=ql(),k_=ql(!0);function gr(t){return t}function Oc(t){return yl(typeof t=="function"?t:$r(t,A))}function V_(t){return vl($r(t,A))}function K_(t,n){return _l(t,$r(n,A))}var W_=Re(function(t,n){return function(a){return rs(a,t,n)}}),G_=Re(function(t,n){return function(a){return rs(t,a,n)}});function Pc(t,n,a){var c=Ht(n),m=yo(n,c);a==null&&!(pt(n)&&(m.length||!c.length))&&(a=n,n=t,t=this,m=yo(n,Ht(n)));var _=!(pt(a)&&"chain"in a)||!!a.chain,C=hn(t);return Ar(m,function(j){var z=n[j];t[j]=z,C&&(t.prototype[j]=function(){var Z=this.__chain__;if(_||Z){var ee=t(this.__wrapped__),se=ee.__actions__=hr(this.__actions__);return se.push({func:z,args:arguments,thisArg:t}),ee.__chain__=Z,ee}return z.apply(t,En([this.value()],arguments))})}),t}function J_(){return Ce._===this&&(Ce._=bg),this}function xc(){}function Q_(t){return t=Oe(t),Re(function(n){return wl(n,t)})}var Y_=ic(ut),X_=ic(zu),Z_=ic(Ta);function Mf(t){return fc(t)?Aa(Zr(t)):Ty(t)}function ew(t){return function(n){return t==null?r:Yn(t,n)}}var tw=Bl(),rw=Bl(!0);function Rc(){return[]}function Tc(){return!1}function nw(){return{}}function iw(){return""}function sw(){return!0}function ow(t,n){if(t=Oe(t),t<1||t>G)return[];var a=te,c=Yt(t,te);n=me(n),t-=te;for(var m=$a(c,n);++a<t;)n(a);return m}function aw(t){return Se(t)?ut(t,Zr):Sr(t)?[t]:hr(sf(ze(t)))}function cw(t){var n=++_g;return ze(t)+n}var uw=Eo(function(t,n){return t+n},0),lw=sc("ceil"),fw=Eo(function(t,n){return t/n},1),hw=sc("floor");function dw(t){return t&&t.length?go(t,gr,ka):r}function pw(t,n){return t&&t.length?go(t,me(n,2),ka):r}function gw(t){return ku(t,gr)}function yw(t,n){return ku(t,me(n,2))}function mw(t){return t&&t.length?go(t,gr,Ga):r}function vw(t,n){return t&&t.length?go(t,me(n,2),Ga):r}var _w=Eo(function(t,n){return t*n},1),ww=sc("round"),bw=Eo(function(t,n){return t-n},0);function Ew(t){return t&&t.length?Ca(t,gr):0}function Iw(t,n){return t&&t.length?Ca(t,me(n,2)):0}return v.after=Vv,v.ary=yf,v.assign=C0,v.assignIn=Af,v.assignInWith=jo,v.assignWith=$0,v.at=D0,v.before=mf,v.bind=mc,v.bindAll=M_,v.bindKey=vf,v.castArray=n0,v.chain=df,v.chunk=hm,v.compact=dm,v.concat=pm,v.cond=q_,v.conforms=z_,v.constant=Sc,v.countBy=Ev,v.create=j0,v.curry=_f,v.curryRight=wf,v.debounce=bf,v.defaults=F0,v.defaultsDeep=L0,v.defer=Kv,v.delay=Wv,v.difference=gm,v.differenceBy=ym,v.differenceWith=mm,v.drop=vm,v.dropRight=_m,v.dropRightWhile=wm,v.dropWhile=bm,v.fill=Em,v.filter=Sv,v.flatMap=xv,v.flatMapDeep=Rv,v.flatMapDepth=Tv,v.flatten=uf,v.flattenDeep=Im,v.flattenDepth=Sm,v.flip=Gv,v.flow=H_,v.flowRight=k_,v.fromPairs=Om,v.functions=k0,v.functionsIn=V0,v.groupBy=Av,v.initial=xm,v.intersection=Rm,v.intersectionBy=Tm,v.intersectionWith=Am,v.invert=W0,v.invertBy=G0,v.invokeMap=Cv,v.iteratee=Oc,v.keyBy=$v,v.keys=Ht,v.keysIn=pr,v.map=To,v.mapKeys=Q0,v.mapValues=Y0,v.matches=V_,v.matchesProperty=K_,v.memoize=No,v.merge=X0,v.mergeWith=Nf,v.method=W_,v.methodOf=G_,v.mixin=Pc,v.negate=Co,v.nthArg=Q_,v.omit=Z0,v.omitBy=e_,v.once=Jv,v.orderBy=Dv,v.over=Y_,v.overArgs=Qv,v.overEvery=X_,v.overSome=Z_,v.partial=vc,v.partialRight=Ef,v.partition=jv,v.pick=t_,v.pickBy=Cf,v.property=Mf,v.propertyOf=ew,v.pull=Dm,v.pullAll=ff,v.pullAllBy=jm,v.pullAllWith=Fm,v.pullAt=Lm,v.range=tw,v.rangeRight=rw,v.rearg=Yv,v.reject=Uv,v.remove=Um,v.rest=Xv,v.reverse=gc,v.sampleSize=qv,v.set=n_,v.setWith=i_,v.shuffle=zv,v.slice=Mm,v.sortBy=kv,v.sortedUniq=Km,v.sortedUniqBy=Wm,v.split=x_,v.spread=Zv,v.tail=Gm,v.take=Jm,v.takeRight=Qm,v.takeRightWhile=Ym,v.takeWhile=Xm,v.tap=dv,v.throttle=e0,v.thru=Ro,v.toArray=xf,v.toPairs=$f,v.toPairsIn=Df,v.toPath=aw,v.toPlainObject=Tf,v.transform=s_,v.unary=t0,v.union=Zm,v.unionBy=ev,v.unionWith=tv,v.uniq=rv,v.uniqBy=nv,v.uniqWith=iv,v.unset=o_,v.unzip=yc,v.unzipWith=hf,v.update=a_,v.updateWith=c_,v.values=Ri,v.valuesIn=u_,v.without=sv,v.words=Lf,v.wrap=r0,v.xor=ov,v.xorBy=av,v.xorWith=cv,v.zip=uv,v.zipObject=lv,v.zipObjectDeep=fv,v.zipWith=hv,v.entries=$f,v.entriesIn=Df,v.extend=Af,v.extendWith=jo,Pc(v,v),v.add=uw,v.attempt=Uf,v.camelCase=d_,v.capitalize=jf,v.ceil=lw,v.clamp=l_,v.clone=i0,v.cloneDeep=o0,v.cloneDeepWith=a0,v.cloneWith=s0,v.conformsTo=c0,v.deburr=Ff,v.defaultTo=B_,v.divide=fw,v.endsWith=p_,v.eq=Hr,v.escape=g_,v.escapeRegExp=y_,v.every=Iv,v.find=Ov,v.findIndex=af,v.findKey=U0,v.findLast=Pv,v.findLastIndex=cf,v.findLastKey=M0,v.floor=hw,v.forEach=pf,v.forEachRight=gf,v.forIn=q0,v.forInRight=z0,v.forOwn=B0,v.forOwnRight=H0,v.get=bc,v.gt=u0,v.gte=l0,v.has=K0,v.hasIn=Ec,v.head=lf,v.identity=gr,v.includes=Nv,v.indexOf=Pm,v.inRange=f_,v.invoke=J0,v.isArguments=ei,v.isArray=Se,v.isArrayBuffer=f0,v.isArrayLike=dr,v.isArrayLikeObject=Pt,v.isBoolean=h0,v.isBuffer=Tn,v.isDate=d0,v.isElement=p0,v.isEmpty=g0,v.isEqual=y0,v.isEqualWith=m0,v.isError=_c,v.isFinite=v0,v.isFunction=hn,v.isInteger=If,v.isLength=$o,v.isMap=Sf,v.isMatch=_0,v.isMatchWith=w0,v.isNaN=b0,v.isNative=E0,v.isNil=S0,v.isNull=I0,v.isNumber=Of,v.isObject=pt,v.isObjectLike=Et,v.isPlainObject=cs,v.isRegExp=wc,v.isSafeInteger=O0,v.isSet=Pf,v.isString=Do,v.isSymbol=Sr,v.isTypedArray=xi,v.isUndefined=P0,v.isWeakMap=x0,v.isWeakSet=R0,v.join=Nm,v.kebabCase=m_,v.last=jr,v.lastIndexOf=Cm,v.lowerCase=v_,v.lowerFirst=__,v.lt=T0,v.lte=A0,v.max=dw,v.maxBy=pw,v.mean=gw,v.meanBy=yw,v.min=mw,v.minBy=vw,v.stubArray=Rc,v.stubFalse=Tc,v.stubObject=nw,v.stubString=iw,v.stubTrue=sw,v.multiply=_w,v.nth=$m,v.noConflict=J_,v.noop=xc,v.now=Ao,v.pad=w_,v.padEnd=b_,v.padStart=E_,v.parseInt=I_,v.random=h_,v.reduce=Fv,v.reduceRight=Lv,v.repeat=S_,v.replace=O_,v.result=r_,v.round=ww,v.runInContext=q,v.sample=Mv,v.size=Bv,v.snakeCase=P_,v.some=Hv,v.sortedIndex=qm,v.sortedIndexBy=zm,v.sortedIndexOf=Bm,v.sortedLastIndex=Hm,v.sortedLastIndexBy=km,v.sortedLastIndexOf=Vm,v.startCase=R_,v.startsWith=T_,v.subtract=bw,v.sum=Ew,v.sumBy=Iw,v.template=A_,v.times=ow,v.toFinite=dn,v.toInteger=Oe,v.toLength=Rf,v.toLower=N_,v.toNumber=Fr,v.toSafeInteger=N0,v.toString=ze,v.toUpper=C_,v.trim=$_,v.trimEnd=D_,v.trimStart=j_,v.truncate=F_,v.unescape=L_,v.uniqueId=cw,v.upperCase=U_,v.upperFirst=Ic,v.each=pf,v.eachRight=gf,v.first=lf,Pc(v,function(){var t={};return Yr(v,function(n,a){He.call(v.prototype,a)||(t[a]=n)}),t}(),{chain:!1}),v.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){v[t].placeholder=v}),Ar(["drop","take"],function(t,n){Ne.prototype[t]=function(a){a=a===r?1:qt(Oe(a),0);var c=this.__filtered__&&!n?new Ne(this):this.clone();return c.__filtered__?c.__takeCount__=Yt(a,c.__takeCount__):c.__views__.push({size:Yt(a,te),type:t+(c.__dir__<0?"Right":"")}),c},Ne.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Ar(["filter","map","takeWhile"],function(t,n){var a=n+1,c=a==d||a==T;Ne.prototype[t]=function(m){var _=this.clone();return _.__iteratees__.push({iteratee:me(m,3),type:a}),_.__filtered__=_.__filtered__||c,_}}),Ar(["head","last"],function(t,n){var a="take"+(n?"Right":"");Ne.prototype[t]=function(){return this[a](1).value()[0]}}),Ar(["initial","tail"],function(t,n){var a="drop"+(n?"":"Right");Ne.prototype[t]=function(){return this.__filtered__?new Ne(this):this[a](1)}}),Ne.prototype.compact=function(){return this.filter(gr)},Ne.prototype.find=function(t){return this.filter(t).head()},Ne.prototype.findLast=function(t){return this.reverse().find(t)},Ne.prototype.invokeMap=Re(function(t,n){return typeof t=="function"?new Ne(this):this.map(function(a){return rs(a,t,n)})}),Ne.prototype.reject=function(t){return this.filter(Co(me(t)))},Ne.prototype.slice=function(t,n){t=Oe(t);var a=this;return a.__filtered__&&(t>0||n<0)?new Ne(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),n!==r&&(n=Oe(n),a=n<0?a.dropRight(-n):a.take(n-t)),a)},Ne.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ne.prototype.toArray=function(){return this.take(te)},Yr(Ne.prototype,function(t,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),c=/^(?:head|last)$/.test(n),m=v[c?"take"+(n=="last"?"Right":""):n],_=c||/^find/.test(n);m&&(v.prototype[n]=function(){var C=this.__wrapped__,j=c?[1]:arguments,z=C instanceof Ne,Z=j[0],ee=z||Se(C),se=function(Te){var $e=m.apply(v,En([Te],j));return c&&ue?$e[0]:$e};ee&&a&&typeof Z=="function"&&Z.length!=1&&(z=ee=!1);var ue=this.__chain__,pe=!!this.__actions__.length,ve=_&&!ue,xe=z&&!pe;if(!_&&ee){C=xe?C:new Ne(this);var _e=t.apply(C,j);return _e.__actions__.push({func:Ro,args:[se],thisArg:r}),new Cr(_e,ue)}return ve&&xe?t.apply(this,j):(_e=this.thru(se),ve?c?_e.value()[0]:_e.value():_e)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(t){var n=Zs[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);v.prototype[t]=function(){var m=arguments;if(c&&!this.__chain__){var _=this.value();return n.apply(Se(_)?_:[],m)}return this[a](function(C){return n.apply(Se(C)?C:[],m)})}}),Yr(Ne.prototype,function(t,n){var a=v[n];if(a){var c=a.name+"";He.call(Ei,c)||(Ei[c]=[]),Ei[c].push({name:n,func:a})}}),Ei[bo(r,ae).name]=[{name:"wrapper",func:r}],Ne.prototype.clone=Lg,Ne.prototype.reverse=Ug,Ne.prototype.value=Mg,v.prototype.at=pv,v.prototype.chain=gv,v.prototype.commit=yv,v.prototype.next=mv,v.prototype.plant=_v,v.prototype.reverse=wv,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=bv,v.prototype.first=v.prototype.head,Ji&&(v.prototype[Ji]=vv),v},_i=yg();Ot?((Ot.exports=_i)._=_i,Ye._=_i):Ce._=_i}).call(ds)})(cu,cu.exports);var Nx=Object.defineProperty,Cx=Object.defineProperties,$x=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,Dx=Object.prototype.hasOwnProperty,jx=Object.prototype.propertyIsEnumerable,id=(i,e,r)=>e in i?Nx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,zo=(i,e)=>{for(var r in e||(e={}))Dx.call(e,r)&&id(i,r,e[r]);if(nd)for(var r of nd(e))jx.call(e,r)&&id(i,r,e[r]);return i},Fx=(i,e)=>Cx(i,$x(e));function Un(i,e,r){var s;const o=JP(i);return((s=e.rpcMap)==null?void 0:s[o.reference])||`${Ax}?chainId=${o.namespace}:${o.reference}&projectId=${r}`}function ci(i){return i.includes(":")?i.split(":")[1]:i}function Vp(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Lx(i,e){const r=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!r.length)return[];const s=[];return r.forEach(o=>{const u=e.namespaces[o].accounts;s.push(...u)}),s}function Ux(i={},e={}){const r=sd(i),s=sd(e);return cu.exports.merge(r,s)}function sd(i){var e,r,s,o;const u={};if(!YP(i))return u;for(const[y,w]of Object.entries(i)){const x=Fu(y)?[y]:w.chains,b=w.methods||[],O=w.events||[],A=w.rpcMap||{},B=gs(y);u[B]=Fx(zo(zo({},u[B]),w),{chains:Bc(x,(e=u[B])==null?void 0:e.chains),methods:Bc(b,(r=u[B])==null?void 0:r.methods),events:Bc(O,(s=u[B])==null?void 0:s.events),rpcMap:zo(zo({},A),(o=u[B])==null?void 0:o.rpcMap)})}return u}function Mx(i){return i.includes(":")?i.split(":")[2]:i}function qx(i){const e={};for(const[r,s]of Object.entries(i)){const o=s.methods||[],u=s.events||[],y=s.accounts||[],w=Fu(r)?[r]:s.chains?s.chains:Vp(s.accounts);e[r]={chains:w,methods:o,events:u,accounts:y}}return e}function Hc(i){return typeof i=="number"?i:i.includes("0x")?parseInt(i,16):i.includes(":")?Number(i.split(":")[1]):Number(i)}const Kp={},lt=i=>Kp[i],kc=(i,e)=>{Kp[i]=e};class zx{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ci(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class Bx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||Un(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=parseInt(ci(r));e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,s;let o=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const u=parseInt(o,16);if(this.isChainApproved(u))this.setDefaultChain(`${u}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${u}`);else throw new Error(`Failed to switch to chain 'eip155:${u}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class Hx{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ci(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class kx{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ci(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class Vx{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r),o=ci(r);e[o]=this.createHttpProvider(o,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class Kx{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ci(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class Wx{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ci(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Mn(s,lt("disableProviderPing")))}}class Gx{constructor(e){this.name="near",this.namespace=e.namespace,this.events=lt("events"),this.client=lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||Un(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(vn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Un(e,this.namespace);return typeof s>"u"?void 0:new qn(new Mn(s,lt("disableProviderPing")))}}var Jx=Object.defineProperty,Qx=Object.defineProperties,Yx=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,Xx=Object.prototype.hasOwnProperty,Zx=Object.prototype.propertyIsEnumerable,ad=(i,e,r)=>e in i?Jx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Bo=(i,e)=>{for(var r in e||(e={}))Xx.call(e,r)&&ad(i,r,e[r]);if(od)for(var r of od(e))Zx.call(e,r)&&ad(i,r,e[r]);return i},Vc=(i,e)=>Qx(i,Yx(e));class Mu{constructor(e){this.events=new du,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:e?.logger||td})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new Mu(e);return await r.initialize(),r}async request(e,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Bo({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wh("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(u=>{this.session=u,this.namespaces||(this.namespaces=qx(u.namespaces),this.persist("namespaces",this.namespaces))}).catch(u=>{if(u.message!==jp)throw u;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Gh(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Du.init({logger:this.providerOpts.logger||td,relayUrl:this.providerOpts.relayUrl||xx,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>gs(r)))];kc("client",this.client),kc("events",this.events),kc("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const s=Lx(r,this.session),o=Vp(s),u=Ux(this.namespaces,this.optionalNamespaces),y=Vc(Bo({},u[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new Bx({namespace:y});break;case"solana":this.rpcProviders[r]=new Hx({namespace:y});break;case"cosmos":this.rpcProviders[r]=new kx({namespace:y});break;case"polkadot":this.rpcProviders[r]=new zx({namespace:y});break;case"cip34":this.rpcProviders[r]=new Vx({namespace:y});break;case"elrond":this.rpcProviders[r]=new Kx({namespace:y});break;case"multiversx":this.rpcProviders[r]=new Wx({namespace:y});break;case"near":this.rpcProviders[r]=new Gx({namespace:y});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&Gh(o)&&this.events.emit("accountsChanged",o.map(Mx))}else if(s.name==="chainChanged"){const o=r.chainId,u=r.event.data,y=gs(o),w=Hc(o)!==Hc(u)?`${y}:${Hc(u)}`:o;this.onChainChanged(w)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:o}=r,u=(s=this.client)==null?void 0:s.session.get(e);this.session=Vc(Bo({},u),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Vc(Bo({},Wh("USER_DISCONNECTED")),{data:e.topic}))}),this.on(vn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=e;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(y=>gs(y)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=gs(Object.keys(this.namespaces)[0]),u=this.rpcProviders[o].getDefaultChain();return[o,u]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;if(!this.namespaces)return;const[o,u]=this.validateChain(e);r||this.getProvider(o).setDefaultChain(u),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${rd}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${rd}/${e}`)}}const e2=Mu,t2="wc",r2="ethereum_provider",n2=`${t2}@2:${r2}:`,i2="https://rpc.walletconnect.com/v1/",uu=["eth_sendTransaction","personal_sign"],s2=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],lu=["chainChanged","accountsChanged"],o2=["chainChanged","accountsChanged","message","disconnect","connect"];var a2=Object.defineProperty,c2=Object.defineProperties,u2=Object.getOwnPropertyDescriptors,cd=Object.getOwnPropertySymbols,l2=Object.prototype.hasOwnProperty,f2=Object.prototype.propertyIsEnumerable,ud=(i,e,r)=>e in i?a2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,ys=(i,e)=>{for(var r in e||(e={}))l2.call(e,r)&&ud(i,r,e[r]);if(cd)for(var r of cd(e))f2.call(e,r)&&ud(i,r,e[r]);return i},ld=(i,e)=>c2(i,u2(e));function Yo(i){return Number(i[0].split(":")[1])}function Kc(i){return`0x${i.toString(16)}`}function h2(i){const{chains:e,optionalChains:r,methods:s,optionalMethods:o,events:u,optionalEvents:y,rpcMap:w}=i;if(!Gc(e))throw new Error("Invalid chains");const x={chains:e,methods:s||uu,events:u||lu,rpcMap:ys({},e.length?{[Yo(e)]:w[Yo(e)]}:{})},b=u?.filter(V=>!lu.includes(V)),O=s?.filter(V=>!uu.includes(V));if(!r&&!y&&!o&&!(b!=null&&b.length)&&!(O!=null&&O.length))return{required:e.length?x:void 0};const A=b?.length&&O?.length||!r,B={chains:[...new Set(A?x.chains.concat(r||[]):r)],methods:[...new Set(x.methods.concat(o!=null&&o.length?o:s2))],events:[...new Set(x.events.concat(y!=null&&y.length?y:o2))],rpcMap:w};return{required:e.length?x:void 0,optional:r.length?B:void 0}}class qu{constructor(){this.events=new er.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=n2,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new qu;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=h2(this.rpc);try{const o=await new Promise(async(y,w)=>{var x;this.rpc.showQrModal&&((x=this.modal)==null||x.subscribeModal(b=>{!b.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),w(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ld(ys({namespaces:ys({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e?.pairingTopic})).then(b=>{y(b)}).catch(b=>{w(new Error(b.message))})});if(!o)return;const u=jw(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:u),this.setAccounts(u),this.events.emit("connect",{chainId:Kc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Kc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ld(ys({},Lw("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Kc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,s,o]=e.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;const o=(r=e?.chains)!=null?r:[],u=(s=e?.optionalChains)!=null?s:[],y=o.concat(u);if(!y.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const w=o.length?e?.methods||uu:[],x=o.length?e?.events||lu:[],b=e?.optionalMethods||[],O=e?.optionalEvents||[],A=e?.rpcMap||this.buildRpcMap(y,e.projectId),B=e?.qrModalOptions||void 0;return{chains:o?.map(V=>this.formatChainId(V)),optionalChains:u.map(V=>this.formatChainId(V)),methods:w,events:x,optionalMethods:b,optionalEvents:O,rpcMap:A,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:B,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Yo(this.rpc.chains):Yo(this.rpc.optionalChains),this.signer=await e2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await import("./index.95db26fa.js").then(function(o){return o.i});r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ys({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:o}=e;r&&Gc(r)&&(this.rpc.chains=r.map(u=>this.formatChainId(u)),r.forEach(u=>{this.rpc.rpcMap[u]=o?.[u]||this.getRpcUrl(u)})),s&&Gc(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(u=>this.formatChainId(u)),s.forEach(u=>{this.rpc.rpcMap[u]=o?.[u]||this.getRpcUrl(u)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${i2}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const p2=qu;export{p2 as EthereumProvider,o2 as OPTIONAL_EVENTS,s2 as OPTIONAL_METHODS,lu as REQUIRED_EVENTS,uu as REQUIRED_METHODS,qu as default};